{"version":3,"sources":["graphql/queries.js","util/util.js","components/ui/SideBar.js","components/Nav.js","json_files/search_suggestions.js","components/ui/SearchBar.js","components/NavBar.js","components/ui/MiniSideBar.js","components/Videos/VideoIndex.js","graphql/mutations.js","components/Comments/ReplyCommentCreate.js","components/Comments/CommentDelete.js","components/Comments/EditComment.js","components/Comments/CommentReplyItem.js","components/Comments/CommentReplyIndex.js","components/Comments/CommentReplyCreate.js","components/Comments/CommentRootDelete.js","components/Comments/CommentIndexItem.js","components/Comments/CommentIndex.js","components/Like/LikeDislike.js","components/Like/LikeVideo.js","components/Videos/MiniIndex.js","components/Comments/CommentCreate.js","components/favorite/Favorite.js","components/Videos/VideoDetail.js","components/User/Register.js","components/User/Login.js","util/route_util.js","components/Videos/VideoSearch.js","components/Videos/LikedVideos.js","components/Videos/FavoriteVideos.js","components/User/Profile.js","App.js","index.js"],"names":["IS_LOGGED_IN","gql","FETCH_USER","FETCH_VIDEO","FETCH_COMMENT","FETCH_VIDEOS","FETCH_VIDEO_LIKES","FETCH_USER_LIKED_VIDEOS","FETCH_USER_FAVORITE_VIDEOS","currentUser","JSON","parse","localStorage","getItem","window","addEventListener","event","src","darkTheme","lightTheme","document","getElementById","changeTheme","currentTheme","link","createElement","href","rel","type","body","appendChild","changeThemeLogo","getCurrentTheme","SideBar","theme","target","checked","setItem","profile","className","to","id","profileSrc","image","username","alt","onChange","this","style","Component","Queries","Nav","props","profilePath","user","concat","client","query","data","isLoggedIn","profileEmail","email","profileUsername","onClick","e","preventDefault","navLogoutPopup","classList","toggle","handleToggle","removeItem","writeData","gendersJson","name","value","getSuggestions","inputValue","trim","toLowerCase","length","searchSuggestions","filter","item","toLocaleLowerCase","includes","getSuggestionValue","suggestion","renderSuggestion","SearchBar","handleKeydown","getAttribute","key","keyCode","location","state","handleSearchClick","onSuggestionsFetchRequested","setState","suggestions","onSuggestionsClearRequested","newValue","method","referrer","inputProps","placeholder","display","highlightFirstSuggestion","NavBar","toggleMenu","sideBar","getElementsByClassName","miniSideBar","toggleClassSide","contains","toggleClassMini","remove","add","MiniSideBar","VideoIndex","onVideosFetched","videos","newPageNumber","pageNumber","loading","firstLoad","documentsFullyLoaded","handleScroll","removeEventListener","innerHeight","scrollY","offsetHeight","click","perPage","Object","values","map","_id","title","url","allowscriptaccess","allowFullScreen","passive","renderVideos","width","height","backgroundColor","a","async","variables","criteria","undefined","fetchPolicy","LOGIN_USER","REGISTER_USER","VERIFY_USER","VIDEO_COMMENT","REPLY_COMMENT","REPLY_REPLY_COMMENT","DELETE_COMMENT","UPDATE_COMMENT","ADD_VIDEO_LIKE","REMOVE_VIDEO_LIKE","ADD_VIDEO_DISLIKE","REMOVE_VIDEO_DISLIKE","ADD_TO_FAVORITES","REMOVE_FROM_FAVORITES","Mutations","ReplyCommentCreate","text","gif","error","giphy","field","replyReplyComment","author","parentCommentId","parentId","replyTo","then","handleToggleSubmit","cache","video","readQuery","videoId","err","commentsArray","assign","comments","i","replies","push","writeQuery","downsized","commentId","onError","message","mutation","update","updateCache","onSubmit","handleSubmit","apiKey","onSelected","updategif","bind","React","CommentDelete","handleSubmitToggle","deleteComment","optionsName","options","refetchQueries","EditComment","comment","updateComment","editOptions","commentName","commentOptions","CommentReplyItem","date","Date","year","getFullYear","month","getMonth","day","getDate","num","split","slice","CommentReplyIndex","reply","CommentReplyCreate","addReplyComment","CommentRootDelete","handleSubmit2","CommentIndexItem","CommentIndex","LikeDislike","hasLiked","VideoLike","userId","VideoRemoveLike","VideoDislike","hasDisliked","VideoRemoveDislike","addVideoLike","removeVideoLike","addVideoDislike","removeVideoDislike","likeArray","likes","dislikeArray","dislikes","splice","countLike","countDislike","popup","liked","disliked","getLikeCount","getDislikeCount","class","handleRemoveLike","handleDislike","handleLike","handleRemoveDislike","graphql","LikeVideo","MiniIndex","CommentCreate","addVideoComment","commentArray","withRouter","Query","Favorite","func","AddToFavorites","cursor","handleAddRemoveFavorite","RemoveFromFavorites","inUserFavorites","favoriteBy","toString","renderFavorite","renderUnFavorite","VideoDetail","description","newLike","likesArray","renderVideoDetail","match","params","Register","updateImage","files","file","reader","FileReader","onloadend","result","readAsDataURL","password","password2","register","loggedIn","onCompleted","token","stringify","registerUser","Login","emailOrUsername","handleDemoSubmit","demoUser","loginUser","that","index","demoIntervalId","setInterval","clearInterval","history","demoEffect","login","AuthRoute","component","path","exact","routeType","rest","render","VideoSearch","getCriteria","hash","videosLength","listen","action","renderSearchResult","LikedVideos","videos_liked","FavoriteVideos","favoriteVideos","UserProfile","displayVideo","App","Mutation","InMemoryCache","dataIdFromObject","object","httpLink","createHttpLink","credentials","uri","errorLink","graphQLErrors","console","log","ApolloClient","ApolloLink","from","headers","authorization","networkError","Boolean","mutate","verifyUser","ReactDOM","querySelector"],"mappings":"iiGAEe,OACbA,aAAcC,IAAF,KAKZC,WAAYD,IAAF,KAiBVE,YAAaF,IAAF,KA4CXG,cAAeH,IAAF,KA0BbI,aAAcJ,IAAF,KAmBZK,kBAAmBL,IAAF,KAUjBM,wBAAyBN,IAAF,KAmBvBO,2BAA4BP,IAAF,MC/IfQ,EAAc,WACzB,OAAOC,KAAKC,MAAMC,aAAaC,QAAQ,UAGzCC,OAAOC,iBAAiB,oBAAoB,SAACC,GAC3C,IACIC,EAAuB,SADRL,aAAaC,QAAQ,SACJC,OAAOI,UAAYJ,OAAOK,WAC1DC,SAASC,eAAe,eAC1BD,SAASC,eAAe,aAAaJ,IAAMA,MAIxC,IAQMK,EAAc,WACzB,IAAIC,EAAeX,aAAaC,QAAQ,SACpCW,EAAOJ,SAASK,cAAc,QAClCD,EAAKE,KAAwB,SAAjBH,EAA0B,4CAA8C,2CACpFC,EAAKG,IAAM,aACXH,EAAKI,KAAO,WACZR,SAASS,KAAKC,YAAYN,GAdG,WAC7B,IACIP,EAAuB,SADRL,aAAaC,QAAQ,SACJC,OAAOI,UAAYJ,OAAOK,WAC1DC,SAASC,eAAe,eAC5BD,SAASC,eAAe,aAAaJ,IAAMA,GAW3Cc,IAaWC,EAAkB,WAC7B,OAAOpB,aAAaC,QAAQ,UC2DfoB,E,2MAxFbX,YAAc,SAACN,GACb,IAAIkB,EAAQlB,EAAMmB,OAAOC,QAAU,OAAS,QAC5CxB,aAAayB,QAAQ,QAASH,GAC9BZ,K,mFANAF,SAASC,eAAe,YAAYe,QAAgC,SAAtBJ,M,+BAU9C,IAAIM,EAEFA,EADE7B,IACQ,wBAAI8B,UAAU,oCACrB,kBAAC,IAAD,CAAMC,GAAE,mBAAc/B,IAAcgC,KACnC,uBAAGF,UAAU,eAAb,QACA,0BAAMA,UAAU,IAAhB,aAIM,KAEZ,IAAIG,EAAajC,IAAgBA,IAAckC,MAAQ,2CACnDC,EAAWnC,IAAgBA,IAAcmC,SAAW,QACxD,OACE,2BAAOL,UAAU,gBACf,yBAAKA,UAAU,qBACb,yBAAKtB,IAAKyB,EAAYH,UAAU,iBAAiBM,IAAKD,IACtD,uBAAGL,UAAU,oBAAoBK,GACjC,2BAAOL,UAAU,UACf,2BAAOE,GAAG,WAAWb,KAAK,WAAWkB,SAAUC,KAAKzB,cADtD,IAEE,0BAAMiB,UAAU,aAGpB,6BACA,4BACE,wBAAIA,UAAU,oCACZ,kBAAC,IAAD,CAAMC,GAAG,KACP,uBAAGD,UAAU,eAAb,QACA,0BAAMA,UAAU,IAAhB,UAGHD,EACA7B,KACC,oCACE,wBAAI8B,UAAU,oCACZ,uBAAGA,UAAU,oBAAb,QACA,kBAAC,IAAD,CAAMC,GAAG,gBAAgBD,UAAU,IAAnC,iBAEF,wBAAIA,UAAU,oCACZ,uBAAGA,UAAU,6BAAb,QACA,kBAAC,IAAD,CAAMC,GAAG,qBAAT,qBAIN,wBAAID,UAAU,0BACZ,uBAAGA,UAAU,kBAAb,QACA,6CACF,wBAAIA,UAAU,0BACZ,uBAAGA,UAAU,cAAb,QACA,kBAAC,IAAD,CAAMC,GAAG,gBAAT,eAEF,wBAAID,UAAU,0BACZ,uBAAGA,UAAU,cAAb,QACA,kBAAC,IAAD,CAAMC,GAAG,eAAT,eAEF,wBAAID,UAAU,0BACZ,uBAAGA,UAAU,gBAAb,QACA,kBAAC,IAAD,CAAMC,GAAG,gBAAT,eAEF,wBAAID,UAAU,0BACZ,uBAAGA,UAAU,eAAb,QACA,kBAAC,IAAD,CAAMC,GAAG,iBAAT,gBAEF,wBAAID,UAAU,0BACZ,uBAAGA,UAAU,gBAAb,QACA,kBAAC,IAAD,CAAMC,GAAG,iBAAT,iBAED,wBAAID,UAAU,0BACb,uBAAGS,MAAO,CAAC,YAAY,QAAST,UAAU,kBAA1C,QACA,kBAAC,IAAD,CAAMC,GAAG,kBAAT,kBAED,wBAAID,UAAU,0BACb,uBAAGS,MAAO,CAAC,YAAY,QAAST,UAAU,mBAA1C,QACA,kBAAC,IAAD,CAAMC,GAAG,mBAAT,yB,GAtFUS,a,QCAdjD,EAAiBkD,EAAjBlD,aAwEOmD,EA7DH,SAAAC,GACV,IAAIC,EAAc,IACZC,EAAO7C,IAIb,OAHI6C,IACFD,EAAc,WAAWE,OAAOD,EAAKb,KAGrC,kBAAC,IAAD,MACG,SAAAe,GAAM,OACL,kBAAC,IAAD,CAAOC,MAAOzD,IACX,YACC,GADa,EAAX0D,KACOC,WAAY,CACnB,IAAIjB,EAAajC,IAAgBA,IAAckC,MAAQ,2CACnDiB,EAAenD,IAAgBA,IAAcoD,MAAQ,GACrDC,EAAkBrD,IAAgBA,IAAcmC,SAAW,GAE/D,OACE,yBAAKL,UAAU,gBAAgBwB,QAAS,SAACC,GAAD,OA1BnC,SAACA,GACpBA,EAAEC,iBACF,IAAIC,EAAiB9C,SAASC,eAAe,kBAEzC6C,GACFA,EAAeC,UAAUC,OAAO,WAqB2BC,CAAaL,KAAI,yBAAKnB,IAAI,UAAU5B,IAAKyB,EAAYH,UAAU,eAC5G,yBAAKA,UAAU,WAAWE,GAAG,kBAC3B,yBAAKF,UAAU,eACb,uBAAGA,UAAU,sBAAsBuB,GACnC,uBAAGvB,UAAU,mBAAmBqB,IAElC,yBAAKrB,UAAU,gBACb,kBAAC,IAAD,CAAMC,GAAIa,GAAa,uBAAGd,UAAU,8BAApC,eAEF,yBAAKA,UAAU,gBACb,kBAAC,IAAD,CAAMC,GAAG,iBAAgB,uBAAGD,UAAU,mCAAtC,aAEF,4BACEA,UAAU,gBACVwB,QAAS,SAAAC,GACPA,EAAEC,iBACFrD,aAAa0D,WAAW,cACxB1D,aAAa0D,WAAW,QACxBd,EAAOe,UAAU,CAAEb,KAAM,CAAEC,YAAY,OAIzC,kBAAC,IAAD,CAAMnB,GAAG,IAAID,UAAU,eAAc,uBAAGA,UAAU,sCAAlD,eAOR,OACE,yBAAKA,UAAU,aACb,kBAAC,IAAD,CAAMC,GAAG,YAAYD,UAAU,eAA/B,WACA,kBAAC,IAAD,CAAMC,GAAG,SAASD,UAAU,eAA5B,mB,iBCxCHiC,EA1BK,CAClB,CAAEC,KAAM,MAAOC,MAAO,GACtB,CAAED,KAAM,OAAQC,MAAO,GACvB,CAAED,KAAM,YAAaC,MAAO,GAC5B,CAAED,KAAM,MAAOC,MAAO,GACtB,CAAED,KAAM,OAAQC,MAAO,GACvB,CAAED,KAAM,YAAaC,MAAO,GAC5B,CAAED,KAAM,aAAcC,MAAO,GAC7B,CAAED,KAAM,UAAWC,MAAO,GAC1B,CAAED,KAAM,OAAQC,MAAO,GACvB,CAAED,KAAM,SAAUC,MAAO,IACzB,CAAED,KAAM,UAAWC,MAAO,IAC1B,CAAED,KAAM,MAAOC,MAAO,IACtB,CAAED,KAAM,OAAQC,MAAO,IACvB,CAAED,KAAM,mBAAoBC,MAAO,IACnC,CAAED,KAAM,WAAYC,MAAO,IAC3B,CAAED,KAAM,QAASC,MAAO,IACxB,CAAED,KAAM,wBAAyBC,MAAO,IACxC,CAAED,KAAM,QAASC,MAAO,IACxB,CAAED,KAAM,SAAUC,MAAO,IACzB,CAAED,KAAM,cAAeC,MAAO,IAC9B,CAAED,KAAM,uCAAwCC,MAAO,IACvD,CAAED,KAAM,uBAAwBC,MAAO,IACvC,CAAED,KAAM,gBAAiBC,MAAO,KCnB5BC,EAAiB,SAAAD,GACrB,IAAME,EAAaF,EAAMG,OAAOC,cAEhC,OAAuB,IADHF,EAAWG,OACJ,GAAKC,EAAkBC,QAAO,SAAAC,GAAI,OAC3DA,EAAKT,KAAKU,oBAAoBC,SAASR,OAGrCS,EAAqB,SAAAC,GAAU,OAAIA,EAAWb,MAC9Cc,EAAmB,SAAAD,GAAU,OACjC,6BACGA,EAAWb,OAsEDe,E,YAjEb,aAAe,IAAD,8BACZ,+CAQFC,cAAgB,SAACzE,GACoC,uCAA/CA,EAAMmB,OAAOuD,aAAa,mBACV,UAAd1E,EAAM2E,KAAqC,KAAlB3E,EAAM4E,UACjC9E,OAAO+E,SAASnE,KAAhB,mBAAmC,EAAKoE,MAAMpB,UAZtC,EAiBdqB,kBAAoB,SAAC/E,GACK,cAApBA,EAAMmB,OAAOM,KACb3B,OAAO+E,SAASnE,KAAhB,mBAAmC,EAAKoE,MAAMpB,SAnBtC,EAuBdsB,4BAA8B,YAAgB,IAAbtB,EAAY,EAAZA,MAC/B,EAAKuB,SAAS,CACZC,YAAavB,EAAeD,MAzBlB,EA6BdyB,4BAA8B,WAC5B,EAAKF,SAAS,CAAEC,YAAa,MA9BjB,EAiCdpD,SAAW,SAAC9B,EAAD,GAAkC,IAAxBoF,EAAuB,EAAvBA,SAAuB,EAAbC,OAC7B,EAAKJ,SAAS,CAAEvB,MAAO0B,KAhCvB,EAAKN,MAAQ,CAAEpB,MAAO,GAAIwB,YAAa,GAAII,SAAU,MAFzC,E,iFAMZlF,SAASL,iBAAiB,UAAWgC,KAAK0C,iB,+BA+BlC,IAAD,EACwB1C,KAAK+C,MAA5BpB,EADD,EACCA,MAAOwB,EADR,EACQA,YACTK,EAAa,CACjBC,YAAa,YACb9B,QACA5B,SAAUC,KAAKD,UAGjB,OACE,yBAAKL,GAAG,MAAMO,MAAO,CAAEyD,QAAS,SAC9B,kBAAC,IAAD,CACEhE,GAAG,kBACHyD,YAAaA,EACbF,4BAA6BjD,KAAKiD,4BAClCG,4BAA6BpD,KAAKoD,4BAClCd,mBAAoBA,EACpBE,iBAAkBA,EAClBgB,WAAYA,EACZG,0BAA0B,IAE5B,4BAAQnE,UAAU,wBAAwBwB,QAAShB,KAAKgD,mBACtD,uBAAGxD,UAAU,gBAAgBE,GAAG,oB,GA3DlBQ,aCsBT0D,E,2MA9BbC,WAAa,WACX,IAAIC,EAAUzF,SAAS0F,uBAAuB,WAAW,GACrDC,EAAc3F,SAAS0F,uBAAuB,gBAAgB,GAC9DE,EAAkBH,EAAQ1C,UAAU8C,SAAS,QAAU,OAAQ,OAC/DC,EAAkBH,EAAY5C,UAAU8C,SAAS,QAAU,OAAS,OACxEF,EAAY5C,UAAUgD,OAAO,QAC7BJ,EAAY5C,UAAUgD,OAAO,QAC7BJ,EAAY5C,UAAUiD,IAAIF,GAC1BL,EAAQ1C,UAAUgD,OAAO,QACzBN,EAAQ1C,UAAUgD,OAAO,QACzBN,EAAQ1C,UAAUiD,IAAIJ,I,wELWLpG,aAAaC,QAAQ,SAEtCS,KAEAV,aAAayB,QAAQ,QAAS,QAC9Bf,KKXA,IAAIL,EAA6B,SAAvBL,aAAasB,MAAmBpB,OAAOI,UAAYJ,OAAOK,WACpE,OACE,yBAAKoB,UAAU,UACb,yBAAKA,UAAU,kBACb,0BAAMwB,QAAShB,KAAK6D,WAAYrE,UAAU,mBAAmBE,GAAG,cAAhE,UACA,kBAAC,IAAD,CAAMD,GAAG,KAAI,yBAAKC,GAAG,YAAYF,UAAU,cAActB,IAAKA,EAAK4B,IAAI,cAEzE,kBAAC,EAAD,MACA,kBAAC,EAAD,W,GA1BaI,aCmCNoE,E,2MA/Bb/F,YAAc,SAACN,GACb,IAAIkB,EAAQlB,EAAMmB,OAAOC,QAAU,OAAS,QAC5CxB,aAAayB,QAAQ,QAASH,GAC9BZ,K,mFANAF,SAASC,eAAe,YAAYe,QAAgC,SAAtBJ,M,+BAW9C,OACE,2BAAOO,UAAU,qBACf,4BACE,wBAAIA,UAAU,yCACZ,kBAAC,IAAD,CAAMC,GAAG,KAAI,uBAAGD,UAAU,yBAAb,QAA+C,uBAAGA,UAAU,oBAAb,UAE7D9B,KACC,oCACA,wBAAI8B,UAAU,yCACZ,kBAAC,IAAD,CAAMC,GAAG,gBAAgBD,UAAU,IAAG,uBAAGA,UAAU,8BAAb,QAAoD,uBAAGA,UAAU,oBAAb,cAE1F,wBAAIA,UAAU,yCACd,kBAAC,IAAD,CAAMC,GAAG,qBAAoB,uBAAGD,UAAU,uCAAb,QAA6D,uBAAGA,UAAU,oBAAb,sB,GA1B9EU,aCElB5C,EAAiB6C,EAAjB7C,aAsHOiH,E,YAnHb,WAAYlE,GAAQ,IAAD,8BACjB,4CAAMA,KAwCRmE,gBAAkB,SAAA7D,GAChB,GAA2B,IAAvBA,EAAK8D,OAAOzC,OAAhB,CAIA,IAAI0C,EAAgB,EAAK3B,MAAM4B,YAAc,EACvCF,EAAS,EAAK1B,MAAMpC,KAAK8D,OAAOjE,OAAOG,EAAK8D,QAClD,EAAKvB,SAAS,CAAEvC,KAAM,CAAE8D,OAAQA,KAChC,EAAKvB,SAAS,CAAEyB,WAAYD,IAC5B,EAAKxB,SAAS,CAAE0B,SAAS,EAAOC,WAAW,SAPzC,EAAK3B,SAAS,CAAE4B,sBAAsB,EAAMF,SAAS,KA3CtC,EA+DnBG,aAAe,SAAC9G,GACV,EAAK8E,MAAM8B,WAAa,EAAK9B,MAAM6B,UAGnC,EAAK7B,MAAM+B,sBACb/G,OAAOiH,oBAAoB,SAAU,EAAKD,cAEvChH,OAAOkH,YAAclH,OAAOmH,SAAY7G,SAASS,KAAKqG,cACzD9G,SAASC,eAAe,WAAW8G,UArErC,EAAKrC,MAAQ,CACXpC,KAAM,CAAE8D,OAAQ,IAAME,WAAY,EAAGU,QAAS,GAC9CT,SAAS,EAAOC,WAAW,EAAMC,sBAAsB,GAJxC,E,4EASjB,OAAI9E,KAAK+C,MAAM6B,QACN,yBAAKpF,UAAU,2BAAf,cAEqC,IAA1C8F,OAAOC,OAAOvF,KAAK+C,MAAMpC,MAAMqB,OAC1B,KAEFhC,KAAK+C,MAAMpC,KAAK8D,OAAOe,KAAI,YACP,IAAvBC,EAAsB,EAAtBA,IAAKC,EAAiB,EAAjBA,MAAOC,EAAU,EAAVA,IACd,OACE,yBAAK/C,IAAK6C,EAAKjG,UAAU,mBACvB,6BACE,4BAAQA,UAAU,gBAChB,2BAAOkC,KAAK,QAAQC,MAAK,UAAKgE,EAAL,4EACzB,2BAAOjE,KAAK,kBAAkBC,MAAM,SACpC,2BAAOD,KAAK,oBAAoBC,MAAM,WACtC,2BAAOzD,IAAG,UAAKyH,EAAL,8EACR9G,KAAK,gCACLW,UAAU,eAAeoG,kBAAkB,SAASC,iBAAiB,MAG3E,yBAAKrG,UAAU,cACb,kBAAC,IAAD,CAAMC,GAAE,kBAAagG,IACnB,uBAAGjG,UAAU,yBACVkG,W,0CAuBbrH,SAASC,eAAe,WAAW8G,QACnCrH,OAAOC,iBAAiB,SAAUgC,KAAK+E,aAAc,CAAEe,SAAS,M,6CAIhE/H,OAAOiH,oBAAoB,SAAUhF,KAAK+E,gB,+BAelC,IAAD,OACP,OACE,kBAAC,IAAD,MACG,SAAAtE,GAAM,aACL,yBAAKf,GAAG,aACN,kBAAC,EAAD,MACA,yBAAKF,UAAU,aACb,yBAAKA,UAAU,aACb,kBAAC,EAAD,MACA,kBAAC,EAAD,MACA,6BAASA,UAAU,QACjB,kDACA,yBAAKA,UAAU,OACZ,EAAKuD,MAAMpC,MAAQ,EAAKoF,aAAa,EAAKhD,MAAMpC,OAEnD,yBAAKV,MAAO,CAAE+F,MAAO,MAAOC,OAAQ,QAClC,+BAAQhG,MAAO,CAAE+F,MAAO,MAAOC,OAAQ,OAASvG,GAAG,WAAnD,sBAAoE,CAAEsG,MAAO,OAAQE,gBAAiB,aAAtG,yBACW,SAAOjF,GAAP,iBAAAkF,EAAAC,OAAA,uDACPnF,EAAEC,iBACF,EAAKgC,SAAS,CAAE0B,SAAS,IAFlB,WAAAuB,EAAA,MAGgB1F,EAAOC,MAAM,CAClCA,MAAOpD,EACP+I,UAAW,CAAEC,cAAUC,EAAWlB,QAAS,EAAKtC,MAAMsC,QAASV,WAAY,EAAK5B,MAAM4B,YACtF6B,YAAa,kBANR,gBAGC7F,EAHD,EAGCA,KAKR,EAAK6D,gBAAgB7D,GARd,wCADX,gB,GA5FKT,a,gnICPV,QACbuG,WAAYvJ,IAAF,MAYVwJ,cAAexJ,IAAF,MAYbyJ,YAAazJ,IAAF,MAOX0J,cAAe1J,IAAF,MAkBb2J,cAAe3J,IAAF,MAmBb4J,oBAAqB5J,IAAF,MAmBnB6J,eAAgB7J,IAAF,MAOd8J,eAAgB9J,IAAF,MAkBd+J,eAAgB/J,IAAF,MAOdgK,kBAAmBhK,IAAF,MAOjBiK,kBAAmBjK,IAAF,KAOjBkK,qBAAsBlK,IAAF,KAOpBmK,iBAAkBnK,IAAF,KAOhBoK,sBAAuBpK,IAAF,M,oBC/If4J,GAAwBS,GAAxBT,oBACA1J,GAAgB+C,EAAhB/C,YAsJOoK,G,YAnJb,WAAYnH,GAAQ,IAAD,8BACjB,4CAAMA,KAED0C,MAAQ,CACX0E,KAAM,GACNC,IAAK,GACLC,MAAO,IANQ,E,0EAUN1G,EAAGvB,GACVuB,GACFA,EAAEC,iBAEJ,IAAI0G,EAAQvJ,SAASC,eAAeoB,GAEhCkI,GACFA,EAAMxG,UAAUC,OAAO,U,yCAIR3B,GACjB,IAAIkI,EAAQvJ,SAASC,eAAeoB,GAEhCkI,GAASA,EAAMxG,UAAU8C,SAAS,SACpC0D,EAAMxG,UAAUC,OAAO,U,6BAIpBwG,GAAQ,IAAD,OACZ,OAAO,SAAA5G,GACL,EAAKiC,SAAL,eAAiB2E,EAAQ5G,EAAE7B,OAAOuC,W,mCAIzBV,EAAG6G,GAAoB,IAAD,OAEjC,GADA7G,EAAEC,iBACsB,KAApBlB,KAAK+C,MAAM0E,KAAf,CAKA,IAAIA,EAAOzH,KAAK+C,MAAM0E,KAClBC,EAAM1H,KAAK+C,MAAM2E,IAIrBI,EAAkB,CAChBzB,UAAW,CACToB,KAJIzH,KAAKK,MAAME,KAAO,IAAMkH,EAK5BM,OAAQrK,IAAcgC,GACtBsI,gBAAiBhI,KAAKK,MAAM4H,SAC5BP,IAAKA,EACLQ,QAASlI,KAAKK,MAAM6H,WAGrBC,MAAK,SAAAxH,GACJ,EAAKuC,SAAS,CACZuE,KAAM,GACNC,IAAK,GACLC,MAAO,QAERQ,MAAK,SAAAxH,GACN,EAAKyH,mBAAmB,EAAK/H,MAAM4H,SAASzH,OAAO,yBAzBrDR,KAAKkD,SAAS,CAAEyE,MAAO,sB,kCA6BfU,E,GAAyC,IAC/CC,EADuBR,EAAuB,EAA/BnH,KAAQmH,kBAE3B,IACEQ,EAAQD,EAAME,UAAU,CAAE7H,MAAOtD,GAAaiJ,UAAW,CAAE3G,GAAIM,KAAKK,MAAMmI,WAC1E,MAAOC,GACP,OAGF,GAAIH,EAAO,CAGT,IADA,IAAII,GADJJ,EAAQhD,OAAOqD,OAAO,GAAIL,EAAMA,QACNM,SACjBC,EAAI,EAAGA,EAAIH,EAAc1G,OAAQ6G,IACpC7I,KAAKK,MAAM4H,WAAaS,EAAcG,GAAGpD,KAC3CiD,EAAcG,GAAGC,QAAQC,KAAKjB,GAIlCO,EAAMW,WAAW,CACftI,MAAOtD,GACPiJ,UAAW,CAAE3G,GAAIM,KAAKK,MAAMmI,SAC5B7H,KAAM,CAAE2H,MAAOA,Q,gCAKXZ,GACR1H,KAAKkD,SAAS,CAAEwE,IAAKA,EAAIuB,UAAUtD,Q,+BAG3B,IAQFgC,EARC,OACDpH,EAAO7C,IACPwL,EAAYlJ,KAAKK,MAAM4H,SAASzH,OAAO,gBAC7C,OAAKD,GAID7C,IAAcmC,WAAaG,KAAKK,MAAME,MAEf,oBAArBP,KAAK+C,MAAM4E,QACbA,EAAQ,0BAGV,kBAAC,IAAD,CACEwB,QAAS,SAAAxB,GAAW,EAAKzE,SAAS,CAAEyE,MAAOA,EAAMyB,WACjDC,SAAUvC,GACVwC,OAAQ,SAACjB,EAAO1H,GAAR,OAAiB,EAAK4I,YAAYlB,EAAO1H,MAEhD,SAACmH,EAAD,KAAsBnH,KAAtB,OACC,6BACE,0BAAMnB,UAAU,qBAAqBgK,SAAU,SAAAvI,GAAC,OAAI,EAAKwI,aAAaxI,EAAG6G,KACvE,2BACEnG,MAAO,EAAKoB,MAAM0E,KAClB1H,SAAU,EAAKuJ,OAAO,QACtB7F,YAAa,IAAM,EAAKpD,MAAME,KAC9Bf,UAAU,yBAEZ,6BAAMmI,GACN,yBAAKnI,UAAU,iBACf,yBAAKA,UAAU,mBACb,4BAAQA,UAAU,wBAAwBwB,QAAS,SAACC,GAAD,OAAO,EAAKK,aAAaL,EAAGiI,KAA/E,OACA,yBAAK1J,UAAU,gBAAgBE,GAAIwJ,GACjC,kBAAC,KAAD,CAAQxJ,GAAG,eAAegK,OAAO,mCAAmCC,WAAY,EAAKC,UAAUC,KAAK,OAGxG,4BAAQrK,UAAU,uBAAuBX,KAAK,UAA9C,gBA/BD,kC,GArGoBiL,IAAM5J,W,SCJ/B9C,GAAgB+C,EAAhB/C,YACA2J,GAAmBQ,GAAnBR,eA4DOgD,G,YAzDb,WAAY1J,GAAQ,IAAD,8BACjB,4CAAMA,KAED2J,mBAAqB,EAAKA,mBAAmBH,KAAxB,iBAHT,E,0EAMN5I,EAAGgJ,GAAgB,IAAD,OAC7BhJ,EAAEC,iBACF+I,EAAc,CACZ5D,UAAW,CACX3G,GAAIM,KAAKK,MAAM6I,aAEdf,MAAK,kBAAM,EAAK6B,mBAAL,UAA2B,EAAK3J,MAAM6I,iB,yCAGnCgB,GACjB,IAAIC,EAAU9L,SAASC,eAAe4L,GAElCC,GAAWA,EAAQ/I,UAAU8C,SAAS,SACxCiG,EAAQ/I,UAAUC,OAAO,U,+BAMnB,IAAD,OAGP,OAFa3D,KAIFsC,KAAKK,MAAME,OAAS7C,IAAcmC,SAE3C,kBAAC,IAAD,CACEwJ,SAAUtC,GACVqD,eAAgB,WACd,MAAO,CACL,CACE1J,MAAOtD,GAAaiJ,UAAW,CAAE3G,GAAI,EAAKW,MAAMmI,cAKrD,SAACyB,EAAD,KAAkBtJ,KAAlB,OACC,6BACE,0BAAMnB,UAAU,gBAAgBgK,SAAU,SAAAvI,GAAC,OAAI,EAAKwI,aAAaxI,EAAGgJ,KAClE,4BAAQpL,KAAK,UAAb,eAhBD,kC,GA9BeiL,IAAM5J,WCH1B9C,GAAgB+C,EAAhB/C,YACA4J,GAAmBO,GAAnBP,eAoEOqD,G,YAjEb,WAAYhK,GAAQ,IAAD,8BACjB,4CAAMA,KAED0C,MAAQ,CACX0E,KAAM,EAAKpH,MAAMiK,QAAQ7C,MAJV,E,oEAQZI,GAAQ,IAAD,OAEZ,OAAO,SAAA5G,GACL,EAAKiC,SAAL,eAAiB2E,EAAQ5G,EAAE7B,OAAOuC,W,mCAIzBV,EAAGsJ,GACdtJ,EAAEC,iBAEFqJ,EAAc,CACZlE,UAAW,CACT3G,GAAIM,KAAKK,MAAMiK,QAAQ7E,IACvBgC,KAAMzH,KAAK+C,MAAM0E,U,+BAMb,IAAD,OAGP,OAFa/J,KAIFsC,KAAKK,MAAMiK,QAAQvC,OAAOlI,WAAanC,IAAcmC,SAE5D,kBAAC,IAAD,CACEwJ,SAAUrC,GACVoD,eAAgB,WACd,MAAO,CACL,CACE1J,MAAOtD,GAAaiJ,UAAW,CAAE3G,GAAI,EAAKW,MAAMmI,cAKrD,SAAC+B,EAAD,KAAkB5J,KAAlB,OACC,6BACE,0BAAMnB,UAAU,YAAYgK,SAAU,SAAAvI,GAAC,OAAI,EAAKwI,aAAaxI,EAAGsJ,KAC9D,2BACE/K,UAAU,YAEVmC,MAAO,EAAKoB,MAAM0E,KAClB1H,SAAU,EAAKuJ,OAAO,UAExB,4BAAQ9J,UAAU,cAAaX,KAAK,UAApC,aAtBH,kC,GAhCaiL,IAAM5J,WCQ1BsK,GAAc,SAACzC,EAAQ1H,GAC3B,IAAMoK,EAAcpK,EAAMiK,QAAQ7E,IAElC,OAAI/H,KAAiBA,IAAcmC,WAAakI,EAE5C,yBAAKvI,UAAU,iBACb,uBAAGwB,QAAS,SAACC,GAAD,OAhBC,SAACA,EAAGwJ,GACvBxJ,EAAEC,iBAEF,IAAIwJ,EAAiBrM,SAASC,eAAemM,GAEzCC,GACFA,EAAetJ,UAAUC,OAAO,QAUTC,CAAaL,EAAGwJ,IAAcjL,UAAU,uCAC3D,yBAAKA,UAAU,cAAcE,GAAI+K,GAC/B,kBAAC,GAAD,CAAajC,QAASnI,EAAMmI,QAAS8B,QAASjK,EAAMiK,UACpD,kBAAC,GAAD,CAAepB,UAAW7I,EAAMiK,QAAQ7E,IAAK+C,QAASnI,EAAMmI,QAASjI,KAAMF,EAAMiK,QAAQvC,OAAOlI,aAK9F,+BAsCG8K,GAlCU,SAAAtK,GACrB,IAAMuK,EAAO,IAAIC,MAAMxK,EAAMiK,QAAQM,MAC/BE,EAAOF,EAAKG,cACZC,EAAQJ,EAAKK,WACbC,EAAMN,EAAKO,UACXpD,EAAS1H,EAAMiK,QAAQvC,OAAOlI,SAE9BuL,EAAM/K,EAAMiK,QAAQpC,QAAU7H,EAAMiK,QAAQ7C,KAAK4D,MAAM,KAAK,GAAGrJ,OAAS,EACxEN,EAAOrB,EAAMiK,QAAQpC,QAAU,IAAM7H,EAAMiK,QAAQ7C,KAAK4D,MAAM,KAAK,GAAK,GACxE5M,EAAO4B,EAAMiK,QAAQpC,QAAU,yBAAK1I,UAAU,2BAA0B,kBAAC,IAAD,CAAMC,GAAE,mBAAcY,EAAMiK,QAAQpC,UAAW,yBAAK1I,UAAU,sBAAsBkC,IAA7H,IAAgJ,yBAAKlC,UAAU,2BAA2Ba,EAAMiK,QAAQ7C,KAAK6D,MAAMF,KAAoB,6BAAM/K,EAAMiK,QAAQ7C,MAC1R9H,EAAaU,EAAMiK,QAAQvC,OAAOnI,MAAQS,EAAMiK,QAAQvC,OAAOnI,MAAQ,2CACvE8H,EAAMrH,EAAMiK,QAAQ5C,IAAM,yBAAK5H,IAAI,UAAUN,UAAU,oBAAoBtB,IAAKmC,EAAMiK,QAAQ5C,MAAU,KAG9G,OAEM,yBAAKlI,UAAU,uBACb,yBAAKA,UAAU,qBACb,yBAAKtB,IAAKyB,EAAYH,UAAU,gCAChC,yBAAKA,UAAU,sBAAsBa,EAAMiK,QAAQvC,OAAOlI,UAC5D,yBAAKL,UAAU,gBACb,yBAAKA,UAAU,sBAAsBsL,EAAO,IAAME,EAAQ,IAAME,GAC/DV,GAAYzC,EAAQ1H,KAGrB,yBAAKb,UAAU,sBAAsBf,GACpCiJ,EACH,yBAAKlI,UAAU,uBAAsB,kBAAC,GAAD,CAAoBgJ,QAASnI,EAAMmI,QAASP,SAAU5H,EAAM4H,SAAUC,QAAS7H,EAAMiK,QAAQvC,OAAOtC,IAAKlF,KAAMF,EAAMiK,QAAQvC,OAAOlI,cCzD7KzC,GAAe+C,EAAf/C,YAmCOmO,G,iLA/BH,IAAD,OACP,OAAO,kBAAC,IAAD,CAAO7K,MAAOtD,GAAaiJ,UAAW,CAAE3G,GAAIM,KAAKK,MAAMmI,WAC3D,YAA+B,IAA5B5D,EAA2B,EAA3BA,QAAS+C,EAAkB,EAAlBA,MAAOhH,EAAW,EAAXA,KAClB,GAAIiE,EAAS,OAAO,yCACpB,GAAI+C,EAAO,OAAO,oCAKnB,IAHA,IAEI2C,EAFE1B,EAAWjI,EAAK2H,MAAMM,SAGnBC,EAAI,EAAGA,EAAID,EAAS5G,OAAQ6G,IAC/B,EAAKxI,MAAM6I,YAAcN,EAASC,GAAGpD,MACtC6E,EAAU1B,EAASC,GAAGC,SAIzB,IAAMA,EAAUwB,EAAQ9E,KAAI,SAAAgG,GACzB,OAAO,6BACN,6BAAK,kBAAC,GAAD,CAAkBlB,QAASkB,EAAOhD,QAAS,EAAKnI,MAAMmI,QAASP,SAAU,EAAK5H,MAAM6I,YAAzF,SAIR,OACE,6BACCJ,U,GAzBwBgB,IAAM5J,WCA9B2G,GAAiBU,GAAjBV,cACAzJ,GAAgB+C,EAAhB/C,YA6IOqO,G,YA1Ib,WAAYpL,GAAQ,IAAD,8BACjB,4CAAMA,KAED0C,MAAQ,CACX0E,KAAM,GACNC,IAAK,GACLC,MAAO,IANQ,E,0EAUN1G,EAAGvB,GACVuB,GACJA,EAAEC,iBAEF,IAAI0G,EAAQvJ,SAASC,eAAeoB,GAEhCkI,GACFA,EAAMxG,UAAUC,OAAO,U,yCAIR3B,GACjB,IAAIkI,EAAQvJ,SAASC,eAAeoB,GAEhCkI,GAASA,EAAMxG,UAAU8C,SAAS,SACpC0D,EAAMxG,UAAUC,OAAO,U,6BAIpBwG,GAAQ,IAAD,OACZ,OAAO,SAAA5G,GACL,EAAKiC,SAAL,eAAiB2E,EAAQ5G,EAAE7B,OAAOuC,W,mCAIzBV,EAAGyK,GAAkB,IAAD,OAC/BzK,EAAEC,iBACF,IAAIuG,EAAOzH,KAAK+C,MAAM0E,KAClBC,EAAM1H,KAAK+C,MAAM2E,IAEG,KAApB1H,KAAK+C,MAAM0E,KAKfiE,EAAgB,CACdrF,UAAW,CACToB,KAAMA,EACNM,OAAQrK,IAAcgC,GACtBsI,gBAAiBhI,KAAKK,MAAM4H,SAC5BP,IAAKA,KAGNS,MAAK,SAAAxH,GACJ,EAAKuC,SAAS,CACZuE,KAAM,GACNC,IAAK,GACLC,MAAO,QAERQ,MAAK,SAAAxH,GACN,EAAKyH,mBAAmB,EAAK/H,MAAM4H,SAASzH,OAAO,eAnBrDR,KAAKkD,SAAS,CAAEyE,MAAO,iF,kCAuBfU,E,GAAuC,IAC7CC,EADuBoD,EAAqB,EAA7B/K,KAAQ+K,gBAE3B,IACEpD,EAAQD,EAAME,UAAU,CAAE7H,MAAOtD,GAAaiJ,UAAW,CAAE3G,GAAIM,KAAKK,MAAMmI,WAC1E,MAAOC,GACP,OAGF,GAAIH,EAAO,CAGT,IADA,IAAII,GADJJ,EAAQhD,OAAOqD,OAAO,GAAIL,EAAMA,QACNM,SACjBC,EAAI,EAAGA,EAAIH,EAAc1G,OAAQ6G,IACpC7I,KAAKK,MAAM4H,WAAaS,EAAcG,GAAGpD,KAC3CiD,EAAcG,GAAGC,QAAQC,KAAK2C,GAIlCrD,EAAMW,WAAW,CACftI,MAAOtD,GACPiJ,UAAW,CAAE3G,GAAIM,KAAKK,MAAMmI,SAC5B7H,KAAM,CAAE2H,MAAOA,Q,gCAKXZ,GACR1H,KAAKkD,SAAS,CAAEwE,IAAKA,EAAIuB,UAAUtD,Q,+BAG3B,IAOFgC,EAPC,OACDpH,EAAO7C,IACPwL,EAAYlJ,KAAKK,MAAM4H,SAASzH,OAAO,WAC7C,OAAKD,GAKsB,+EAArBP,KAAK+C,MAAM4E,QACbA,EAAQ,0BAGV,kBAAC,IAAD,CACEwB,QAAS,SAAAxB,GAAW,EAAKzE,SAAS,CAAEyE,MAAOA,EAAMyB,WACjDC,SAAUxC,GACVyC,OAAQ,SAACjB,EAAO1H,GAAR,OAAiB,EAAK4I,YAAYlB,EAAO1H,MAEhD,SAAC+K,EAAD,KAAoB/K,KAApB,OACC,6BACE,0BAAMnB,UAAU,gBAAgBgK,SAAU,SAAAvI,GAAC,OAAI,EAAKwI,aAAaxI,EAAGyK,KAClE,2BACE/J,MAAO,EAAKoB,MAAM0E,KAClB1H,SAAU,EAAKuJ,OAAO,QACtB7F,YAAW,UAAK/F,IAAcmC,SAAnB,iCACXL,UAAU,yBAEZ,6BAAMmI,GACN,yBAAKnI,UAAU,iBACf,yBAAKA,UAAU,mBACb,4BAAQA,UAAU,wBAAwBwB,QAAS,SAACC,GAAD,OAAO,EAAKK,aAAaL,EAAGiI,KAA/E,OACA,yBAAK1J,UAAU,gBAAgBE,GAAIwJ,GACjC,kBAAC,KAAD,CAAQxJ,GAAG,eAAegK,OAAO,mCAAmCC,WAAY,EAAKC,UAAUC,KAAK,OAGxG,4BAAQrK,UAAU,uBAAuBX,KAAK,UAA9C,gBA9BD,kC,GAlGoBiL,IAAM5J,WCJ/B9C,GAAgB+C,EAAhB/C,YACA4J,GAAmCO,GAAnCP,eAAgBD,GAAmBQ,GAAnBR,eA8FT4E,G,YA3Fb,WAAYtL,GAAQ,IAAD,8BACjB,4CAAMA,KAED2J,mBAAqB,EAAKA,mBAAmBH,KAAxB,iBAHT,E,0EAON5I,EAAGsJ,GACdtJ,EAAEC,iBAEFqJ,EAAc,CACZlE,UAAW,CACT3G,GAAIM,KAAKK,MAAM6I,UACfzB,KAAM,oB,yCAKOyC,GACjB,IAAIC,EAAU9L,SAASC,eAAe4L,GAElCC,GAAWA,EAAQ/I,UAAU8C,SAAS,SACxCiG,EAAQ/I,UAAUC,OAAO,U,oCAKfJ,EAAGgJ,GAAgB,IAAD,OAC9BhJ,EAAEC,iBAEF+I,EAAc,CACZ5D,UAAW,CACT3G,GAAIM,KAAKK,MAAM6I,aAEhBf,MAAK,kBAAM,EAAK6B,mBAAL,UAA2B,EAAK3J,MAAM6I,iB,+BAI5C,IAAD,OAGP,OAFaxL,IAIFsC,KAAKK,MAAME,OAAS7C,IAAcmC,UAAYG,KAAKK,MAAMiK,QAAQxB,QAAQ9G,OAAS,EAEzF,kBAAC,IAAD,CACEqH,SAAUrC,GACVoD,eAAgB,WACd,MAAO,CACL,CACE1J,MAAOtD,GAAaiJ,UAAW,CAAE3G,GAAI,EAAKW,MAAMmI,cAKrD,SAAC+B,EAAD,KAAkB5J,KAAlB,OACC,6BACE,0BAAMnB,UAAU,gBAAgBgK,SAAU,SAAAvI,GAAC,OAAI,EAAKwI,aAAaxI,EAAGsJ,KAClE,4BAAQ1L,KAAK,UAAb,eAMDmB,KAAKK,MAAME,OAAS7C,IAAcmC,SAEzC,kBAAC,IAAD,CACEwJ,SAAUtC,GACVqD,eAAgB,WACd,MAAO,CACL,CACE1J,MAAOtD,GAAaiJ,UAAW,CAAE3G,GAAI,EAAKW,MAAMmI,cAKrD,SAACyB,EAAD,KAAkBtJ,KAAlB,OACC,6BACE,0BAAMnB,UAAU,gBAAgBgK,SAAU,SAAAvI,GAAC,OAAI,EAAK2K,cAAc3K,EAAGgJ,KACnE,4BAAQpL,KAAK,UAAb,eAOH,8BA5CA,kC,GA3CmBiL,IAAM5J,WCShCsK,GAAc,SAACvC,EAAU5H,GAC7B,IAAMoK,EAAcpK,EAAMiK,QAAQ7E,IAElC,OAAI/H,KAAiBA,IAAcmC,WAAaoI,EAE5C,yBAAKzI,UAAU,iBACb,uBAAGwB,QAAS,SAACC,GAAD,OAhBC,SAACA,EAAGwJ,GACvBxJ,EAAEC,iBAEF,IAAIwJ,EAAiBrM,SAASC,eAAemM,GAEzCC,GACFA,EAAetJ,UAAUC,OAAO,QAUTC,CAAaL,EAAGwJ,IAAcjL,UAAU,uCAC3D,yBAAKA,UAAU,cAAcE,GAAI+K,GAC/B,kBAAC,GAAD,CAAajC,QAASnI,EAAMmI,QAAS8B,QAASjK,EAAMiK,UACpD,kBAAC,GAAD,CAAmBA,QAASjK,EAAMiK,QAASpB,UAAW7I,EAAMiK,QAAQ7E,IAAK+C,QAASnI,EAAMmI,QAASjI,KAAMF,EAAMiK,QAAQvC,OAAOlI,aAIxH,+BA+CCgM,GA3CU,SAAAxL,GACrB,IAAMuK,EAAO,IAAIC,MAAMxK,EAAMiK,QAAQM,MAC/BE,EAAOF,EAAKG,cACZC,EAAQJ,EAAKK,WACbC,EAAMN,EAAKO,UAEXxL,GADcU,EAAMiK,QAAQ7E,IACfpF,EAAMiK,QAAQvC,OAAOnI,MAAQS,EAAMiK,QAAQvC,OAAOnI,MAAO,4CACtE8H,EAAMrH,EAAMiK,QAAQ5C,IAAM,yBAAK5H,IAAKO,EAAMiK,QAAQ7C,KAAMjI,UAAU,mBAAmBtB,IAAKmC,EAAMiK,QAAQ5C,MAAS,KACjHK,EAAS1H,EAAMiK,QAAQvC,OAAOlI,SACxC,MAA2B,iBAAvBQ,EAAMiK,QAAQ7C,KAGR,yBAAKjI,UAAU,sBACd,yBAAKA,UAAU,oBACZ,yBAAKtB,IAAKyB,EAAYH,UAAU,0BAChC,yBAAKA,UAAU,qBAAqBa,EAAMiK,QAAQvC,OAAOlI,UACzD,yBAAKL,UAAU,gBACb,yBAAKA,UAAU,qBAAqBsL,EAAO,IAAME,EAAQ,IAAME,GAC9DV,GAAYzC,EAAQ1H,KAGzB,yBAAKb,UAAU,qBAAqBa,EAAMiK,QAAQ7C,MACjDC,EACD,yBAAKlI,UAAU,uBACb,kBAAC,GAAD,CAAoByI,SAAU5H,EAAMiK,QAAQ7E,IAAK+C,QAASnI,EAAMmI,WAGlE,yBAAKhJ,UAAU,uBACb,kBAAC,GAAD,CAAmB0J,UAAW7I,EAAMiK,QAAQ7E,IAAK+C,QAASnI,EAAMmI,YAOtE,6BACE,yBAAKhJ,UAAU,mBAAf,4BACA,yBAAKA,UAAU,uBAAsB,kBAAC,GAAD,CAAmB0J,UAAW7I,EAAMiK,QAAQ7E,IAAK+C,QAASnI,EAAMmI,aCnEvGpL,GAAgB+C,EAAhB/C,YAgCO0O,G,iLA3BF,IAAD,OAET,OAAO,kBAAC,IAAD,CAAOpL,MAAOtD,GAAaiJ,UAAW,CAAE3G,GAAIM,KAAKK,MAAMmI,WAC1D,YAA+B,IAA5B5D,EAA2B,EAA3BA,QAAS+C,EAAkB,EAAlBA,MAAOhH,EAAW,EAAXA,KAClB,GAAIiE,EAAS,OAAO,yCACpB,GAAI+C,EAAO,OAAO,oCAEnB,IAAMiB,EAAWjI,EAAK2H,MAAMM,SAASpD,KAAI,SAAC8E,GAExC,OAAO,6BACE,kBAAC,GAAD,CAAkBA,QAASA,EAAS9B,QAAS,EAAKnI,MAAMmI,cAQtE,OAAO,yBAAKhJ,UAAU,iBACXoJ,U,GAtBYkB,IAAM5J,WCAzB9C,GAAgB+C,EAAhB/C,YACA6J,GAAmBM,GAAnBN,eACAC,GAAsBK,GAAtBL,kBACAC,GAAsBI,GAAtBJ,kBACAC,GAAyBG,GAAzBH,qBAEF2E,G,YACJ,WAAY1L,GAAQ,IAAD,8BAEjB,4CAAMA,KAED0C,MAAQ,CACXrF,YAAaA,IACbsO,UAAU,GAEZ,EAAKA,SAAW,EAAKA,SAASnC,KAAd,iBARC,E,wEAWR5I,EAAGgL,GAAY,IAAD,OAEvBhL,EAAEC,iBAEF+K,EAAU,CACR5F,UAAW,CACTmC,QAASxI,KAAKK,MAAMmI,QACpB0D,OAAQlM,KAAK+C,MAAMrF,YAAYgC,MAGhCyI,MAAK,SAAAxH,GACJ,EAAKuC,SAAS,CAAE8I,UAAU,S,uCAIf/K,EAAGkL,GAAkB,IAAD,OAEnClL,EAAEC,iBAEFiL,EAAgB,CACd9F,UAAW,CACTmC,QAASxI,KAAKK,MAAMmI,QACpB0D,OAAQlM,KAAK+C,MAAMrF,YAAYgC,MAGhCyI,MAAK,SAAAxH,GACJ,EAAKuC,SAAS,CAAE8I,UAAU,S,oCAIlB/K,EAAGmL,GAAe,IAAD,OAE7BnL,EAAEC,iBAEFkL,EAAa,CACX/F,UAAW,CACTmC,QAASxI,KAAKK,MAAMmI,QACpB0D,OAAQlM,KAAK+C,MAAMrF,YAAYgC,MAGhCyI,MAAK,SAAAxH,GACJ,EAAKuC,SAAS,CAAEmJ,aAAa,S,0CAIfpL,EAAGqL,GAAqB,IAAD,OAEzCrL,EAAEC,iBAEFoL,EAAmB,CACjBjG,UAAW,CACTmC,QAASxI,KAAKK,MAAMmI,QACpB0D,OAAQlM,KAAK+C,MAAMrF,YAAYgC,MAGhCyI,MAAK,SAAAxH,GACJ,EAAKuC,SAAS,CAAEmJ,aAAa,S,kCAIvBhE,EAAO1H,GAEjB,IAII2H,EAJEiE,EAAe5L,EAAKA,KAAK4L,aACzBC,EAAkB7L,EAAKA,KAAK6L,gBAC5BC,EAAkB9L,EAAKA,KAAK8L,gBAC5BC,EAAqB/L,EAAKA,KAAK+L,mBAErC,IACEpE,EAAQD,EAAME,UAAU,CAAE7H,MAAOtD,GAAaiJ,UAAW,CAAE3G,GAAIM,KAAKK,MAAMmI,WAC1E,MAAOC,GACP,OAGF,GAAIH,GAASiE,EAAc,CAIzB,IAFA,IAAII,EAAYrE,EAAMA,MAAMsE,MACxBC,EAAevE,EAAMA,MAAMwE,SACtBjE,EAAI,EAAGA,EAAIgE,EAAa7K,OAAQ6G,IAAK,CACjCgE,EAAahE,GACjBpD,MAAQ8G,EAAa9G,KAC1BoH,EAAaE,OAAOlE,EAAG,GAG3BP,EAAQhD,OAAOqD,OAAO,GAAIL,EAAMA,MAAO,CAAEsE,MAAOD,EAAUnM,OAAO+L,GAAeO,SAAUD,IAC1FxE,EAAMW,WAAW,CACftI,MAAOtD,GACPiJ,UAAW,CAAE3G,GAAIM,KAAKK,MAAMmI,SAC5B7H,KAAM,CAAE2H,MAAOA,UAEZ,GAAIA,GAASkE,EAAiB,CAEnC,IADA,IAAIG,EAAYrE,EAAMA,MAAMsE,MACnB/D,EAAI,EAAGA,EAAI8D,EAAU3K,OAAQ6G,IAAK,CAC9B8D,EAAU9D,GACdpD,MAAQ+G,EAAgB/G,KAC7BkH,EAAUI,OAAOlE,EAAG,GAIxBP,EAAQhD,OAAOqD,OAAO,GAAIL,EAAMA,MAAO,CAAEsE,MAAOD,IAEhDtE,EAAMW,WAAW,CACftI,MAAOtD,GACPiJ,UAAW,CAAE3G,GAAIM,KAAKK,MAAMmI,SAC5B7H,KAAM,CAAE2H,MAAOA,UAEZ,GAAIA,GAASmE,EAAiB,CAInC,IAFA,IAAII,EAAevE,EAAMA,MAAMwE,SAC3BH,EAAYrE,EAAMA,MAAMsE,MACnB/D,EAAI,EAAGA,EAAI8D,EAAU3K,OAAQ6G,IAAK,CAC9B8D,EAAU9D,GACdpD,MAAQgH,EAAgBhH,KAC7BkH,EAAUI,OAAOlE,EAAG,GAGxBP,EAAQhD,OAAOqD,OAAO,GAAIL,EAAMA,MAAO,CAAEsE,MAAOD,EAAWG,SAAUD,EAAarM,OAAOiM,KACzFpE,EAAMW,WAAW,CACftI,MAAOtD,GACPiJ,UAAW,CAAE3G,GAAIM,KAAKK,MAAMmI,SAC5B7H,KAAM,CAAE2H,MAAOA,UAEZ,GAAIA,GAASoE,EAAoB,CAEtC,IADA,IAAIG,EAAevE,EAAMA,MAAMwE,SACtBjE,EAAI,EAAGA,EAAIgE,EAAa7K,OAAQ6G,IAAK,CACjCgE,EAAahE,GACjBpD,MAAQiH,EAAmBjH,KAChCoH,EAAaE,OAAOlE,EAAG,GAI3BP,EAAQhD,OAAOqD,OAAO,GAAIL,EAAMA,MAAO,CAAEwE,SAAUD,IAEnDxE,EAAMW,WAAW,CACftI,MAAOtD,GACPiJ,UAAW,CAAE3G,GAAIM,KAAKK,MAAMmI,SAC5B7H,KAAM,CAAE2H,MAAOA,KAGnBtI,KAAKgM,a,qCAIL,IAAIgB,EAAYhN,KAAKK,MAAMuM,MAAM5K,OAEjC,OAAkB,IAAdgL,EACK,uCACgB,IAAdA,EACF,qCAEA,2BAAIA,EAAJ,Y,wCAKT,IAAIC,EAAejN,KAAKK,MAAMyM,SAAS9K,OAEvC,OAAqB,IAAjBiL,EACK,0CACmB,IAAjBA,EACF,wCAEA,2BAAIA,EAAJ,e,mCAKEhM,GACXA,EAAEC,iBACF,IAAIgM,EAAQ7O,SAASC,eAAe,WAEhC4O,GACFA,EAAM9L,UAAUC,OAAO,U,iCAIf,IAgBN8L,EAUAC,EA1BK,OACHN,EAAW9M,KAAKK,MAAMyM,SACtBF,EAAQ5M,KAAKK,MAAMuM,MAEzB,IADalP,IAEX,OACE,yBAAK8B,UAAU,YACf,yBAAKA,UAAU,qBAAqBwB,QAAS,SAACC,GAAD,OAAO,EAAKK,aAAaL,KAAI,uBAAGzB,UAAU,mCAAsCQ,KAAKqN,eAC9H,yBAAK7N,UAAU,mBAAkB,uBAAGA,UAAU,qCAAwCQ,KAAKsN,mBAC7F,yBAAKC,MAAM,YAAY7N,GAAG,WAAU,kBAAC,IAAD,CAAMF,UAAU,eAAeC,GAAG,UAAlC,eAQ1C,IAAK,IAAIoJ,EAAI,EAAGA,EAAI+D,EAAM5K,OAAQ6G,IAAK,CACrC,GAAI+D,EAAM/D,GAAGpD,MAAQzF,KAAK+C,MAAMrF,YAAYgC,GAAI,CAC9CyN,GAAQ,EACR,MAEAA,GAAQ,EAKZ,IAAK,IAAItE,EAAI,EAAGA,EAAIiE,EAAS9K,OAAQ6G,IAAK,CACxC,GAAIiE,EAASjE,GAAGpD,MAAQzF,KAAK+C,MAAMrF,YAAYgC,GAAI,CACjD0N,GAAW,EACX,MAEAA,GAAW,EAIf,OAAKD,GAAUC,EAkCJD,IAAUC,EACX,yBAAK5N,UAAU,YACrB,kBAAC,IAAD,CACE6J,SAAUnC,GACVoC,OAAQ,SAACjB,EAAO1H,GAAR,OAAiB,EAAK4I,YAAYlB,EAAO1H,MAEhD,SAACwL,EAAD,GAA+B,EAAXxL,KACnB,OACE,6BACE,0BAAMnB,UAAU,eAAegK,SAAU,SAACvI,GAAD,OAAO,EAAKuM,iBAAiBvM,EAAGkL,KACvE,4BAAQtN,KAAK,UAAS,uBAAGW,UAAU,kCAClC,EAAK6N,oBAMhB,kBAAC,IAAD,CACEhE,SAAUlC,GACVmC,OAAQ,SAACjB,EAAO1H,GAAR,OAAiB,EAAK4I,YAAYlB,EAAO1H,MAEhD,SAACyL,EAAD,GAA4B,EAAXzL,KAChB,OACE,6BACE,0BAAMnB,UAAU,kBAAkBgK,SAAU,SAACvI,GAAD,OAAO,EAAKwM,cAAcxM,EAAGmL,KACvE,4BAAQvN,KAAK,UAAS,uBAAG0O,MAAM,sCAC9B,EAAKD,yBAORH,GAASC,EACX,yBAAK5N,UAAU,YACrB,kBAAC,IAAD,CACE6J,SAAUpC,GACVqC,OAAQ,SAACjB,EAAO1H,GAAR,OAAiB,EAAK4I,YAAYlB,EAAO1H,MAEhD,SAACsL,EAAD,GAAyB,EAAXtL,KACb,OACE,6BACE,0BAAMnB,UAAU,eAAegK,SAAU,SAACvI,GAAD,OAAO,EAAKyM,WAAWzM,EAAGgL,KACjE,4BAAQpN,KAAK,UAAS,uBAAG0O,MAAM,oCAC9B,EAAKF,oBAMhB,kBAAC,IAAD,CACEhE,SAAUjC,GACVkC,OAAQ,SAACjB,EAAO1H,GAAR,OAAiB,EAAK4I,YAAYlB,EAAO1H,MAEhD,SAAC2L,EAAD,GAAkC,EAAX3L,KACtB,OACE,6BACE,0BAAMnB,UAAU,kBAAkBgK,SAAU,SAACvI,GAAD,OAAO,EAAK0M,oBAAoB1M,EAAGqL,KAC7E,4BAAQzN,KAAK,UAAS,uBAAGW,UAAU,oCAClC,EAAK8N,6BA1Bb,EAjEL,yBAAK9N,UAAU,YACb,kBAAC,IAAD,CACE6J,SAAUpC,GACVqC,OAAQ,SAACjB,EAAO1H,GAAR,OAAiB,EAAK4I,YAAYlB,EAAO1H,MAEhD,SAACsL,EAAD,GAAyB,EAAXtL,KACb,OACE,6BACE,0BAAMnB,UAAU,eAAegK,SAAU,SAACvI,GAAD,OAAO,EAAKyM,WAAWzM,EAAGgL,KACjE,4BAAQpN,KAAK,UAAS,uBAAG0O,MAAM,oCAC9B,EAAKF,oBAMhB,kBAAC,IAAD,CACIhE,SAAUlC,GACVmC,OAAQ,SAACjB,EAAO1H,GAAR,OAAiB,EAAK4I,YAAYlB,EAAO1H,MAEhD,SAACyL,EAAD,GAA4B,EAAXzL,KAChB,OACE,6BACE,0BAAMnB,UAAU,kBAAkBgK,SAAU,SAACvI,GAAD,OAAO,EAAKwM,cAAcxM,EAAGmL,KACvE,4BAAQvN,KAAK,UAAS,uBAAG0O,MAAM,sCAC9B,EAAKD,0B,+BA8EtB,OACE,6BACGtN,KAAKgM,gB,GA1UYlC,IAAM5J,WAgVjB0N,eAAQxQ,GAARwQ,CAAqB7B,ICxV5B3O,GAAgB+C,EAAhB/C,YAgCOyQ,G,YA7Bb,WAAYxN,GAAQ,IAAD,8BACjB,4CAAMA,KAED0C,MAAQ,CACXrF,YAAaA,IACbsO,UAAU,GALK,E,sEAWT,IAAD,OAEP,OAAO,kBAAC,IAAD,CAAOtL,MAAOtD,GAAaiJ,UAAW,CAAE3G,GAAIM,KAAKK,MAAMmI,WAC3D,YAA+B,IAA5B5D,EAA2B,EAA3BA,QAAS+C,EAAkB,EAAlBA,MAAOhH,EAAW,EAAXA,KAClB,GAAIiE,EAAS,OAAO,yCACpB,GAAI+C,EAAO,OAAO,oCAClB,IAAMiF,EAAQjM,EAAK2H,MAAMsE,MACnBE,EAAWnM,EAAK2H,MAAMwE,SAC5B,OACA,yBAAKtN,UAAU,YACb,kBAAC,GAAD,CAAaoN,MAAOA,EAAOE,SAAUA,EAAUtE,QAAS,EAAKnI,MAAMmI,kB,GAtBrDsB,IAAM5J,WCHtB5C,GAAiB6C,EAAjB7C,aAEFwQ,G,uLAIF,OAFgB9N,KAAKK,MAAMM,KAAK8D,OAAO6G,MAAOtL,KAAKK,MAAMM,KAAK8D,OAAOzC,OAAU,GAE9DwD,KAAI,YACM,IAAvBC,EAAsB,EAAtBA,IAAKC,EAAiB,EAAjBA,MAAOC,EAAU,EAAVA,IACd,OACE,yBAAK/C,IAAK6C,EAAKjG,UAAU,wBACvB,yBAAKA,UAAU,mBACb,4BAAQA,UAAU,qBAChB,2BAAOkC,KAAK,QAAQC,MAAK,UAAKgE,EAAL,6DACzB,2BAAOjE,KAAK,kBAAkBC,MAAM,SACpC,2BAAOD,KAAK,oBAAoBC,MAAM,WACtC,2BAAOzD,IAAG,UAAKyH,EAAL,+DACR9G,KAAK,gCACLW,UAAU,eAAeoG,kBAAkB,SAASC,iBAAiB,MAG3E,yBAAKrG,UAAU,mBACb,kBAAC,IAAD,CAAMC,GAAE,kBAAagG,IACnB,uBAAGjG,UAAU,8BACVkG,W,+BAUb,OAAI1F,KAAKK,MAAMM,KAAKiE,UAAY5E,KAAKK,MAAMM,KAAK8D,OACvC,KAGP,6BACE,yBAAKjF,UAAU,kBACb,yBAAKA,UAAU,aACb,6BAASA,UAAU,QACjB,uBAAGA,UAAU,oBAAb,kBACA,yBAAKA,UAAU,OACZQ,KAAK+F,wB,GAzCE7F,aAoDT0N,eAAQtQ,GAAc,CACnC6M,QAAS,SAAC9J,GAAY,MAAO,CAAEgG,UAAW,CAAEC,cAAUC,EAAWlB,QAAS,EAAGV,WAAY,MAD5EiJ,CAEZE,ICnDK1Q,GAAgB+C,EAAhB/C,YACDwJ,GAAiBW,GAAjBX,cAEDmH,G,YACJ,WAAY1N,GAAQ,IAAD,8BACjB,4CAAMA,KAED0C,MAAQ,CACX0E,KAAM,GACNC,IAAK,GACLC,MAAO,IANQ,E,0EAWN1G,GACPA,GACFA,EAAEC,iBAEJ,IAAI0G,EAAQvJ,SAASC,eAAe,WAEhCsJ,GACFA,EAAMxG,UAAUC,OAAO,U,2CAKzB,IAAIuG,EAAQvJ,SAASC,eAAe,WAEhCsJ,GAASA,EAAMxG,UAAU8C,SAAS,SACpC0D,EAAMxG,UAAUC,OAAO,U,6BAIpBwG,GAAQ,IAAD,OACZ,OAAO,SAAA5G,GACL,EAAKiC,SAAL,eAAiB2E,EAAQ5G,EAAE7B,OAAOuC,W,mCAIzBV,EAAG+M,GAAkB,IAAD,OAC/B/M,EAAEC,iBACF,IAAIuG,EAAOzH,KAAK+C,MAAM0E,KAClBC,EAAM1H,KAAK+C,MAAM2E,IAEG,KAApB1H,KAAK+C,MAAM0E,KAKfuG,EAAgB,CACd3H,UAAW,CACToB,KAAMA,EACNM,OAAQrK,IAAcgC,GACtB8I,QAASxI,KAAKK,MAAMmI,QACpBd,IAAKA,KAGNS,MAAK,SAAAxH,GACJ,EAAKuC,SAAS,CACZuE,KAAM,GACNC,IAAK,GACLC,MAAO,QAGRQ,MAAK,SAAAxH,GACF+G,GACF,EAAKsC,wBArBThK,KAAKkD,SAAS,CAAEyE,MAAO,iF,kCA0BfU,E,GAAuC,IAC7CC,EADuB0F,EAAqB,EAA7BrN,KAAQqN,gBAE3B,IACE1F,EAAQD,EAAME,UAAU,CAAE7H,MAAOtD,GAAaiJ,UAAW,CAAC3G,GAAIM,KAAKK,MAAMmI,WACzE,MAAOC,GACP,OAGF,GAAIH,EAAO,CAET,IAAI2F,EAAe3F,EAAMA,MAAMM,SAC/BN,EAAQhD,OAAOqD,OAAO,GAAIL,EAAMA,MAAO,CAACM,SAAUqF,EAAazN,OAAOwN,KAEtE3F,EAAMW,WAAW,CACftI,MAAOtD,GACPiJ,UAAW,CAAC3G,GAAIM,KAAKK,MAAMmI,SAC3B7H,KAAM,CAAE2H,MAAOA,Q,gCAKVZ,GACT1H,KAAKkD,SAAS,CAAEwE,IAAKA,EAAIuB,UAAUtD,Q,+BAG3B,IAcFgC,EAdC,OACDpH,EAAO7C,IACPiC,EAAaY,GAAQA,EAAKX,MAAQW,EAAKX,MAAQ,2CAErD,OAAKW,GAWsB,+EAArBP,KAAK+C,MAAM4E,QACbA,EAAQ,0BAGV,kBAAC,IAAD,CACEwB,QAAS,SAAAxB,GAAW,EAAKzE,SAAS,CAACyE,MAAOA,EAAMyB,WAChDC,SAAUzC,GACV0C,OAAQ,SAACjB,EAAO1H,GAAR,OAAiB,EAAK4I,YAAYlB,EAAO1H,MAEhD,SAACqN,EAAD,KAAoBrN,KAApB,OACC,yBAAKnB,UAAU,eACb,yBAAKA,UAAU,2BACb,yBAAKtB,IAAKyB,EAAYH,UAAU,0BAC/B,0BAAMA,UAAU,sBAAsBgK,SAAU,SAAAvI,GAAC,OAAI,EAAKwI,aAAaxI,EAAG+M,KAC1E,2BACGnP,KAAK,YACLW,UAAU,uBACVmC,MAAO,EAAKoB,MAAM0E,KAClB1H,SAAU,EAAKuJ,OAAO,QACtB7F,YAAW,iCAA4B/F,IAAcmC,YAExD,6BAAM8H,GACN,yBAAKnI,UAAU,0BACb,yBAAKA,UAAU,uBACV,yBAAKA,UAAU,aACb,4BAAQA,UAAU,wBAAwBwB,QAAS,SAACC,GAAD,OAAO,EAAKK,aAAaL,KAA5E,OACA,yBAAKzB,UAAU,UAAUE,GAAG,WAE1B,kBAAC,KAAD,CAAQA,GAAG,eAAegK,OAAO,mCAAmCC,WAAY,EAAKC,UAAUC,KAAK,OAG3G,4BAAQrK,UAAU,wBAAwBX,KAAK,UAA/C,oBAzCN,yBAAKW,UAAU,iBACtB,yBAAKtB,IAAKyB,EAAYH,UAAU,0BAChC,2BACEA,UAAU,uBACVmC,MAAO3B,KAAK+C,MAAM0E,KAClBhE,YAAY,sC,GAxGQqG,IAAM5J,WA0JnBgO,eAAWH,IChKlB1G,GAA4CE,GAA5CF,iBAAkBC,GAA0BC,GAA1BD,sBAClBlK,GAA4C+Q,EAA5C/Q,YAAaK,GAA+B0Q,EAA/B1Q,2BAiFN2Q,G,gMA9EWnN,EAAGoN,GACzBpN,EAAEC,iBACFmN,EAAK,CACHhI,UAAW,CACTmC,QAASxI,KAAKK,MAAMiI,MAAM7C,IAC1ByG,OAAQxO,IAAcgC,Q,mCAKfuB,GACXA,EAAEC,iBACF,IAAIgM,EAAQ7O,SAASC,eAAe,YAChC4O,GACFA,EAAM9L,UAAUC,OAAO,U,uCAIT,IAAD,OACf,OAAK3D,KAAkBA,IAAcgC,GAQlC,kBAAC,IAAD,CAAU2J,SAAUhC,GAAkB+C,eAAgB,WACrD,MAAO,CAAC,CAAE1J,MAAOtD,GAAaiJ,UAAW,CAAE3G,GAAI,EAAKW,MAAMiI,MAAM7C,MAAS,CAAE/E,MAAOjD,GAA4B4I,UAAW,CAAE3G,GAAIhC,IAAcgC,SAE5I,SAAC4O,EAAD,GAAgD,IAA7B1J,EAA4B,EAA5BA,QAAS+C,EAAmB,EAAnBA,MAAmB,EAAZhH,KAClC,OAAIiE,EAAgB,uBAAG2I,MAAM,mBAC1B5F,EAAa,wDAEd,uBAAGnI,UAAU,eAAeS,MAAO,CAACsO,OAAQ,WAC5CvN,QAAS,SAACC,GAAD,OAAO,EAAKuN,wBAAwBvN,EAAGqN,SAdpD,yBAAK9O,UAAU,SAASwB,QAAS,SAACC,GAAD,OAAO,EAAKK,aAAaL,KAAI,uBAAGzB,UAAU,qBACzE,yBAAKA,UAAU,aAAaE,GAAG,YAAW,kBAAC,IAAD,CAAMF,UAAU,eAAeC,GAAG,UAAlC,gB,yCAoB9B,IAAD,OACjB,OACG,kBAAC,IAAD,CAAU4J,SAAU/B,GAAuB8C,eAAgB,WACxD,MAAO,CAAC,CAAE1J,MAAOtD,GAAaiJ,UAAW,CAAE3G,GAAI,EAAKW,MAAMiI,MAAM7C,UAEjE,SAACgJ,EAAD,GAAqD,IAA7B7J,EAA4B,EAA5BA,QAAS+C,EAAmB,EAAnBA,MAAmB,EAAZhH,KACvC,OAAIiE,EAAgB,uBAAG2I,MAAM,mBACzB5F,EAAc,wDAEhB,uBAAGnI,UAAU,yBAAyBS,MAAO,CAACsO,OAAO,WACnDvN,QAAS,SAACC,GAAD,OAAO,EAAKuN,wBAAwBvN,EAAGwN,W,+BAS1D,IAAIC,EAAkB,GACtB,GAAIhR,KAAiBA,IAAcgC,GAAI,CACrC,IAAIwM,EAASxO,IAAcgC,GAC3BgP,EAAkB1O,KAAKK,MAAMiI,MAAMqG,WAAWzM,QAAO,SAAA3B,GAAI,OAAIA,EAAKkF,IAAImJ,aAAe1C,KAEvF,OACE,oCAC8B,IAA3BwC,EAAgB1M,OACdhC,KAAK6O,iBAEJ7O,KAAK8O,wB,GAzEM5O,aCKjB3C,GAAqB4C,EAArB5C,kBACCH,GAAe+C,EAAf/C,YAGD2R,G,4LAEiB,IAAD,EAC6C/O,KAAKK,MAAMM,KAAK2H,MAAvE7C,EADU,EACVA,IAAKC,EADK,EACLA,MAAOC,EADF,EACEA,IAAKqJ,EADP,EACOA,YAAapG,EADpB,EACoBA,SAAU+F,EAD9B,EAC8BA,WAChD,OACE,yBAAK/L,IAAK6C,GACR,yBAAKjG,UAAU,qBACb,yBAAKA,UAAU,mBACb,4BAAQA,UAAU,uBAChB,2BAAOkC,KAAK,QAAQC,MAAK,UAAKgE,EAAL,6DACzB,2BAAOjE,KAAK,kBAAkBC,MAAM,SACpC,2BAAOD,KAAK,oBAAoBC,MAAM,WACtC,2BAAOzD,IAAG,UAAKyH,EAAL,+DACR9G,KAAK,gCACLW,UAAU,eAAeoG,kBAAkB,SAASC,iBAAiB,KAEzE,yBAAKrG,UAAU,sBACb,4BAAKkG,IAEP,yBAAKlG,UAAU,qBACb,yBAAKA,UAAU,wBACf,2BAAIoJ,EAAS5G,OAAb,IAAqB,uBAAGuL,MAAM,qBAC9B,uBAAG/N,UAAU,oBAAoBmP,EAAW3M,OAA5C,IAAoD,kBAAC,GAAD,CAAUsG,MAAOtI,KAAKK,MAAMM,KAAK2H,UAEvF,yBAAK9I,UAAU,cACX,kBAAC,GAAD,CAAWgJ,QAASxI,KAAKK,MAAMM,KAAK2H,MAAM7C,IAAK6C,MAAOtI,KAAKK,MAAMM,KAAK2H,UAG1E,yBAAK9I,UAAU,4BACb,uBAAGA,UAAU,0BAA0BwP,IAEvC,wBAAIxP,UAAU,kBAAd,YACA,yBAAKA,UAAU,iBACb,kBAAC,GAAD,CAAegJ,QAASxI,KAAKK,MAAMM,KAAK2H,MAAM7C,OAEhD,yBAAKjG,UAAU,gBACb,kBAAC,GAAD,CAAcgJ,QAASxI,KAAKK,MAAMM,KAAK2H,MAAM7C,QAGnD,kBAAC,GAAD,CAAWjG,UAAU,mB,kCAMjB6I,E,GAA+B,IAErCuE,EAFuBqC,EAAa,EAArBtO,KAAQsO,QAG3B,IACErC,EAAQvE,EAAME,UAAU,CAAE7H,MAAOnD,GAAmB8I,UAAW,CAAE3G,GAAIM,KAAKK,MAAMM,KAAK2H,MAAM7C,OAC3F,MAAOgD,GACP,OAEF,GAAImE,EAAO,CACT,IAAIsC,EAAatC,EAAMA,MACvBvE,EAAMW,WAAW,CACftI,MAAOnD,GACPoD,KAAM,CAAEiM,MAAOsC,EAAW1O,OAAOyO,S,+BAMrC,OAAIjP,KAAKK,MAAMM,KAAKiE,UAAY5E,KAAKK,MAAMM,KAAK2H,MACvC,KAIP,6BACE,kBAAC,EAAD,MACA,yBAAK9I,UAAU,aACb,yBAAKA,UAAU,aACX,kBAAC,EAAD,MACA,kBAAC,EAAD,MACH,6BAASA,UAAU,eAChB,yBAAKA,UAAU,OAAOQ,KAAKmP,6B,GA3EfrF,IAAM5J,WAsFjB0N,eAAQxQ,GAAa,CAClC+M,QAAS,SAAC9J,GAAY,MAAO,CAAEgG,UAAW,CAAE3G,GAAIW,EAAM+O,MAAMC,OAAO3P,OADtDkO,CAEZmB,ICpGIrI,GAAiBa,GAAjBb,cAsIQ4I,G,YAnIb,WAAYjP,GAAQ,IAAD,8BACjB,4CAAMA,KAqBRkP,YAAc,SAACtO,GACb,GAA8B,IAA1BA,EAAE7B,OAAOoQ,MAAMxN,OAAnB,CAGA,IAAIyN,EAAOxO,EAAE7B,OAAOoQ,MAAM,GACtBE,EAAS,IAAIC,WACjBD,EAAOE,UAAY,SAAC3O,GAClB,EAAKiC,SAAS,CAACtD,MAAO8P,EAAOG,UAE/BH,EAAOI,cAAcL,KA7BrB,EAAK1M,MAAQ,CACXlD,SAAU,GACViB,MAAO,GACPiP,SAAU,GACVC,UAAW,GACXpQ,MAAO,2CACP+H,MAAO,IARQ,E,oEAYZE,GAAQ,IAAD,OACZ,OAAO,SAAA5G,GAAC,OAAI,EAAKiC,SAAL,eAAiB2E,EAAQ5G,EAAE7B,OAAOuC,W,kCAGpClB,E,GAAmB,IAATE,EAAQ,EAARA,KACpBF,EAAOe,UAAU,CACfb,KAAM,CAAEC,WAAYD,EAAKsP,SAASC,c,+BAgB5B,IAIJvI,EAJG,OAEHzJ,EAA6B,SAAvBL,aAAasB,MAAmBpB,OAAOI,UAAYJ,OAAOK,WAepE,MAZyB,kCAArB4B,KAAK+C,MAAM4E,MACbA,EAAQ,gCACsB,oCAArB3H,KAAK+C,MAAM4E,MACpBA,EAAQ,gBACsB,4CAArB3H,KAAK+C,MAAM4E,MACpBA,EAAQ,sBACsB,gDAArB3H,KAAK+C,MAAM4E,MACpBA,EAAQ,0BACsB,0CAArB3H,KAAK+C,MAAM4E,QACpBA,EAAQ,0BAIR,kBAAC,IAAD,CACEwB,QAAS,SAAAxB,GAAY,EAAKzE,SAAS,CAAEyE,MAAOA,EAAMyB,WAClDC,SAAU3C,GACVyJ,YAAa,SAAAxP,GAAS,IAAD,EAC4BA,EAAKsP,SAA5CG,EADW,EACXA,MAAO3K,EADI,EACJA,IAAK5F,EADD,EACCA,SAAUD,EADX,EACWA,MAAOkB,EADlB,EACkBA,MACrCjD,aAAayB,QAAQ,aAAc8Q,GACnCvS,aAAayB,QAAQ,OAAQ3B,KAAK0S,UAAU,CAAE3Q,GAAI+F,EAAK5F,WAAUD,QAAOkB,YAE1EwI,OAAQ,SAAC7I,EAAQE,GAAT,OAAkB,EAAK4I,YAAY9I,EAAQE,MAElD,SAAA2P,GAAY,OACX,yBAAK9Q,UAAU,qBACX,0BACEA,UAAU,eACVgK,SAAU,SAAAvI,GACRA,EAAEC,iBAC0B,KAAxB,EAAK6B,MAAMgN,UAA2C,KAAxB,EAAKhN,MAAMlD,UAAwC,KAArB,EAAKkD,MAAMjC,OAAyC,KAAzB,EAAKiC,MAAMiN,UAItGM,EAAa,CACXjK,UAAW,CACTxG,SAAU,EAAKkD,MAAMlD,SACrBiB,MAAO,EAAKiC,MAAMjC,MAClBiP,SAAU,EAAKhN,MAAMgN,SACrBC,UAAW,EAAKjN,MAAMiN,UACtBpQ,MAAO,EAAKmD,MAAMnD,SATpB,EAAKsD,SAAS,CAAEyE,MAAO,oCAc3B,kBAAC,IAAD,CAAMlI,GAAG,KAAI,yBAAKD,UAAU,cAActB,IAAKA,EAAK4B,IAAI,YACxD,uBAAGN,UAAU,cAAb,+BACA,6BAAMmI,GACN,2BACEhG,MAAO,EAAKoB,MAAMlD,SAClBE,SAAU,EAAKuJ,OAAO,YACtB7F,YAAY,WACZjE,UAAU,oBAEZ,2BACEmC,MAAO,EAAKoB,MAAMjC,MAClBf,SAAU,EAAKuJ,OAAO,SACtB7F,YAAY,QACZjE,UAAU,iBAEZ,2BACEmC,MAAO,EAAKoB,MAAMgN,SAClBhQ,SAAU,EAAKuJ,OAAO,YACtBzK,KAAK,WACL4E,YAAY,WACZjE,UAAU,oBAEZ,2BACEmC,MAAO,EAAKoB,MAAMiN,UAClBjQ,SAAU,EAAKuJ,OAAO,aACtBzK,KAAK,WACL4E,YAAY,UACZjE,UAAU,qBAEd,2BAAOX,KAAK,OAAOkB,SAAU,EAAKwP,YAAa/P,UAAU,qBAEvD,yBAAKA,UAAU,iBACb,kBAAC,IAAD,CAAMC,GAAG,SAASD,UAAU,cAA5B,mBACA,4BAAQX,KAAK,SAASW,UAAU,iBAAhC,aAGJ,yBAAKA,UAAU,cACf,yBAAKtB,IAAK,EAAK6E,MAAMnD,MAAOJ,UAAU,kBACpC,yBAAKtB,IAAI,oCAAoC4B,IAAI,WACjD,uBAAGN,UAAU,mBAAb,gC,GA3HOU,aCHfuG,GAAec,GAAfd,WA0IO8J,G,YAvIb,WAAYlQ,GAAQ,IAAD,8BACjB,4CAAMA,KAED0C,MAAQ,CACXyN,gBAAiB,GACjBT,SAAU,GACVpI,MAAO,IAGT,EAAK8I,iBAAmB,EAAKA,iBAAiB5G,KAAtB,iBATP,E,oEAYZhC,GAAQ,IAAD,OACZ,OAAO,SAAA5G,GAAC,OAAI,EAAKiC,SAAL,eAAiB2E,EAAQ5G,EAAE7B,OAAOuC,W,iCAGrC+O,EAAUC,GAAY,IAAD,OACxBC,EAAO5Q,KACT6Q,EAAQ,EACNC,EAAiBC,aAAY,WAC7BF,EAAQH,EAASF,gBAAgBxO,QACnC4O,EAAK1N,SAAS,CACZsN,gBAAiB,EAAKzN,MAAMyN,gBAAkBE,EAASF,gBAAgBK,KAGvEA,EAAQH,EAASX,SAAS/N,QAC5B4O,EAAK1N,SAAS,CACZ6M,SAAU,EAAKhN,MAAMgN,SAAWW,EAASX,SAASc,OAGtDA,EACYH,EAASX,SAAS/N,QAAU6O,EAAQH,EAASF,gBAAgBxO,SACvEgP,cAAcF,GACdH,EAAU,CAAEtK,UAAWqK,IAAYvI,MAAK,kBAAM,EAAK9H,MAAM4Q,QAAQlI,KAAK,WAEvE,O,uCAGY9H,EAAG0P,GAClB1P,EAAEC,iBAEFlB,KAAKkR,WADY,CAAEV,gBAAiB,YAAaT,SAAU,YACjCY,K,kCAIhBlQ,E,GAAmB,IAATE,EAAQ,EAARA,KACpBF,EAAOe,UAAU,CACfb,KAAM,CAAEC,WAAYD,EAAKwQ,MAAMjB,c,+BAIzB,IAIJvI,EAJG,OAEHzJ,EAA6B,SAAvBL,aAAasB,MAAmBpB,OAAOI,UAAYJ,OAAOK,WAapE,MAVyB,sCAArB4B,KAAK+C,MAAM4E,MACbA,EAAQ,oCACsB,yBAArB3H,KAAK+C,MAAM4E,MACpBA,EAAQ,uBACsB,yBAArB3H,KAAK+C,MAAM4E,MACpBA,EAAQ,uBACsB,gDAArB3H,KAAK+C,MAAM4E,QACpBA,EAAQ,gCAIR,kBAAC,IAAD,CACEwB,QAAS,SAAAxB,GAAW,EAAKzE,SAAS,CAAEyE,MAAOA,EAAMyB,WACjDC,SAAU5C,GACV0J,YAAa,SAAAxP,GAAS,IAAD,EAC4BA,EAAKwQ,MAA5Cf,EADW,EACXA,MAAO3K,EADI,EACJA,IAAK5F,EADD,EACCA,SAAUD,EADX,EACWA,MAAOkB,EADlB,EACkBA,MACrCjD,aAAayB,QAAQ,aAAc8Q,GACnCvS,aAAayB,QAAQ,OAAQ3B,KAAK0S,UAAU,CAAC3Q,GAAI+F,EAAK5F,WAAUD,QAAOkB,WACvE,EAAKT,MAAM4Q,QAAQlI,KAAK,MAE1BO,OAAQ,SAAC7I,EAAQE,GAAT,OAAkB,EAAK4I,YAAY9I,EAAQE,MAElD,SAAAgQ,GAAS,OACR,yBAAKnR,UAAU,mBACb,yBAAKA,UAAU,aACb,yBAAKtB,IAAI,mCAAmC4B,IAAI,UAChD,uBAAGN,UAAU,kBAAb,6BAEF,0BACEA,UAAU,aACVgK,SAAU,SAAAvI,GACRA,EAAEC,iBAC0B,KAAxB,EAAK6B,MAAMgN,UAAkD,KAA/B,EAAKhN,MAAMyN,gBAGV,KAAxB,EAAKzN,MAAMgN,SAGoB,KAA/B,EAAKhN,MAAMyN,gBAItBG,EAAU,CACRtK,UAAW,CACTmK,gBAAiB,EAAKzN,MAAMyN,gBAC5BT,SAAU,EAAKhN,MAAMgN,YANvB,EAAK7M,SAAS,CAAEyE,MAAO,yBAHvB,EAAKzE,SAAS,CAAEyE,MAAO,yBAHvB,EAAKzE,SAAS,CAAEyE,MAAO,wCAiB3B,kBAAC,IAAD,CAAMlI,GAAG,KAAI,yBAAKD,UAAU,aAAatB,IAAKA,EAAK4B,IAAI,WACvD,uBAAGN,UAAU,cAAb,0BACA,6BAAMmI,GACN,2BACEhG,MAAO,EAAKoB,MAAMyN,gBAClBzQ,SAAU,EAAKuJ,OAAO,mBACtB7F,YAAY,oBACZjE,UAAU,gBAEZ,2BACEmC,MAAO,EAAKoB,MAAMgN,SAClBhQ,SAAU,EAAKuJ,OAAO,YACtBzK,KAAK,WACL4E,YAAY,WACZjE,UAAU,mBAEZ,yBAAKA,UAAU,gBACb,4BAAQX,KAAK,SAASW,UAAU,gBAAhC,WACA,4BAAQwB,QAAS,SAACC,GAAD,OAAO,EAAKwP,iBAAiBxP,EAAG0P,IAAY9R,KAAK,SAASW,UAAU,eAArF,eAEA,kBAAC,IAAD,CAAMC,GAAG,YAAYD,UAAU,eAA/B,4B,GA/HIU,a,SCFZjD,GAAiBkD,EAAjBlD,aAyCOmU,GAvCG,SAAC,GAAD,IACLlR,EADK,EAChBmR,UACAC,EAFgB,EAEhBA,KACAC,EAHgB,EAGhBA,MACAC,EAJgB,EAIhBA,UACGC,EALa,gEAOd,kBAAC,IAAD,CAAO/Q,MAAOzD,KACX,YAAe,IAAZ0D,EAAW,EAAXA,KACF,MAAkB,SAAd6Q,EAEA,kBAAC,IAAD,CACEF,KAAMA,EACNC,MAAOA,EACPG,OAAQ,SAAArR,GAAK,OACVM,EAAKC,WAAwC,kBAAC,IAAD,CAAUnB,GAAG,MAAxC,kBAACS,EAAcG,MAQtC,kBAAC,IAAD,iBACMoR,EADN,CAEEC,OAAQ,SAAArR,GAAK,OACXM,EAAKC,WACH,kBAACV,EAAcG,GAEb,kBAAC,IAAD,CAAUZ,GAAG,mBC3BzBnC,GAAiB6C,EAAjB7C,aAEFqU,G,YACJ,WAAYtR,GAAQ,IAAD,8BACjB,4CAAMA,KAmBRuR,YAAc,WACZ,OAAO7T,OAAO+E,SAAS+O,KAAKxG,MAAM,KAAK,IArBtB,EA2DnB7G,gBAAkB,SAAA7D,GAChB,GAA2B,IAAvBA,EAAK8D,OAAOzC,OAAhB,CAIA,IAAI0C,EAAgB,EAAK3B,MAAM4B,YAAc,EACvCF,EAAS,EAAK1B,MAAMpC,KAAK8D,OAAOjE,OAAOG,EAAK8D,QAClD,EAAKvB,SAAS,CAAEvC,KAAM,CAAE8D,OAAQA,KAChC,EAAKvB,SAAS,CAAEyB,WAAYD,IAC5B,EAAKxB,SAAS,CAAE0B,SAAS,EAAOC,WAAW,SAPzC,EAAK3B,SAAS,CAAE4B,sBAAsB,EAAMF,SAAS,KA7DtC,EAoFnBG,aAAe,SAAC9G,GACV,EAAK8E,MAAM8B,WAAa,EAAK9B,MAAM6B,UAGnC,EAAK7B,MAAM+B,sBACb/G,OAAOiH,oBAAoB,SAAU,EAAKD,cAEvChH,OAAOkH,YAAclH,OAAOmH,SAAY7G,SAASS,KAAKqG,cACzD9G,SAASC,eAAe,WAAW8G,UA1FrC,EAAKrC,MAAQ,CACXpC,KAAM,CAAE8D,OAAQ,IAAME,WAAY,EAAGU,QAAS,GAC9CT,SAAS,EAAOC,WAAW,EAAMC,sBAAsB,EACvDgN,aAAc,EACdxL,cAAUC,GAGZ,EAAKlG,MAAM4Q,QAAQc,QAAO,SAACjP,EAAUkP,GACnC,EAAK9O,SAAS,CACZvC,KAAM,CAAE8D,OAAQ,IAAME,WAAY,EAAGU,QAAS,GAC9CT,SAAS,EAAOC,WAAW,EAAMC,sBAAsB,EACvDgN,aAAc,IAChB,EAAK5O,SAAS,CAAEoD,SAAUvI,OAAO+E,SAAS+O,KAAKxG,MAAM,KAAK,KAAM,WAC9DhN,SAASC,eAAe,WAAW8G,cAftB,E,kFAwBjB,OAAIpF,KAAK+C,MAAM6B,QACN,yBAAKpF,UAAU,2BAAf,cAEqC,IAA1C8F,OAAOC,OAAOvF,KAAK+C,MAAMpC,MAAMqB,OAC1B,KAEFhC,KAAK+C,MAAMpC,KAAK8D,OAAOe,KAAI,YAC4B,IAA1DC,EAAyD,EAAzDA,IAAKC,EAAoD,EAApDA,MAAOC,EAA6C,EAA7CA,IAAKqJ,EAAwC,EAAxCA,YAAapG,EAA2B,EAA3BA,SAAU+F,EAAiB,EAAjBA,WAC1C,OACE,yBAAKnP,UAAU,2BAA2BoD,IAAK6C,GAC7C,yBAAKjG,UAAU,2BACb,4BAAQA,UAAU,gBAChB,2BAAOkC,KAAK,QAAQC,MAAK,UAAKgE,EAAL,6DACzB,2BAAOjE,KAAK,kBAAkBC,MAAM,SACpC,2BAAOD,KAAK,oBAAoBC,MAAM,WACtC,2BAAOzD,IAAG,UAAKyH,EAAL,+DACR9G,KAAK,gCACLW,UAAU,eAAeoG,kBAAkB,SAASC,iBAAiB,MAG3E,yBAAKrG,UAAU,+BACb,kBAAC,IAAD,CAAMC,GAAE,kBAAagG,IACnB,uBAAGjG,UAAU,aACVkG,IAGL,2BAAIsJ,GACJ,2BAAIpG,EAAS5G,OAAb,IAAqB,uBAAGxC,UAAU,qBAClC,2BAAImP,EAAW3M,OAAf,IAAuB,uBAAGxC,UAAU,yB,0CAqB5CQ,KAAKkD,SAAS,CAAEoD,SAAUvI,OAAO+E,SAAS+O,KAAKxG,MAAM,KAAK,KAAM,WAC9DhN,SAASC,eAAe,WAAW8G,WAGrCrH,OAAOC,iBAAiB,SAAUgC,KAAK+E,aAAc,CAAEe,SAAS,M,6CAIhE/H,OAAOiH,oBAAoB,SAAUhF,KAAK+E,gB,+BAelC,IAAD,OACP,OACE,kBAAC,IAAD,MACG,SAAAtE,GAAM,aACL,yBAAKf,GAAG,aACN,kBAAC,EAAD,MACA,yBAAKF,UAAU,aACb,yBAAKA,UAAU,aACb,kBAAC,EAAD,MAEA,kBAAC,EAAD,MACA,6BAASA,UAAU,QACjB,6CAAmB,EAAKuD,MAAMuD,UAC9B,yBAAK9G,UAAU,OACZ,EAAKuD,MAAMpC,MAAQ,EAAKsR,mBAAmB,EAAKlP,MAAMpC,OAEzD,yBAAKV,MAAO,CAAE+F,MAAO,MAAOC,OAAQ,QAClC,+BAAQhG,MAAO,CAAE+F,MAAO,MAAOC,OAAQ,OAASvG,GAAG,WAAnD,sBAAoE,CAAEsG,MAAO,OAAQE,gBAAiB,aAAtG,yBACW,SAAOjF,GAAP,iBAAAkF,EAAAC,OAAA,uDACPnF,EAAEC,iBACF,EAAKgC,SAAS,CAAE0B,SAAS,IAFlB,WAAAuB,EAAA,MAGgB1F,EAAOC,MAAM,CAClCA,MAAOpD,GACP+I,UAAW,CAAEC,SAAU,EAAKvD,MAAMuD,SAAUjB,QAAS,EAAKtC,MAAMsC,QAASV,WAAY,EAAK5B,MAAM4B,YAChG6B,YAAa,kBANR,gBAGC7F,EAHD,EAGCA,KAKR,EAAK6D,gBAAgB7D,GARd,wCADX,gB,GAlHMT,aA0IXgO,eAAWyD,IC5IlBnU,GAA4B2C,EAA5B3C,wBA0EO0U,G,YAvEb,WAAY7R,GAAQ,IAAD,8BACjB,4CAAMA,KAIR0F,aAAe,WACb,IAAImG,EAASxO,IAAcgC,GAE3B,OACE,kBAAC,IAAD,CAAOgB,MAAOlD,GAAyB6I,UAAW,CAAE3G,GAAIwM,GACtDiE,YAAa,SAACxP,GAAD,OAAU,EAAKuC,SAAS,CAAE4O,aAAcnR,EAAKJ,KAAK4R,aAAanQ,YAE3E,YAA+B,IAA5B4C,EAA2B,EAA3BA,QAAS+C,EAAkB,EAAlBA,MAAOhH,EAAW,EAAXA,KAClB,OAAIiE,EAAgB,aAChB+C,EAAa,UAAN,OAAiBA,EAAMyB,SAEhCzI,EAAKJ,KAAK4R,aAAa3M,KAAI,YAA6D,IAA1DC,EAAyD,EAAzDA,IAAKC,EAAoD,EAApDA,MAAOC,EAA6C,EAA7CA,IAAKqJ,EAAwC,EAAxCA,YAAapG,EAA2B,EAA3BA,SAAU+F,EAAiB,EAAjBA,WACpE,OACE,yBAAKnP,UAAU,2BAA2BoD,IAAK6C,GAC7C,yBAAKjG,UAAU,2BACb,4BAAQA,UAAU,gBAChB,2BAAOkC,KAAK,QAAQC,MAAK,UAAKgE,EAAL,6DACzB,2BAAOjE,KAAK,kBAAkBC,MAAM,SACpC,2BAAOD,KAAK,oBAAoBC,MAAM,WACtC,2BAAOzD,IAAG,UAAKyH,EAAL,+DACR9G,KAAK,gCACLW,UAAU,eAAeoG,kBAAkB,SAASC,iBAAiB,MAI3E,yBAAKrG,UAAU,+BACb,kBAAC,IAAD,CAAMC,GAAE,kBAAagG,IACnB,uBAAGjG,UAAU,aACVkG,IAGL,2BAAIsJ,GACJ,2BAAIpG,EAAS5G,OAAb,IAAqB,uBAAGuL,MAAM,qBAC9B,2BAAIoB,EAAW3M,OAAf,IAAuB,uBAAGuL,MAAM,2BApChD,EAAKxK,MAAQ,CAAE+O,aAAc,GAFZ,E,sEAoDjB,OAHKpU,KACHsC,KAAKK,MAAM4Q,QAAQlI,KAAK,UAGxB,yBAAKvJ,UAAU,aACb,kBAAC,EAAD,MACA,yBAAKA,UAAU,aACb,kBAAC,EAAD,MACA,kBAAC,EAAD,MACA,6BAASA,UAAU,QACjB,6BACE,8CAAoBQ,KAAK+C,MAAM+O,aAA/B,cACC9R,KAAK+F,uB,GA9DM7F,aCDlBzC,GAA+B0C,EAA/B1C,2BAyEO2U,G,YAtEb,WAAY/R,GAAQ,IAAD,8BACjB,4CAAMA,KAIR0F,aAAe,WACb,IAAImG,EAASxO,IAAcgC,GAC3B,OACE,kBAAC,IAAD,CAAOgB,MAAOjD,GAA4B4I,UAAW,CAAE3G,GAAIwM,GACzDiE,YAAa,SAACxP,GAAD,OAAU,EAAKuC,SAAS,CAAE4O,aAAcnR,EAAKJ,KAAK8R,eAAerQ,YAC7E,YAA+B,IAA5B4C,EAA2B,EAA3BA,QAAS+C,EAAkB,EAAlBA,MAAOhH,EAAW,EAAXA,KAClB,OAAIiE,EAAgB,aAChB+C,EAAa,UAAN,OAAiBA,EAAMyB,SAEhCzI,EAAKJ,KAAK8R,eAAe7M,KAAI,YAA6D,IAA1DC,EAAyD,EAAzDA,IAAKC,EAAoD,EAApDA,MAAOC,EAA6C,EAA7CA,IAAKqJ,EAAwC,EAAxCA,YAAapG,EAA2B,EAA3BA,SAAU+F,EAAiB,EAAjBA,WACtE,OACE,yBAAKnP,UAAU,2BAA2BoD,IAAK6C,GAC7C,yBAAKjG,UAAU,2BACb,4BAAQA,UAAU,gBAChB,2BAAOkC,KAAK,QAAQC,MAAK,UAAKgE,EAAL,6DACzB,2BAAOjE,KAAK,kBAAkBC,MAAM,SACpC,2BAAOD,KAAK,oBAAoBC,MAAM,WACtC,2BAAOzD,IAAG,UAAKyH,EAAL,+DACR9G,KAAK,gCACLW,UAAU,eAAeoG,kBAAkB,SAASC,iBAAiB,MAI3E,yBAAKrG,UAAU,+BACb,kBAAC,IAAD,CAAMC,GAAE,kBAAagG,IACnB,uBAAGjG,UAAU,aACVkG,IAGL,2BAAIsJ,GACJ,2BAAIpG,EAAS5G,OAAb,IAAqB,uBAAGuL,MAAM,qBAC9B,2BAAIoB,EAAW3M,OAAf,IAAuB,uBAAGuL,MAAM,2BAlChD,EAAKxK,MAAQ,CAAE+O,aAAc,GAFZ,E,sEAmDjB,OAJKpU,KACHsC,KAAKK,MAAM4Q,QAAQlI,KAAK,UAIxB,yBAAKvJ,UAAU,aACb,kBAAC,EAAD,MACA,yBAAKA,UAAU,aACb,kBAAC,EAAD,MACA,kBAAC,EAAD,MACA,6BAASA,UAAU,QACjB,6BACE,wCAAcQ,KAAK+C,MAAM+O,aAAzB,yBACC9R,KAAK+F,uB,GA7DS7F,aCFtB/C,GAAcgD,EAAdhD,WAEDmV,G,iLAEF,OAAO,kBAAC,IAAD,CAAO5R,MAAOvD,GAAYkJ,UAAW,CAAE3G,GAAIM,KAAKK,MAAM+O,MAAMC,OAAOnD,UACvE,YAA+B,IAA5BtH,EAA2B,EAA3BA,QAAS+C,EAAkB,EAAlBA,MAAOhH,EAAW,EAAXA,KAClB,GAAIiE,EAAS,OAAO,yCACpB,GAAI+C,EAAO,OAAO,oCAElB,IAQI4K,EARE1S,EAAWc,EAAKJ,KAAKV,SACrBD,EAAQe,EAAKJ,KAAKX,MAClBkB,EAAQH,EAAKJ,KAAKO,MAClB8J,EAAO,IAAIC,MAAMlK,EAAKJ,KAAKqK,MAC3BE,EAAOF,EAAKG,cACZC,EAAQJ,EAAKK,WACbC,EAAMN,EAAKO,UACb1G,EAASa,OAAOC,OAAO5E,EAAKJ,KAAK4R,cAGrC,GAAI1N,EAAOzC,OAAS,EAAG,CAAC,IAAD,EACKyC,EAAOA,EAAOzC,OAAS,GAA1CyD,EADc,EACdA,IAAKE,EADS,EACTA,IAAKD,EADI,EACJA,MACjB6M,EACA,yBAAK/S,UAAU,qBAAf,oBACE,6BACE,4BAAQA,UAAU,kBAChB,2BAAOkC,KAAK,QAAQC,MAAK,UAAKgE,EAAL,4EACzB,2BAAOjE,KAAK,kBAAkBC,MAAM,SACpC,2BAAOD,KAAK,oBAAoBC,MAAM,WACtC,2BAAOzD,IAAG,UAAKyH,EAAL,8EACR9G,KAAK,gCACLW,UAAU,eAAeoG,kBAAkB,SAASC,iBAAiB,MAG3E,yBAAKrG,UAAU,cACb,kBAAC,IAAD,CAAMC,GAAE,kBAAagG,IACnB,uBAAGjG,UAAU,yBACVkG,WAMT6M,EACA,6BACE,mDACA,yBAAK/S,UAAU,wBAAuB,uBAAGA,UAAU,kCAK5D,OACO,6BACE,kBAAC,EAAD,MACA,yBAAKA,UAAU,aACb,yBAAKA,UAAU,aACb,kBAAC,EAAD,MACA,kBAAC,EAAD,MACA,yBAAKA,UAAU,gBACb,yBAAKtB,IAAK0B,EAAOJ,UAAU,uBAC3B,yBAAKA,UAAU,qBAAqBK,GACpC,yBAAKL,UAAU,sBAAsBsB,GACrC,yBAAKtB,UAAU,qBAAf,WAA4CsL,EAAO,IAAME,EAAQ,IAAME,GACtEqH,a,GA5DOzI,IAAM5J,WAyEjBgO,eAAWoE,ICxDXE,GAhBH,WACX,OACC,6BACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CAAWlB,KAAK,YAAYD,UAAW/B,GAAUkC,UAAU,SAC1D,kBAAC,IAAD,CAAOD,OAAK,EAACD,KAAK,IAAID,UAAW9M,IACjC,kBAAC,IAAD,CAAOgN,OAAK,EAACD,KAAK,gBAAgBD,UAAWa,KAC7C,kBAAC,IAAD,CAAOX,OAAK,EAACD,KAAK,oBAAoBD,UAAWe,KACjD,kBAAC,GAAD,CAAWd,KAAK,mBAAmBD,UAAWiB,GAAad,UAAU,YACrE,kBAAC,IAAD,CAAQF,KAAK,cAAcD,UAAWtC,KACtC,kBAAC,IAAD,CAAOuC,KAAK,oBAAoBD,UAAWM,KAC5C,kBAAC,GAAD,CAAWL,KAAK,SAASD,UAAWd,GAAOiB,UAAU,Y,oCCZnD7K,GAAgB8L,GAAhB9L,YACFyJ,GAAQvS,aAAaC,QAAQ,cAE7BuK,GAAQ,IAAIqK,KAAc,CAAEC,iBAAkB,SAAAC,GAAM,OAAIA,EAAOnN,KAAO,QAEtEoN,GAAWC,aAAe,CAC9BC,YAAa,cACbC,IAAK,kCAIDC,GAAY9J,cAAQ,YAAwB,IAArB+J,EAAoB,EAApBA,cACvBA,GAAeA,EAAc1N,KAAI,gBAAG4D,EAAH,EAAGA,QAAH,OAAiB+J,QAAQC,IAAIhK,SAG9D3I,GAAS,IAAI4S,IAAa,CAC9B5U,KAAM6U,KAAWC,KAAK,CAACN,GAAWJ,KAClCxK,SACAmL,QAAS,CACPC,cAAe5V,aAAaC,QAAQ,eAEtCqL,QAAS,YAAsC,IAAnCuK,EAAkC,EAAlCA,aAAcR,EAAoB,EAApBA,cACxBC,QAAQC,IAAI,gBAAiBF,GAC7BC,QAAQC,IAAI,eAAgBM,MAIhCrL,GAAM7G,UAAU,CACdb,KAAM,CACJC,WAAY+S,QAAQvD,OAIpBA,IACF3P,GACGmT,OAAO,CAAEvK,SAAU1C,GAAaN,UAAW,CAAE+J,YAC7CjI,MAAK,YAAe,IAAZxH,EAAW,EAAXA,KACP0H,GAAM7G,UAAU,CACdb,KAAM,CACJC,WAAYD,EAAKkT,WAAW3D,eAgBtC4D,IAASpC,OACP,mBAXW,WACX,OACE,kBAAC,IAAD,CAAgBjR,OAAQA,IACtB,kBAAC,IAAD,KACE,kBAAC,GAAD,UAON,MACApC,SAAS0V,cAAc,Y","file":"static/js/main.c7fedae3.chunk.js","sourcesContent":["import gql from \"graphql-tag\";\n\nexport default {\n  IS_LOGGED_IN: gql`\n    query IsUserLoggedIn {\n      isLoggedIn @client\n    }\n  `,\n  FETCH_USER: gql`\n  query FetchUser($id: ID!) {\n    user(_id: $id) {\n      _id\n      username\n      image\n      date\n      email\n      favoriteVideos {\n        _id, title, url, description\n      }\n      videos_liked {\n        _id, title, url, description\n      }\n    }\n  }\n  `,\n  FETCH_VIDEO: gql`\n  query queryVideo($id:ID!){\n  video(_id:$id){\n     _id\n    title\n    description\n    category\n    url\n    likes {\n      _id\n    }\n    dislikes {\n      _id\n    }\n    keywords\n    comments {\n      _id\n      text\n      date\n      gif\n      author {\n        _id\n        username\n        image\n      }\n      replies {\n        _id\n        text\n        date\n        gif\n        replyTo\n        author {\n          _id\n          username\n          image\n        }\n      }\n    }\n    favoriteBy{\n      _id\n    }\n     }\n    }\n  `,\n  FETCH_COMMENT: gql`\n  query FetchComment($id: ID!){\n  comment (_id: $id) {\n    _id\n    text\n    date\n    gif\n    author {\n      username\n      image\n    }\n    date\n    replies {\n      _id\n      text\n      date\n      gif\n      replyTo\n      author {\n        username\n        image\n      }\n    }\n  }\n}\n`,\n  FETCH_VIDEOS: gql`\n  query filterVideos($criteria: String, $perPage: Int!, $pageNumber: Int!){\n  videos(criteria: $criteria, perPage: $perPage, pageNumber: $pageNumber){\n      _id\n      title\n      description\n      category\n      url\n      keywords\n      comments{\n        _id\n      }\n      favoriteBy{\n        _id\n      }\n    }\n  }\n\n `,\n  FETCH_VIDEO_LIKES: gql`\n    query FetchVideoLikes($id: ID!) {\n      video(_id: $id){ \n        likes {\n          _id\n          username\n        }\n      }\n    }\n  `,\n  FETCH_USER_LIKED_VIDEOS: gql`\n    query FetchUserLikedVideos($id: ID!) {\n      user(_id: $id){\n        _id\n        videos_liked{\n          _id\n          title\n          url\n          description\n        comments{\n          _id\n        }\n        favoriteBy{\n          _id\n        }\n        }\n      }\n    }\n  `,\n  FETCH_USER_FAVORITE_VIDEOS: gql`\n    query FetchUserFavoriteVideos($id: ID!) {\n      user(_id: $id){\n        _id, username\n      favoriteVideos{\n        _id, title, url, description\n        comments{\n          _id\n        }\n        favoriteBy{\n          _id\n        }\n      }\n      }\n    }\n  `\n};\n","export const currentUser = () => {\n  return JSON.parse(localStorage.getItem(\"user\"));\n}\n\nwindow.addEventListener('DOMContentLoaded', (event) => {\n  let currentTheme = localStorage.getItem(\"theme\");\n  let src = currentTheme === \"dark\" ? window.darkTheme : window.lightTheme;\n  if (document.getElementById(\"site-logo\")) {\n    document.getElementById(\"site-logo\").src = src; \n  }\n});\n\nexport const changeThemeLogo = () => {\n  let currentTheme = localStorage.getItem(\"theme\");\n  let src = currentTheme === \"dark\" ? window.darkTheme : window.lightTheme;\n  if (document.getElementById(\"site-logo\")) {\n  document.getElementById(\"site-logo\").src = src; \n  }\n}\n\nexport const changeTheme = () => {\n  let currentTheme = localStorage.getItem(\"theme\");\n  var link = document.createElement(\"link\");\n  link.href = currentTheme !== \"dark\" ? \"../stylesheets/components/light_theme.css\" : \"../stylesheets/components/dark_theme.css\";\n  link.rel = \"stylesheet\";\n  link.type = \"text/css\";\n  document.body.appendChild(link);\n  changeThemeLogo();\n}\n\nexport const initializeTheme = () => {\n  let isThemeExist = localStorage.getItem(\"theme\");\n  if (isThemeExist) {\n    changeTheme();\n  } else {\n    localStorage.setItem(\"theme\", \"dark\");\n    changeTheme();\n  }\n}\n\nexport const getCurrentTheme = () => {\n  return localStorage.getItem(\"theme\");\n}","import React, { Component } from 'react';\nimport { currentUser } from '../../util/util'\nimport { Link } from 'react-router-dom'\nimport { changeTheme, getCurrentTheme } from '../../util/util';\n\n\nclass SideBar extends Component {\n\n  componentDidMount() {\n    document.getElementById(\"chkTheme\").checked = getCurrentTheme() === 'dark';\n  }\n\n  changeTheme = (event) => {\n    let theme = event.target.checked ? 'dark' : 'light';\n    localStorage.setItem('theme', theme);\n    changeTheme();\n  }\n\n  render() {\n    let profile;\n    if (currentUser()) {\n      profile = <li className=\"clickable sidebar-section-header\">\n         <Link to={`/profile/${currentUser().id}`}>\n          <i className=\"far fa-user\">&nbsp;</i>\n          <span className=\"\">Profile</span>\n          </Link>\n        </li>\n    } else {\n      profile = null;\n    }\n    let profileSrc = currentUser() ? currentUser().image : \"/stylesheets/images/default_avatar_2.png\";\n    let username = currentUser() ? currentUser().username : \"guest\";\n    return (\n      <aside className=\"sidebar hide\">\n        <div className=\"sidebar-user-info\">\n          <img src={profileSrc} className=\"sidebar-avatar\" alt={username} />\n          <p className=\"sidebar-username\">{username}</p>\n          <label className=\"switch\">\n            <input id=\"chkTheme\" type=\"checkbox\" onChange={this.changeTheme} />>\n            <span className=\"slider\"></span>\n          </label>\n        </div>\n        <hr />\n        <ul>\n          <li className=\"clickable sidebar-section-header\">\n            <Link to=\"/\">\n              <i className=\"fas fa-home\">&nbsp;</i>\n              <span className=\"\">Home</span>\n            </Link>\n          </li>\n          {profile}\n          {currentUser() &&\n            <>\n              <li className=\"clickable sidebar-section-header\">\n                <i className=\"far fa-thumbs-up\">&nbsp;</i>\n                <Link to=\"/videos/likes\" className=\"\">Liked Videos</Link>\n              </li>\n              <li className=\"clickable sidebar-section-header\">\n                <i className=\"fas fa-hand-holding-heart\">&nbsp;</i>\n                <Link to=\"/videos/favorites\">Favorite Videos</Link>\n              </li>\n            </>\n          }\n          <li className=\"sidebar-section-header\">\n            <i className=\"fas fa-th-list\">&nbsp;</i>\n            <span >Categories</span></li>\n          <li className=\"sidebar-item clickable\">\n            <i className=\"fas fa-cat\">&nbsp;</i>\n            <Link to=\"/search/cats\">Funny Cats</Link>\n          </li>\n          <li className=\"sidebar-item clickable\">\n            <i className=\"fas fa-dog\">&nbsp;</i>\n            <Link to=\"/search/dog\">Funny Dogs</Link>\n          </li>\n          <li className=\"sidebar-item clickable\">\n            <i className=\"fas fa-child\">&nbsp;</i>\n            <Link to=\"/search/kids\">Funny kids</Link>\n          </li>\n          <li className=\"sidebar-item clickable\">\n            <i className=\"fas fa-dove\">&nbsp;</i>\n            <Link to=\"/search/birds\">Funny birds</Link>\n          </li>\n          <li className=\"sidebar-item clickable\">\n            <i className=\"fas fa-horse\">&nbsp;</i>\n            <Link to=\"/search/horse\">Funny horses</Link>\n          </li>\n           <li className=\"sidebar-item clickable\">\n            <i style={{'font-size':'16px'}} className=\"icofont-monkey\">&nbsp;</i>\n            <Link to=\"/search/monkey\">Funny monkeys</Link>\n          </li>\n           <li className=\"sidebar-item clickable\">\n            <i style={{'font-size':'16px'}} className=\"icofont-penguin\">&nbsp;</i>\n            <Link to=\"/search/penguin\">Funny penguins</Link>\n          </li>\n        </ul>\n      </aside>\n    );\n  }\n}\n\nexport default SideBar;","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { currentUser } from '../util/util'\nimport { Query, ApolloConsumer } from \"react-apollo\";\nimport Queries from \"../graphql/queries\";\n\nconst { IS_LOGGED_IN } = Queries;\n\nconst handleToggle = (e) => {\n  e.preventDefault();\n  let navLogoutPopup = document.getElementById(\"navLogoutPopup\");\n\n  if (navLogoutPopup) {\n    navLogoutPopup.classList.toggle(\"display\");\n  }\n}\n\nconst Nav = props => {\n  let profilePath = \"/\";\n  const user = currentUser();\n  if (user) {\n    profilePath = \"profile/\".concat(user.id);\n  }\n  return (\n    <ApolloConsumer>\n      {client => (\n        <Query query={IS_LOGGED_IN}>\n          {({ data }) => {\n            if (data.isLoggedIn) {\n              let profileSrc = currentUser() ? currentUser().image : \"/stylesheets/images/default_avatar_2.png\";\n              let profileEmail = currentUser() ? currentUser().email : \"\";\n              let profileUsername = currentUser() ? currentUser().username : \"\";\n             \n              return (\n                <div className=\"navbar-logout\" onClick={(e) => handleToggle(e)}><img alt=\"PalTube\" src={profileSrc} className=\"navbar-pic\" />\n                  <div className=\"navPopup\" id=\"navLogoutPopup\">\n                    <div className=\"logout-info\">\n                      <p className=\"nav-popup-username\">{profileUsername}</p>\n                      <p className=\"nav-popup-email\">{profileEmail}</p>\n                    </div>\n                    <div className=\"logout-likes\">\n                      <Link to={profilePath}><i className=\"fas fa-user sign-out-icon\"></i>My Profile</Link> \n                    </div>\n                    <div className=\"logout-likes\">\n                      <Link to=\"/videos/likes\"><i className=\"fas fa-thumbs-up sign-out-icon\"></i>My Likes</Link>\n                    </div>\n                    <button\n                      className=\"logout-button\"\n                      onClick={e => {\n                        e.preventDefault();\n                        localStorage.removeItem(\"auth-token\");\n                        localStorage.removeItem(\"user\");\n                        client.writeData({ data: { isLoggedIn: false } });\n\n                      }}\n                    >\n                      <Link to=\"/\" className=\"nav-log-out\"><i className=\"fas fa-sign-out-alt sign-out-icon\"></i>Sign Out</Link>\n                    </button> \n                      \n                    </div>\n                </div>\n              )\n            } else {\n              return (\n                <div className=\"nav-links\">\n                  <Link to=\"/register\" className=\"nav-sign-up\">SIGN UP</Link>\n                  <Link to=\"/login\" className=\"nav-sign-in\">SIGN IN</Link>\n                </div>\n              );\n            }\n          }}\n        </Query>\n      )}\n    </ApolloConsumer>\n  );\n\n};\n\nexport default Nav; \n","const gendersJson = [\n  { name: \"cat\", value: 1 },\n  { name: \"cats\", value: 2 },\n  { name: \"funny cat\", value: 3 },\n  { name: \"dog\", value: 4 },\n  { name: \"dogs\", value: 5 },\n  { name: \"funny dog\", value: 6 },\n  { name: \"funny dogs\", value: 7 },\n  { name: \"animals\", value: 8 },\n  { name: \"baby\", value: 9 },\n  { name: \"babies\", value: 10 },\n  { name: \"puppies\", value: 11 },\n  { name: \"kid\", value: 12 },\n  { name: \"kids\", value: 13 },\n  { name: \"kids and animals\", value: 14 },\n  { name: \"trolling\", value: 15 },\n  { name: \"birds\", value: 16 },\n  { name: \"birds talk like human\", value: 17 },\n  { name: \"horse\", value: 18 },\n  { name: \"horses\", value: 19 },\n  { name: \"funny horse\", value: 20 },\n  { name: \"horses are much more funny than cats\", value: 21 },\n  { name: \"cute and funny horse\", value: 22 },\n  { name: \"funnies horse\", value: 23 },\n]\n\nexport default gendersJson","import React, { Component } from 'react';\nimport Autosuggest from 'react-autosuggest';\nimport searchSuggestions from '../../json_files/search_suggestions';\n\nconst getSuggestions = value => {\n  const inputValue = value.trim().toLowerCase();\n  const inputLength = inputValue.length;\n  return inputLength === 0 ? [] : searchSuggestions.filter(item =>\n    item.name.toLocaleLowerCase().includes(inputValue)\n  );\n};\nconst getSuggestionValue = suggestion => suggestion.name;\nconst renderSuggestion = suggestion => (\n  <div>\n    {suggestion.name}\n  </div>\n);\n\nclass SearchBar extends Component {\n  constructor() {\n    super();\n    this.state = { value: '', suggestions: [], referrer: null }\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"keydown\", this.handleKeydown);\n  }\n\n  handleKeydown = (event) => {\n    if (event.target.getAttribute(\"aria-controls\") === \"react-autowhatever-txtSearchVideos\") {\n      if (event.key === 'Enter' || event.keyCode === 13) {\n        window.location.href = `#/search/${this.state.value}`\n      }\n    }\n  }\n\n  handleSearchClick = (event) => {\n    if (event.target.id === \"searchBtn\") {\n        window.location.href = `#/search/${this.state.value}`\n    }\n  }\n\n  onSuggestionsFetchRequested = ({ value }) => {\n    this.setState({\n      suggestions: getSuggestions(value)\n    });\n  };\n\n  onSuggestionsClearRequested = () => {\n    this.setState({ suggestions: [] });\n  };\n\n  onChange = (event, { newValue, method }) => {\n    this.setState({ value: newValue })\n  }\n\n  render() {\n    const { value, suggestions } = this.state;\n    const inputProps = {\n      placeholder: 'search...',\n      value,\n      onChange: this.onChange,\n    };\n\n    return (\n      <div id=\"div\" style={{ display: 'flex' }}>\n        <Autosuggest\n          id=\"txtSearchVideos\"\n          suggestions={suggestions}\n          onSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\n          onSuggestionsClearRequested={this.onSuggestionsClearRequested}\n          getSuggestionValue={getSuggestionValue}\n          renderSuggestion={renderSuggestion}\n          inputProps={inputProps}\n          highlightFirstSuggestion={true}\n        />\n        <button className=\"clickable search-icon\" onClick={this.handleSearchClick}>\n          <i className=\"fas fa-search\" id=\"searchBtn\"></i>\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default SearchBar;","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Nav from \"./Nav\";\nimport SearchBar from './ui/SearchBar';\nimport { initializeTheme } from '../util/util';\n\n\nclass NavBar extends Component {\n\n\n  toggleMenu = ()=>{\n    let sideBar = document.getElementsByClassName(\"sidebar\")[0];\n    let miniSideBar = document.getElementsByClassName(\"mini-sidebar\")[0];\n    let toggleClassSide = sideBar.classList.contains('show') ? \"hide\": \"show\";\n    let toggleClassMini = miniSideBar.classList.contains('show') ? \"hide\" : \"show\";\n    miniSideBar.classList.remove('show');\n    miniSideBar.classList.remove('hide');\n    miniSideBar.classList.add(toggleClassMini);\n    sideBar.classList.remove('show');\n    sideBar.classList.remove('hide');\n    sideBar.classList.add(toggleClassSide);\n  }\n\n  render(){\n    initializeTheme();\n    let src = localStorage.theme === \"dark\" ? window.darkTheme : window.lightTheme;\n    return (\n      <div className=\"navbar\">\n        <div className=\"logo-container\">\n          <span onClick={this.toggleMenu} className=\"burger-menu-icon\" id=\"nav-toggle\">&#9776;</span>\n          <Link to=\"/\"><img id=\"site-logo\" className=\"navbar-logo\" src={src} alt=\"Paltube\" /></Link>\n        </div>\n        <SearchBar />\n        <Nav />\n      </div>\n    );\n  }\n  \n};\n\nexport default NavBar; ","import React, { Component } from 'react';\nimport { currentUser } from '../../util/util'\nimport { Link } from 'react-router-dom'\nimport { changeTheme, getCurrentTheme } from '../../util/util'\n\nclass MiniSideBar extends Component {\n\n  componentDidMount() {\n    document.getElementById(\"chkTheme\").checked = getCurrentTheme() === 'dark';\n  }\n\n  changeTheme = (event) => {\n    let theme = event.target.checked ? 'dark' : 'light';\n    localStorage.setItem('theme', theme);\n    changeTheme();\n  }\n\n  render() {\n\n    return (\n      <aside className=\"mini-sidebar show\">\n        <ul>\n          <li className=\"clickable mini-sidebar-section-header\">\n            <Link to=\"/\"><i className=\"fas fa-home mini-icon\">&nbsp;</i><p className=\"mini-description\">Home</p></Link>\n          </li>\n          {currentUser() &&\n            <>\n            <li className=\"clickable mini-sidebar-section-header\">\n              <Link to=\"/videos/likes\" className=\"\"><i className=\"far fa-thumbs-up mini-icon\">&nbsp;</i><p className=\"mini-description\">My Likes</p></Link>\n            </li>\n              <li className=\"clickable mini-sidebar-section-header\">\n              <Link to=\"/videos/favorites\"><i className=\"fas fa-hand-holding-heart mini-icon\">&nbsp;</i><p className=\"mini-description\">Favorites</p></Link>\n              </li>\n            </>\n          }\n         \n        </ul>\n      </aside>\n    );\n  }\n}\n\nexport default MiniSideBar;","import React, { Component } from 'react';\nimport Queries from '../../graphql/queries';\nimport { ApolloConsumer } from 'react-apollo';\nimport { Link } from 'react-router-dom';\nimport SideBar from '../ui/SideBar';\nimport NavBar from '../NavBar';\nimport MiniSideBar from '../ui/MiniSideBar'\nconst { FETCH_VIDEOS } = Queries;\n\nclass VideoIndex extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      data: { videos: [] }, pageNumber: 0, perPage: 16,\n      loading: false, firstLoad: true, documentsFullyLoaded: false\n    }\n  }\n\n  renderVideos() {\n    if (this.state.loading) {\n      return <div className=\"video-index-loading-div\">loading...</div>\n    }\n    if (Object.values(this.state.data).length === 0) {\n      return null\n    }\n    return this.state.data.videos.map((\n      { _id, title, url }) => {\n      return (\n        <div key={_id} className=\"video-container\">\n          <div>\n            <object className=\"video-player\">\n              <param name=\"movie\" value={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0&rel=0&modest=1`}></param>\n              <param name=\"allowFullScreen\" value=\"true\"></param>\n              <param name=\"allowscriptaccess\" value=\"always\"></param>\n              <embed src={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0&rel=0&modest=1`}\n                type=\"application/x-shockwave-flash\"\n                className=\"video-player\" allowscriptaccess=\"always\" allowFullScreen={true}></embed>\n            </object>\n          </div>\n          <div className=\"video-info\">\n            <Link to={`/videos/${_id}`}>\n              <p className=\"video-title clickable\">\n                {title}\n              </p>\n            </Link>\n          </div>\n        </div>\n      );\n    });\n  }\n\n  onVideosFetched = data => {\n    if (data.videos.length === 0) {\n      this.setState({ documentsFullyLoaded: true, loading: false });\n      return\n    }\n    let newPageNumber = this.state.pageNumber += 1;\n    const videos = this.state.data.videos.concat(data.videos);\n    this.setState({ data: { videos: videos } });\n    this.setState({ pageNumber: newPageNumber });\n    this.setState({ loading: false, firstLoad: false });\n  }\n\n\n  componentDidMount() {\n    document.getElementById(\"btnLoad\").click();\n    window.addEventListener('scroll', this.handleScroll, { passive: true });\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('scroll', this.handleScroll)\n  }\n\n  handleScroll = (event) => {\n    if (this.state.firstLoad || this.state.loading) {\n      return;\n    }\n    if (this.state.documentsFullyLoaded) {\n      window.removeEventListener('scroll', this.handleScroll)\n    }\n    if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {\n      document.getElementById(\"btnLoad\").click();\n    }\n  }\n\n  render() {\n    return (\n      <ApolloConsumer>\n        {client => (\n          <div id=\"scrollDiv\">\n            <NavBar />\n            <div className=\"container\">\n              <div className=\"flex-grid\">\n                <MiniSideBar/>\n                <SideBar />\n                <section className=\"main\">\n                  <h3>Recommended Videos</h3>\n                  <div className=\"row\">\n                    {this.state.data && this.renderVideos(this.state.data)}\n                  </div>\n                  <div style={{ width: '1px', height: '1px' }}>\n                    <button style={{ width: '1px', height: '1px' }} id=\"btnLoad\" style={{ width: '100%', backgroundColor: 'darkgrey' }}\n                      onClick={async (e) => {\n                        e.preventDefault();\n                        this.setState({ loading: true });\n                        const { data } = await client.query({\n                          query: FETCH_VIDEOS,\n                          variables: { criteria: undefined, perPage: this.state.perPage, pageNumber: this.state.pageNumber },\n                          fetchPolicy: \"network-only\"\n                        });\n                        this.onVideosFetched(data);\n                      }}\n                    >\n                    </button>\n                  </div>\n                </section>\n              </div>\n            </div>\n          </div>\n        )}\n      </ApolloConsumer>\n    );\n  }\n}\n\nexport default VideoIndex;\n\n// export default graphql(FETCH_VIDEOS, {\n//   options: (props) => { return { variables: { criteria: undefined, perPage: 0, pageNumber: 0 } } }\n// })(VideoIndex);","import gql from \"graphql-tag\";\n\nexport default {\n  LOGIN_USER: gql`\n  mutation LoginUser($emailOrUsername: String!, $password: String!) {\n    login(emailOrUsername: $emailOrUsername, password: $password) {\n      token\n      loggedIn\n      _id\n      email\n      username\n      image\n    }\n  }\n  `,\n  REGISTER_USER: gql`\n  mutation RegisterUser($username: String!, $email: String!, $password: String!, $password2: String!, $image:String!) {\n    register(username: $username, email: $email, password: $password, password2: $password2, image: $image) {\n      email\n      token\n      loggedIn\n      _id\n      username\n      image\n    }\n  }\n `,\n  VERIFY_USER: gql`\n  mutation VerifyUser($token: String!) {\n    verifyUser(token: $token) {\n      loggedIn\n    }\n  }\n`,\n  VIDEO_COMMENT: gql`\n    mutation VideoComment($text: String!, $author: ID!, $videoId: ID!, $gif: String!) {\n      addVideoComment(text: $text, author: $author, videoId: $videoId, gif: $gif) {\n        _id\n        text\n        author {\n          _id\n          username\n          image\n        }\n        replies {\n          _id  \n        }\n        date\n        gif\n      }\n    }\n  `,\n  REPLY_COMMENT: gql`\n    mutation ReplyComment($text: String!, $author: ID!, $parentCommentId: ID!, $gif: String!) {\n      addReplyComment(text: $text, author: $author, parentCommentId: $parentCommentId, gif: $gif) {\n        _id\n        text\n        author {\n          _id\n          username\n          image\n        }\n        replyTo\n        replies {\n          _id  \n        }\n        date\n        gif\n      }\n    }\n  `,\n  REPLY_REPLY_COMMENT: gql`\n    mutation ReplyComment($text: String!, $author: ID!, $parentCommentId: ID!, $gif: String!, $replyTo: String!) {\n      replyReplyComment(text: $text, author: $author, parentCommentId: $parentCommentId, gif: $gif, replyTo: $replyTo) {\n        _id\n        text\n        author {\n          _id\n          username\n          image\n        }\n        replies {\n          _id  \n        }\n        date\n        gif\n        replyTo\n      }\n    }\n  `,\n  DELETE_COMMENT: gql`\n    mutation DeleteComment($id: ID!) {\n      deleteComment(id: $id) {\n        _id\n      }\n    }\n  `,\n  UPDATE_COMMENT: gql`\n  mutation UpdateComment($id: ID!, $text: String) {\n    updateComment(id: $id, text: $text) {\n      _id\n      text\n      date\n      author {\n        _id\n        username\n        image\n      }\n      replies {\n        _id\n       }\n      replyTo\n    }\n  }\n`,\n  ADD_VIDEO_LIKE: gql`\n    mutation VideoLike($videoId: ID!, $userId: ID!) {\n      addVideoLike(videoId: $videoId, userId: $userId) {\n        _id\n      }\n    }\n  `,\n  REMOVE_VIDEO_LIKE: gql`\n    mutation VideoRemoveLike($videoId: ID!, $userId: ID!) {\n      removeVideoLike(videoId: $videoId, userId: $userId) {\n        _id\n      }\n    }\n  `,\n  ADD_VIDEO_DISLIKE: gql`\n    mutation VideoDislike($videoId: ID!, $userId: ID!) {\n      addVideoDislike(videoId: $videoId, userId: $userId) {\n        _id\n      }\n    }\n  `,\n  REMOVE_VIDEO_DISLIKE: gql`\n    mutation VideoRemoveDislike($videoId: ID!, $userId: ID!) {\n      removeVideoDislike(videoId: $videoId, userId: $userId) {\n        _id\n      }\n    }\n  `,\n  ADD_TO_FAVORITES: gql`\n    mutation AddToFavorites($videoId: ID!, $userId: ID!) {\n      addFavoriteVideo(videoId: $videoId, userId:$userId){\n      _id\n    }\n  }\n  `,\n  REMOVE_FROM_FAVORITES: gql`\n    mutation RemoveFromFavorites($videoId: ID!, $userId: ID!) {\n      removeFavoriteVideo(videoId: $videoId, userId:$userId){\n      _id\n    }\n  }\n  `\n}","import React from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport Mutations from \"../../graphql/mutations\";\nimport Queries from '../../graphql/queries';\nimport { currentUser } from \"../../util/util\";\nimport Picker from 'react-giphy-component';\n\nconst { REPLY_REPLY_COMMENT } = Mutations;\nconst { FETCH_VIDEO } = Queries;\n\nclass ReplyCommentCreate extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      text: \"\",\n      gif: \"\",\n      error: \"\"\n    }\n  }\n\n  handleToggle(e, id) {\n    if (e) {\n      e.preventDefault();\n    }\n    var giphy = document.getElementById(id);\n\n    if (giphy) {\n      giphy.classList.toggle(\"show\");\n    }\n  }\n\n  handleToggleSubmit(id) {\n    var giphy = document.getElementById(id);\n\n    if (giphy && giphy.classList.contains(\"show\")) {\n      giphy.classList.toggle(\"show\");\n    }\n  }\n\n  update(field) {\n    return e => {\n      this.setState({ [field]: e.target.value })\n    }\n  }\n\n  handleSubmit(e, replyReplyComment) {\n    e.preventDefault();\n    if (this.state.text === \"\") {\n      this.setState({ error: \"cannot be empty\" })\n      return\n    }\n\n    let text = this.state.text;\n    let gif = this.state.gif\n    let text1; \n    text1 = this.props.user + \" \" + text\n\n    replyReplyComment({\n      variables: {\n        text: text1,\n        author: currentUser().id,\n        parentCommentId: this.props.parentId,\n        gif: gif,\n        replyTo: this.props.replyTo\n      }\n    })\n      .then(data => {\n        this.setState({\n          text: \"\",\n          gif: \"\",\n          error: \"\"\n        })\n      }).then(data => {\n        this.handleToggleSubmit(this.props.parentId.concat(\"replyoptions\"));\n      })\n  };\n\n  updateCache(cache, { data: { replyReplyComment } }) {\n    let video;\n    try {\n      video = cache.readQuery({ query: FETCH_VIDEO, variables: { id: this.props.videoId } });\n    } catch (err) {\n      return;\n    }\n\n    if (video) {\n      video = Object.assign({}, video.video)\n      let commentsArray = video.comments;\n      for (let i = 0; i < commentsArray.length; i++) {\n        if (this.props.parentId === commentsArray[i]._id) {\n          commentsArray[i].replies.push(replyReplyComment)\n        }\n\n      }\n      cache.writeQuery({\n        query: FETCH_VIDEO,\n        variables: { id: this.props.videoId },\n        data: { video: video }\n      });\n    }\n  }\n\n  updategif(gif) {\n    this.setState({ gif: gif.downsized.url })\n  }\n\n  render() {\n    const user = currentUser();\n    const commentId = this.props.parentId.concat(\"replyoptions\");\n    if (!user) {\n      return <div></div>\n    } \n    else {\n    if (currentUser().username !== this.props.user) {\n      let error;\n      if (this.state.error === \"cannot be empty\") {\n        error = \"Comment must have text\"\n      }\n    return (\n      <Mutation\n        onError={error => { this.setState({ error: error.message }) }}\n        mutation={REPLY_REPLY_COMMENT}\n        update={(cache, data) => this.updateCache(cache, data)}\n      >\n        {(replyReplyComment, { data }) => (\n          <div>\n            <form className=\"reply-reply-create\" onSubmit={e => this.handleSubmit(e, replyReplyComment)}>\n              <input\n                value={this.state.text}\n                onChange={this.update(\"text\")}\n                placeholder={\"@\" + this.props.user}\n                className=\"comment-create-input\"\n              />\n              <div>{error}</div>\n              <div className=\"reply-buttons\">\n              <div className=\"gif-popup-reply\">\n                <button className=\"create-comment-button\" onClick={(e) => this.handleToggle(e, commentId)}>Gif</button>\n                <div className=\"giftext-reply\" id={commentId}>\n                  <Picker id=\"giphy-picker\" apiKey=\"EeZhW081PZQ2Abce60Y4EQulHVTzcbRA\" onSelected={this.updategif.bind(this)} />\n                </div>\n              </div>\n              <button className=\"reply-comment-button\" type=\"submit\">Reply</button>\n              </div>\n            </form>\n           \n          </div>\n        )}\n      </Mutation>\n    )\n     } else {\n       return (\n         <div></div>\n       )\n     }\n  }}\n}\n\nexport default ReplyCommentCreate;","import React from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport Mutations from \"../../graphql/mutations\";\nimport Queries from '../../graphql/queries';\nimport { currentUser } from \"../../util/util\";\n\nconst { FETCH_VIDEO } = Queries;\nconst { DELETE_COMMENT } = Mutations;\n\nclass CommentDelete extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.handleSubmitToggle = this.handleSubmitToggle.bind(this)\n  }\n  \n  handleSubmit(e, deleteComment) {\n    e.preventDefault();\n    deleteComment({\n      variables: {\n      id: this.props.commentId\n      }\n    }).then(() => this.handleSubmitToggle(`${this.props.commentId}`))\n  }\n\n  handleSubmitToggle(optionsName) {\n    var options = document.getElementById(optionsName);\n\n    if (options && options.classList.contains(\"show\")) {\n      options.classList.toggle(\"show\");\n    }\n  }\n\n\n \n  render() {\n    const user = currentUser();\n\n    if (!user) {\n      return <div></div>\n    } else if (this.props.user === currentUser().username) {\n    return (\n      <Mutation\n        mutation={DELETE_COMMENT}\n        refetchQueries={() => {\n          return [\n            {\n              query: FETCH_VIDEO, variables: { id: this.props.videoId }\n            }\n          ];\n        }}\n      >\n        {(deleteComment, { data }) => (\n          <div>\n            <form className=\"delete-button\" onSubmit={e => this.handleSubmit(e, deleteComment)}>\n              <button type=\"submit\">Delete</button>\n            </form>\n          </div>\n        )}\n      </Mutation>\n    )\n  } else {\n    return <div></div>\n  }\n  }\n}\n\nexport default CommentDelete;\n","import React from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport Mutations from \"../../graphql/mutations\";\nimport Queries from '../../graphql/queries';\nimport { currentUser } from \"../../util/util\";\n\nconst { FETCH_VIDEO } = Queries;\nconst { UPDATE_COMMENT } = Mutations;\n\nclass EditComment extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      text: this.props.comment.text\n    }\n  }\n\n  update(field) {\n    debugger; \n    return e => {\n      this.setState({ [field]: e.target.value })\n    }\n  }\n\n  handleSubmit(e, updateComment) {\n    e.preventDefault();\n\n    updateComment({\n      variables: {\n        id: this.props.comment._id,\n        text: this.state.text\n      }\n    })\n}\n\n\n  render() {\n    const user = currentUser();\n\n    if (!user) {\n      return <div></div>\n    } else if (this.props.comment.author.username === currentUser().username) {\n      return (\n        <Mutation\n          mutation={UPDATE_COMMENT}\n          refetchQueries={() => {\n            return [\n              {\n                query: FETCH_VIDEO, variables: { id: this.props.videoId }\n              }\n            ];\n          }}\n        >\n          {(updateComment, { data }) => (\n            <div>\n              <form className=\"edit-form\" onSubmit={e => this.handleSubmit(e, updateComment)}>\n                <input\n                  className=\"edit-text\"\n\n                  value={this.state.text}\n                  onChange={this.update(\"text\")}\n                />\n                <button className=\"edit-button\"type=\"submit\">Edit</button>\n              </form>\n            </div>\n          )}\n        </Mutation>\n      )\n    } else  {\n      return <div></div>\n    }\n  }\n}\n\nexport default EditComment;\n","import React from 'react';\nimport ReplyCommentCreate from \"./ReplyCommentCreate\";\nimport CommentDelete from \"./CommentDelete\";\nimport EditComment from \"./EditComment\";\nimport {Link} from \"react-router-dom\";\nimport { currentUser } from '../../util/util';\n\nconst handleToggle = (e, commentName) => {\n  e.preventDefault();\n\n  let commentOptions = document.getElementById(commentName);\n\n  if (commentOptions) {\n    commentOptions.classList.toggle(\"show\");\n  }\n}\n\nconst editOptions = (author, props) => {\n  const commentName = props.comment._id;\n\n  if (currentUser() && currentUser().username === author) {\n    return (\n      <div className=\"options-popup\">\n        <i onClick={(e) => handleToggle(e, commentName)} className=\"fas fa-ellipsis-h edit-button-font\"></i>\n        <div className=\"optionstext\" id={commentName}>\n          <EditComment videoId={props.videoId} comment={props.comment} />\n          <CommentDelete commentId={props.comment._id} videoId={props.videoId} user={props.comment.author.username} />\n        </div>\n      </div>\n    )\n  } else {\n    return (<div></div>)\n  }\n}\n\nconst CommentReplyItem = props => {\n    const date = new Date(+props.comment.date);\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const day = date.getDate()\n    const author = props.comment.author.username; \n\n    const num = props.comment.replyTo ? props.comment.text.split(\" \")[0].length : 0;\n    const name = props.comment.replyTo ? \"@\" + props.comment.text.split(\" \")[0] : \"\";\n    const link = props.comment.replyTo ? <div className=\"comment-reply-link-item\"><Link to={`/profile/${props.comment.replyTo}`}><div className=\"comment-reply-link\">{name}</div></Link> <div className=\"comment-reply-link-text\">{props.comment.text.slice(num)}</div></div> : <div>{props.comment.text}</div>;\n    const profileSrc = props.comment.author.image ? props.comment.author.image : \"/stylesheets/images/default_avatar_2.png\";\n    const gif = props.comment.gif ? <img alt=\"comment\" className=\"reply-comment-gif\" src={props.comment.gif} /> : null\n\n    \n    return (\n  \n          <div className=\"reply-comment-index\">\n            <div className=\"reply-comment-top\">\n              <img src={profileSrc} className=\"reply-comment-create-avatar\" />\n              <div className=\"reply-comment-name\">{props.comment.author.username}</div>\n            <div className=\"edit-comment\">\n              <div className=\"reply-comment-year\">{year + \"-\" + month + \"-\" + day}</div>\n              {editOptions(author, props)}\n            </div>\n            </div>\n              <div className=\"reply-comment-text\">{link}</div>\n              {gif}\n            <div className=\"comment-reply-reply\"><ReplyCommentCreate videoId={props.videoId} parentId={props.parentId} replyTo={props.comment.author._id} user={props.comment.author.username}/></div> \n           \n\n           </div>\n        )\n}\n\nexport default CommentReplyItem;","import React from 'react';\nimport CommentReplyItem from \"./CommentReplyItem\";\nimport { Query } from \"react-apollo\";\nimport Queries from '../../graphql/queries';\n\nconst { FETCH_VIDEO} = Queries;\n\nclass CommentReplyIndex extends React.Component {\n  \n  render() {\n    return <Query query={FETCH_VIDEO} variables={{ id: this.props.videoId }}>\n      {({ loading, error, data }) => {\n        if (loading) return <p>Loading...</p>;\n        if (error) return <p>Error</p>;\n      \n       const comments = data.video.comments;\n\n       let comment;\n       for (let i = 0; i < comments.length; i++) {\n         if (this.props.commentId === comments[i]._id) {\n            comment = comments[i].replies;\n         }\n       }\n     \n         const replies = comment.map(reply => {\n            return <div>\n             <div><CommentReplyItem comment={reply} videoId={this.props.videoId} parentId={this.props.commentId}/> </div>\n            </div>\n        })\n       \n     return (\n       <div>\n       {replies}\n       </div>\n     )\n      }}\n    </Query>\n  }\n}\n\nexport default CommentReplyIndex;\n","import React from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport Mutations from \"../../graphql/mutations\";\nimport Queries from '../../graphql/queries';\nimport { currentUser } from \"../../util/util\";\nimport Picker from 'react-giphy-component';\n\nconst { REPLY_COMMENT} = Mutations;\nconst { FETCH_VIDEO } = Queries;\n\nclass CommentReplyCreate extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      text: \"\",\n      gif: \"\",\n      error: \"\"\n    }\n  }\n\n  handleToggle(e, id) {\n    if (e) {\n    e.preventDefault();\n    }\n    var giphy = document.getElementById(id);\n \n    if (giphy) {\n      giphy.classList.toggle(\"show\");\n    }\n  }\n\n  handleToggleSubmit(id) {\n    var giphy = document.getElementById(id);\n\n    if (giphy && giphy.classList.contains(\"show\")) {\n      giphy.classList.toggle(\"show\");\n    }\n  }\n\n  update(field) {\n    return e => {\n      this.setState({ [field]: e.target.value })\n    }\n  }\n\n  handleSubmit(e, addReplyComment) {\n    e.preventDefault();\n    let text = this.state.text;\n    let gif = this.state.gif\n\n    if (this.state.text === \"\") {\n      this.setState({ error: \"GraphQL error: Cannot return null for non-nullable field CommentType.text.\" })\n      return\n    }\n\n    addReplyComment({\n      variables: {\n        text: text,\n        author: currentUser().id,\n        parentCommentId: this.props.parentId,\n        gif: gif\n      }\n    })\n      .then(data => {\n        this.setState({\n          text: \"\",\n          gif: \"\",\n          error: \"\"\n        })\n      }).then(data => {\n        this.handleToggleSubmit(this.props.parentId.concat(\"options\"));\n      })\n  };\n\n  updateCache(cache, { data: { addReplyComment } }) {\n    let video;\n    try {\n      video = cache.readQuery({ query: FETCH_VIDEO, variables: { id: this.props.videoId } });\n    } catch (err) {\n      return;\n    }\n\n    if (video) {\n      video = Object.assign({}, video.video)\n      let commentsArray = video.comments;\n      for (let i = 0; i < commentsArray.length; i++) {\n        if (this.props.parentId === commentsArray[i]._id) {\n          commentsArray[i].replies.push(addReplyComment) \n        }\n      \n      }\n      cache.writeQuery({\n        query: FETCH_VIDEO,\n        variables: { id: this.props.videoId },\n        data: { video: video }\n      });\n    }\n  }\n\n  updategif(gif) {\n    this.setState({ gif: gif.downsized.url })\n  }\n\n  render() {\n    const user = currentUser();\n    const commentId = this.props.parentId.concat(\"options\"); \n    if (!user) {\n      return <div></div>\n    }\n      else {\n      let error;\n      if (this.state.error === \"GraphQL error: Cannot return null for non-nullable field CommentType.text.\") {\n        error = \"Comment must have text\"\n      }\n    return (\n      <Mutation\n        onError={error => { this.setState({ error: error.message }) }}\n        mutation={REPLY_COMMENT}\n        update={(cache, data) => this.updateCache(cache, data)}\n      >\n        {(addReplyComment, { data }) => (\n          <div>\n            <form className=\"reply-comment\" onSubmit={e => this.handleSubmit(e, addReplyComment)}>\n              <input\n                value={this.state.text}\n                onChange={this.update(\"text\")}\n                placeholder={`${currentUser().username} leave your reply, be nice :)`}\n                className=\"comment-create-input\"\n              />\n              <div>{error}</div>\n              <div className=\"reply-buttons\">\n              <div className=\"gif-popup-reply\">\n                <button className=\"create-comment-button\" onClick={(e) => this.handleToggle(e, commentId)}>Gif</button>\n                <div className=\"giftext-reply\" id={commentId}>\n                  <Picker id=\"giphy-picker\" apiKey=\"EeZhW081PZQ2Abce60Y4EQulHVTzcbRA\" onSelected={this.updategif.bind(this)} />\n                </div>\n              </div>\n              <button className=\"reply-comment-button\" type=\"submit\">Reply</button>\n              </div>\n            </form>\n            \n          </div>\n        )}\n      </Mutation>\n      )};\n  }\n}\n\nexport default CommentReplyCreate;","import React from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport Mutations from \"../../graphql/mutations\";\nimport Queries from '../../graphql/queries';\nimport { currentUser } from \"../../util/util\";\n  \nconst { FETCH_VIDEO } = Queries;\nconst { UPDATE_COMMENT, DELETE_COMMENT } = Mutations;\n\nclass CommentRootDelete extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.handleSubmitToggle = this.handleSubmitToggle.bind(this)\n  }\n\n \n  handleSubmit(e, updateComment) {\n    e.preventDefault();\n\n    updateComment({\n      variables: {\n        id: this.props.commentId,\n        text: \"!(!DELETE!)!\"\n      }\n    }) \n  }\n\n  handleSubmitToggle(optionsName) {\n    var options = document.getElementById(optionsName);\n\n    if (options && options.classList.contains(\"show\")) {\n      options.classList.toggle(\"show\");\n    }\n  }\n\n\n  handleSubmit2(e, deleteComment) {\n    e.preventDefault();\n\n    deleteComment({\n      variables: {\n        id: this.props.commentId\n      }\n    }).then(() => this.handleSubmitToggle(`${this.props.commentId}`))\n  }\n  \n\n  render() {\n    const user = currentUser();\n\n    if (!user) {\n      return <div></div>\n    } else if (this.props.user === currentUser().username && this.props.comment.replies.length > 0) {\n      return (\n        <Mutation\n          mutation={UPDATE_COMMENT}\n          refetchQueries={() => {\n            return [\n              {\n                query: FETCH_VIDEO, variables: { id: this.props.videoId }\n              }\n            ];\n          }}\n        >\n          {(updateComment, { data }) => (\n            <div>\n              <form className=\"delete-button\" onSubmit={e => this.handleSubmit(e, updateComment)}>\n                <button type=\"submit\">Delete</button>\n              </form>\n            </div>\n          )}\n        </Mutation>\n      )\n    } else if (this.props.user === currentUser().username) {\n      return (\n        <Mutation\n          mutation={DELETE_COMMENT}\n          refetchQueries={() => {\n            return [\n              {\n                query: FETCH_VIDEO, variables: { id: this.props.videoId }\n              }\n            ];\n          }}\n        >\n          {(deleteComment, { data }) => (\n            <div>\n              <form className=\"delete-button\" onSubmit={e => this.handleSubmit2(e, deleteComment)}>\n                <button type=\"submit\">Delete</button>\n              </form>\n            </div>\n          )}\n        </Mutation>\n      )\n    } else {\n      return <div></div>\n    }\n  }\n}\n\nexport default CommentRootDelete;\n","import React from 'react';\nimport CommentReplyIndex from \"./CommentReplyIndex\";\nimport CommentReplyCreate from \"./CommentReplyCreate\";\nimport CommentRootDelete from \"./CommentRootDelete\";\nimport EditComment from \"./EditComment\";\nimport { currentUser } from '../../util/util';\n\n\nconst handleToggle = (e, commentName) => {\n  e.preventDefault();\n\n  let commentOptions = document.getElementById(commentName);\n\n  if (commentOptions) {\n    commentOptions.classList.toggle(\"show\");\n  }\n}\n\nconst editOptions = (parentId, props) => {\n  const commentName = props.comment._id; \n\n  if (currentUser() && currentUser().username === parentId) {\n    return (\n      <div className=\"options-popup\">\n        <i onClick={(e) => handleToggle(e, commentName)} className=\"fas fa-ellipsis-h edit-button-font\"></i>\n        <div className=\"optionstext\" id={commentName}>\n          <EditComment videoId={props.videoId} comment={props.comment} />\n          <CommentRootDelete comment={props.comment} commentId={props.comment._id} videoId={props.videoId} user={props.comment.author.username} />\n          </div>\n    </div>\n    )} else {\n      return (<div></div>)\n    } \n}\n\nconst CommentIndexItem = props => {\n    const date = new Date(+props.comment.date);\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const day = date.getDate();\n    const commentName = props.comment._id; \n    const profileSrc = props.comment.author.image ? props.comment.author.image: \"/stylesheets/images/default_avatar_2.png\";\n    const gif = props.comment.gif ? <img alt={props.comment.text} className=\"main-comment-gif\" src={props.comment.gif} />: null\n    const author = props.comment.author.username; \nif (props.comment.text !== \"!(!DELETE!)!\" ) {\n    \n    return (\n          <div className=\"main-comment-index\">\n           <div className=\"main-comment-top\">\n              <img src={profileSrc} className=\"comment-create-avatar\" />\n              <div className=\"main-comment-name\">{props.comment.author.username}</div>\n              <div className=\"edit-comment\">\n                <div className=\"main-comment-year\">{year + \"-\" + month + \"-\" + day }</div>\n                {editOptions(author, props)}\n              </div>\n           </div>\n            <div className=\"main-comment-text\">{props.comment.text}</div>\n            {gif}\n            <div className=\"comment-index-reply\">\n              <CommentReplyCreate parentId={props.comment._id} videoId={props.videoId}/>\n            </div>\n\n            <div className=\"comment-reply-index\">\n              <CommentReplyIndex commentId={props.comment._id} videoId={props.videoId}/>\n            </div>  \n\n          </div>\n  )\n    } else {\n      return (\n        <div>\n          <div className=\"deleted-comment\">Comment has been deleted</div>\n          <div className=\"comment-reply-index\"><CommentReplyIndex commentId={props.comment._id} videoId={props.videoId} /></div>\n        </div>\n      )\n    }\n}\n\nexport default CommentIndexItem;","import React from 'react';\nimport CommentIndexItem from \"./CommentIndexItem\";\nimport {Query} from \"react-apollo\";\nimport Queries from '../../graphql/queries';\n\nconst { FETCH_VIDEO } = Queries;\n\nclass CommentIndex extends React.Component {\n \n\n  render () {\n  \n   return <Query query={FETCH_VIDEO} variables={{ id: this.props.videoId }}>\n      {({ loading, error, data }) => {\n        if (loading) return <p>Loading...</p>;\n        if (error) return <p>Error</p>;\n      \n       const comments = data.video.comments.map((comment) => { \n        \n         return <div>\n                  <CommentIndexItem comment={comment} videoId={this.props.videoId}/> \n               </div>\n          })\n      // let comments = [];\n      //  for (let i = data.video.comments.length - 1; i >= 0; i--) {\n      //    let comment = data.video.comments[i];\n      //    comments.push(<div><CommentIndexItem comment={comment} videoId={this.props.videoId} /></div>)\n      // }\n    return <div className=\"comment-index\">\n              {comments}\n           </div>\n\n  }}\n  </Query>\n  }\n}\n\nexport default CommentIndex;\n\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Queries from '../../graphql/queries';\nimport { graphql } from 'react-apollo';\nimport Mutations from \"../../graphql/mutations\";\nimport { Mutation } from \"react-apollo\";\nimport { currentUser } from \"../../util/util\";\nconst { FETCH_VIDEO } = Queries;\nconst { ADD_VIDEO_LIKE } = Mutations;\nconst { REMOVE_VIDEO_LIKE } = Mutations;\nconst { ADD_VIDEO_DISLIKE } = Mutations;\nconst { REMOVE_VIDEO_DISLIKE } = Mutations;\n\nclass LikeDislike extends React.Component {\n  constructor(props) {\n\n    super(props);\n\n    this.state = {\n      currentUser: currentUser(),\n      hasLiked: false\n    }\n    this.hasLiked = this.hasLiked.bind(this);\n  }\n\n  handleLike(e, VideoLike) {\n\n    e.preventDefault();\n\n    VideoLike({\n      variables: {\n        videoId: this.props.videoId,\n        userId: this.state.currentUser.id\n      }\n    })\n      .then(data => {\n        this.setState({ hasLiked: true })\n      })\n  };\n\n  handleRemoveLike(e, VideoRemoveLike) {\n\n    e.preventDefault();\n\n    VideoRemoveLike({\n      variables: {\n        videoId: this.props.videoId,\n        userId: this.state.currentUser.id\n      }\n    })\n      .then(data => {\n        this.setState({ hasLiked: false })\n      })\n  };\n\n  handleDislike(e, VideoDislike) {\n\n    e.preventDefault();\n\n    VideoDislike({\n      variables: {\n        videoId: this.props.videoId,\n        userId: this.state.currentUser.id\n      }\n    })\n      .then(data => {\n        this.setState({ hasDisliked: true })\n      })\n  };\n\n  handleRemoveDislike(e, VideoRemoveDislike) {\n\n    e.preventDefault();\n\n    VideoRemoveDislike({\n      variables: {\n        videoId: this.props.videoId,\n        userId: this.state.currentUser.id\n      }\n    })\n      .then(data => {\n        this.setState({ hasDisliked: false })\n      })\n  };\n\n  updateCache(cache, data) {\n\n    const addVideoLike = data.data.addVideoLike;\n    const removeVideoLike = data.data.removeVideoLike;\n    const addVideoDislike = data.data.addVideoDislike;\n    const removeVideoDislike = data.data.removeVideoDislike;\n    let video;\n    try {\n      video = cache.readQuery({ query: FETCH_VIDEO, variables: { id: this.props.videoId } });\n    } catch (err) {\n      return;\n    }\n\n    if (video && addVideoLike) {\n\n      let likeArray = video.video.likes;\n      let dislikeArray = video.video.dislikes;\n      for (let i = 0; i < dislikeArray.length; i++) {\n        const el = dislikeArray[i];\n        if (el._id === addVideoLike._id) {\n          dislikeArray.splice(i, 1);\n        }\n      }\n      video = Object.assign({}, video.video, { likes: likeArray.concat(addVideoLike), dislikes: dislikeArray })\n      cache.writeQuery({\n        query: FETCH_VIDEO,\n        variables: { id: this.props.videoId },\n        data: { video: video }\n      });\n    } else if (video && removeVideoLike) {\n      let likeArray = video.video.likes;\n      for (let i = 0; i < likeArray.length; i++) {\n        const el = likeArray[i];\n        if (el._id === removeVideoLike._id) {\n          likeArray.splice(i, 1);\n        }\n      } \n\n      video = Object.assign({}, video.video, { likes: likeArray })\n\n      cache.writeQuery({\n        query: FETCH_VIDEO,\n        variables: { id: this.props.videoId },\n        data: { video: video }\n      });\n    } else if (video && addVideoDislike) {\n\n      let dislikeArray = video.video.dislikes;\n      let likeArray = video.video.likes;\n      for (let i = 0; i < likeArray.length; i++) {\n        const el = likeArray[i];\n        if (el._id === addVideoDislike._id) {\n          likeArray.splice(i, 1);\n        }\n      }\n      video = Object.assign({}, video.video, { likes: likeArray, dislikes: dislikeArray.concat(addVideoDislike) })\n      cache.writeQuery({\n        query: FETCH_VIDEO,\n        variables: { id: this.props.videoId },\n        data: { video: video }\n      });\n    } else if (video && removeVideoDislike) {\n      let dislikeArray = video.video.dislikes;\n      for (let i = 0; i < dislikeArray.length; i++) {\n        const el = dislikeArray[i];\n        if (el._id === removeVideoDislike._id) {\n          dislikeArray.splice(i, 1);\n        }\n      }\n\n      video = Object.assign({}, video.video, { dislikes: dislikeArray })\n\n      cache.writeQuery({\n        query: FETCH_VIDEO,\n        variables: { id: this.props.videoId },\n        data: { video: video }\n      });\n    }\n    this.hasLiked();\n  }\n\n  getLikeCount() {\n    let countLike = this.props.likes.length;\n\n    if (countLike === 0) {\n      return <p>No likes</p>\n    } else if (countLike === 1) {\n      return <p>1 like</p>\n    } else {\n      return <p>{countLike} likes</p>\n    }\n  }\n\n  getDislikeCount() {\n    let countDislike = this.props.dislikes.length;\n\n    if (countDislike === 0) {\n      return <p>No dislikes</p>\n    } else if (countDislike === 1) {\n      return <p>1 dislike</p>\n    } else {\n      return <p>{countDislike} dislikes</p>\n    }\n  }\n\n\n  handleToggle(e) {\n    e.preventDefault();\n    var popup = document.getElementById(\"myPopup\");\n\n    if (popup) {\n      popup.classList.toggle(\"show\");\n    }\n  }\n\n  hasLiked() {\n    const dislikes = this.props.dislikes;\n    const likes = this.props.likes;\n    const user = currentUser();\n    if (!user) {\n      return (\n        <div className=\"like-bar\">\n        <div className=\"popup like-display\" onClick={(e) => this.handleToggle(e)}><i className=\"far fa-thumbs-up unliked-thumb\"></i>{this.getLikeCount()}\n            <div className=\"dislike-display\"><i className=\"far fa-thumbs-down unliked-thumb\"></i>{this.getDislikeCount()}</div> \n          <div class=\"popuptext\" id=\"myPopup\"><Link className=\"like-sign-in\" to=\"/login\">Sign in!</Link></div>\n        </div>\n        </div>\n      )\n    }\n\n\n    let liked;\n    for (let i = 0; i < likes.length; i++) {\n      if (likes[i]._id === this.state.currentUser.id) {\n        liked = true;\n        break;\n      } else {\n        liked = false;\n      }\n\n    }\n    let disliked;\n    for (let i = 0; i < dislikes.length; i++) {\n      if (dislikes[i]._id === this.state.currentUser.id) {\n        disliked = true;\n        break;\n      } else {\n        disliked = false;\n      }\n    }\n\n    if (!liked && !disliked) {\n      return (\n      <div className=\"like-bar\">\n        <Mutation\n          mutation={ADD_VIDEO_LIKE}\n          update={(cache, data) => this.updateCache(cache, data)}\n        >\n          {(VideoLike, { data }) => {\n            return (\n              <div>\n                <form className=\"like-display\" onSubmit={(e) => this.handleLike(e, VideoLike)}>\n                  <button type=\"submit\"><i class=\"far fa-thumbs-up unliked-thumb\"></i></button>\n                  {this.getLikeCount()}\n                </form>\n              </div>\n            )\n          }}\n        </Mutation>\n        <Mutation\n            mutation={ADD_VIDEO_DISLIKE}\n            update={(cache, data) => this.updateCache(cache, data)}\n          >\n            {(VideoDislike, { data }) => {\n              return (\n                <div>\n                  <form className=\"dislike-display\" onSubmit={(e) => this.handleDislike(e, VideoDislike)}>\n                    <button type=\"submit\"><i class=\"far fa-thumbs-down unliked-thumb\"></i></button>\n                    {this.getDislikeCount()}\n                  </form>\n                </div>\n              )\n            }}\n          </Mutation>\n        </div>)\n    } else if (liked && !disliked) {\n      return (<div className=\"like-bar\">\n        <Mutation\n          mutation={REMOVE_VIDEO_LIKE}\n          update={(cache, data) => this.updateCache(cache, data)}\n        >\n          {(VideoRemoveLike, { data }) => {\n            return (\n              <div>\n                <form className=\"like-display\" onSubmit={(e) => this.handleRemoveLike(e, VideoRemoveLike)}>\n                  <button type=\"submit\"><i className=\"far fa-thumbs-up liked-thumb\"></i></button>\n                  {this.getLikeCount()}\n                </form>\n              </div>\n            )\n          }}\n        </Mutation>\n        <Mutation\n          mutation={ADD_VIDEO_DISLIKE}\n          update={(cache, data) => this.updateCache(cache, data)}\n        >\n          {(VideoDislike, { data }) => {\n            return (\n              <div>\n                <form className=\"dislike-display\" onSubmit={(e) => this.handleDislike(e, VideoDislike)}>\n                  <button type=\"submit\"><i class=\"far fa-thumbs-down unliked-thumb\"></i></button>\n                  {this.getDislikeCount()}\n                </form>\n              </div>\n            )\n          }}\n        </Mutation>\n      </div>)\n    } else if (!liked && disliked) {\n      return (<div className=\"like-bar\">\n        <Mutation\n          mutation={ADD_VIDEO_LIKE}\n          update={(cache, data) => this.updateCache(cache, data)}\n        >\n          {(VideoLike, { data }) => {\n            return (\n              <div>\n                <form className=\"like-display\" onSubmit={(e) => this.handleLike(e, VideoLike)}>\n                  <button type=\"submit\"><i class=\"far fa-thumbs-up unliked-thumb\"></i></button>\n                  {this.getLikeCount()}\n                </form>\n              </div>\n            )\n          }}\n        </Mutation>\n        <Mutation\n          mutation={REMOVE_VIDEO_DISLIKE}\n          update={(cache, data) => this.updateCache(cache, data)}\n        >\n          {(VideoRemoveDislike, { data }) => {\n            return (\n              <div>\n                <form className=\"dislike-display\" onSubmit={(e) => this.handleRemoveDislike(e, VideoRemoveDislike)}>\n                  <button type=\"submit\"><i className=\"far fa-thumbs-down liked-thumb\"></i></button>\n                  {this.getDislikeCount()}\n                </form>\n              </div>\n            )\n          }}\n        </Mutation>\n      </div>)\n    }\n\n  }\n\n  render() {\n    return (\n      <div>\n        {this.hasLiked()}\n      </div>\n    )\n  }\n}\n\nexport default graphql(FETCH_VIDEO)(LikeDislike); ","import React from 'react';\nimport LikeDislike from \"./LikeDislike\";\nimport { Query } from \"react-apollo\";\nimport Queries from '../../graphql/queries';\nimport { currentUser } from \"../../util/util\";\nconst { FETCH_VIDEO } = Queries;\n\nclass LikeVideo extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      currentUser: currentUser(),\n      hasLiked: false\n    }\n\n  }\n\n  \n  render() {\n\n    return <Query query={FETCH_VIDEO} variables={{ id: this.props.videoId }}>\n      {({ loading, error, data }) => {\n        if (loading) return <p>Loading...</p>;\n        if (error) return <p>Error</p>;\n        const likes = data.video.likes; \n        const dislikes = data.video.dislikes; \n        return (\n        <div className=\"like-bar\">\n          <LikeDislike likes={likes} dislikes={dislikes} videoId={this.props.videoId} /> \n        </div>\n        )     \n      }}\n    </Query>\n  }\n}\n\nexport default LikeVideo;","import React, { Component } from 'react';\nimport Queries from '../../graphql/queries';\nimport { graphql } from 'react-apollo';\nimport { Link } from 'react-router-dom';\nconst { FETCH_VIDEOS } = Queries;\n\nclass MiniIndex extends Component {\n  renderVideos() { \n    let miniIndex = this.props.data.videos.slice((this.props.data.videos.length) - 5); \n    \n    return miniIndex.map((\n      { _id, title, url }) => {\n      return (\n        <div key={_id} className=\"mini-video-container\">\n          <div className=\"mini-vid-player\">\n            <object className=\"mini-video-player\">\n              <param name=\"movie\" value={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0`}></param>\n              <param name=\"allowFullScreen\" value=\"true\"></param>\n              <param name=\"allowscriptaccess\" value=\"always\"></param>\n              <embed src={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0`}\n                type=\"application/x-shockwave-flash\"\n                className=\"video-player\" allowscriptaccess=\"always\" allowFullScreen={true}></embed>\n            </object>\n          </div>\n          <div className=\"mini-video-info\">\n            <Link to={`/videos/${_id}`}>\n              <p className=\"mini-video-title clickable\">\n                {title}\n              </p>\n            </Link>\n          </div>\n        </div>\n      );\n    });\n  }\n\n  render() {\n    if (this.props.data.loading || !this.props.data.videos) {\n      return null;\n    }\n    return (\n      <div>\n        <div className=\"mini-container\">\n          <div className=\"flex-grid\">\n            <section className=\"main\">\n              <p className=\"mini-index-title\">Videos For You</p>\n              <div className=\"col\">\n                {this.renderVideos()}\n              </div>\n            </section>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n\nexport default graphql(FETCH_VIDEOS, {\n  options: (props) => { return { variables: { criteria: undefined, perPage: 0, pageNumber: 0 } } }\n})(MiniIndex);\n\n// export default graphql(FETCH_VIDEOS)(MiniIndex);","import React from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport Mutations from \"../../graphql/mutations\";\nimport Queries from '../../graphql/queries';\nimport {currentUser} from \"../../util/util\";\nimport {withRouter} from \"react-router-dom\";\nimport Picker from 'react-giphy-component';\n\n\nconst { FETCH_VIDEO } = Queries;\nconst {VIDEO_COMMENT} = Mutations;\n\nclass CommentCreate extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      text: \"\",\n      gif: \"\",\n      error: \"\"\n    }\n\n  }\n\n  handleToggle(e) {\n    if (e) {\n      e.preventDefault();\n    }\n    var giphy = document.getElementById(\"myGiphy\");\n\n    if (giphy) {\n      giphy.classList.toggle(\"show\");\n    }\n  }\n\n  handleSubmitToggle() {\n    var giphy = document.getElementById(\"myGiphy\");\n\n    if (giphy && giphy.classList.contains(\"show\")) {\n      giphy.classList.toggle(\"show\");\n    }\n  }\n\n  update(field) {\n    return e => {\n      this.setState({ [field]: e.target.value })\n    }\n  }\n\n  handleSubmit(e, addVideoComment) {\n    e.preventDefault();\n    let text = this.state.text;\n    let gif = this.state.gif;\n\n    if (this.state.text === \"\") {\n      this.setState({ error: \"GraphQL error: Cannot return null for non-nullable field CommentType.text.\" })\n      return\n    }\n\n    addVideoComment({\n      variables: {\n        text: text,\n        author: currentUser().id,\n        videoId: this.props.videoId,\n        gif: gif\n      }\n    })\n      .then(data => {\n        this.setState({\n          text: \"\",\n          gif: \"\",\n          error: \"\"\n        })\n        \n      }).then(data => {\n        if (gif) {\n          this.handleSubmitToggle()\n        }\n      })\n  };\n\n  updateCache(cache, { data: { addVideoComment } }) {\n    let video;\n    try {\n      video = cache.readQuery({ query: FETCH_VIDEO, variables: {id: this.props.videoId} });\n    } catch (err) {\n      return;\n    }\n    \n    if (video) {\n     \n      let commentArray = video.video.comments;\n      video = Object.assign({}, video.video, {comments: commentArray.concat(addVideoComment)})\n\n      cache.writeQuery({\n        query: FETCH_VIDEO,\n        variables: {id: this.props.videoId},\n        data: { video: video }\n      });\n    }\n  }\n\n  updategif (gif) {\n    this.setState({ gif: gif.downsized.url})\n  }\n\n  render() {\n    const user = currentUser();\n    const profileSrc = user && user.image ? user.image : \"/stylesheets/images/default_avatar_2.png\";\n   \n    if (!user) {\n      return <div className=\"create-form-1\"> \n      <img src={profileSrc} className=\"comment-create-avatar\" />\n      <input\n        className=\"comment-create-input\"\n        value={this.state.text}\n        placeholder=\"Must Be Signed In to Comment\"\n      />\n      </div>\n    } else {\n      let error;\n      if (this.state.error === \"GraphQL error: Cannot return null for non-nullable field CommentType.text.\") {\n        error = \"Comment must have text\"\n      }\n      return (\n      <Mutation\n        onError={error => { this.setState({error: error.message})}}\n        mutation={VIDEO_COMMENT}\n        update={(cache, data) => this.updateCache(cache, data)}\n      >\n        {(addVideoComment, { data }) => (\n          <div className=\"create-form\">\n            <div className=\"comment-create-position\">\n              <img src={profileSrc} className=\"comment-create-avatar\" />\n               <form className=\"comment-submit-form\" onSubmit={e => this.handleSubmit(e, addVideoComment)}>\n               <input \n                  type=\"text-area\"\n                  className=\"comment-create-input\"\n                  value={this.state.text}\n                  onChange={this.update(\"text\")}\n                  placeholder={`Commenting publicly as ${currentUser().username}`}\n               />\n               <div>{error}</div>\n               <div className=\"comment-create-buttons\">\n                 <div className=\"comment-create-btns\">\n                      <div className=\"gif-popup\">\n                        <button className=\"create-comment-button\" onClick={(e) => this.handleToggle(e)}>Gif</button>\n                        <div className=\"giftext\" id=\"myGiphy\">\n                          \n                          <Picker id=\"giphy-picker\" apiKey=\"EeZhW081PZQ2Abce60Y4EQulHVTzcbRA\" onSelected={this.updategif.bind(this)} /> \n                        </div>\n                      </div>\n                   <button className=\"create-comment-button\" type=\"submit\">Comment</button>\n                 </div>\n                  \n               </div>\n               </form>\n            </div>\n            \n            </div>\n        )}\n      </Mutation>\n    )};\n  }\n}\n\nexport default withRouter(CommentCreate);","import React, { Component } from 'react';\nimport { currentUser } from \"../../util/util\";\nimport Mutations from \"../../graphql/mutations\";\nimport Query from \"../../graphql/queries\";\nimport { Mutation } from \"react-apollo\";\nimport { Link } from 'react-router-dom';\nconst { ADD_TO_FAVORITES, REMOVE_FROM_FAVORITES } = Mutations;\nconst { FETCH_VIDEO, FETCH_USER_FAVORITE_VIDEOS } = Query;\nclass Favorite extends Component {\n\n  handleAddRemoveFavorite(e, func) {\n    e.preventDefault();\n    func({\n      variables: {\n        videoId: this.props.video._id,\n        userId: currentUser().id\n      }\n    });\n  };\n\n  handleToggle(e) {\n    e.preventDefault();\n    var popup = document.getElementById(\"myPopup2\");\n    if (popup) {\n      popup.classList.toggle(\"show\");\n    }\n  }\n\n  renderFavorite() {\n    if (!currentUser() || !currentUser().id) {\n      return (\n        <div className=\"popup2\" onClick={(e) => this.handleToggle(e)}><i className=\"fas far fa-heart\"></i>\n          <div className=\"popuptext2\" id=\"myPopup2\"><Link className=\"like-sign-in\" to=\"/login\">Sign in!</Link></div>\n        </div>\n      )\n    }\n    return (\n      (<Mutation mutation={ADD_TO_FAVORITES} refetchQueries={() => {\n        return [{ query: FETCH_VIDEO, variables: { id: this.props.video._id } }, { query: FETCH_USER_FAVORITE_VIDEOS, variables: { id: currentUser().id } }];\n      }}>\n        {(AddToFavorites, { loading, error, data  }) => {\n          if (loading) return <i class=\"fas fa-spinner\"></i>\n          if(error)return <p>Error :( Please try again</p>\n          return (\n            <i className=\"far fa-heart\" style={{cursor: 'pointer'}}\n            onClick={(e) => this.handleAddRemoveFavorite(e, AddToFavorites)}></i>)\n        }}\n      </Mutation>\n      )\n    )\n  }\n\n  renderUnFavorite() {\n    return (\n      (<Mutation mutation={REMOVE_FROM_FAVORITES} refetchQueries={() => {\n          return [{ query: FETCH_VIDEO, variables: { id: this.props.video._id } }];\n        }}>\n        {(RemoveFromFavorites, { loading, error, data  }) => {\n          if (loading) return <i class=\"fas fa-spinner\"></i>\n          if (error) return <p>Error :( Please try again</p>\n          return (  \n            <i className=\"fas fa-heart fav-heart\" style={{cursor:'pointer'}}\n              onClick={(e) => this.handleAddRemoveFavorite(e, RemoveFromFavorites)}></i>\n          )\n        }}\n      </Mutation>\n      )\n    )\n  }\n\n  render() {\n    let inUserFavorites = [];\n    if (currentUser() && currentUser().id) {\n      let userId = currentUser().id;\n      inUserFavorites = this.props.video.favoriteBy.filter(user => user._id.toString() === userId);\n    }\n    return (\n      <>\n        {inUserFavorites.length === 0 ?\n          (this.renderFavorite()\n          ) : (\n            this.renderUnFavorite()\n          )}\n      </>\n    );\n  }\n}\n\nexport default Favorite;","import React from 'react';\nimport Queries from '../../graphql/queries';\nimport { graphql } from 'react-apollo';\nimport CommentIndex from \"../Comments/CommentIndex\";\nimport LikeVideo from \"../Like/LikeVideo\";\nimport MiniIndex from './MiniIndex';\nimport CommentCreate from \"../Comments/CommentCreate\";\nimport SideBar from '../ui/SideBar';\nimport MiniSideBar from '../ui/MiniSideBar';\nimport Favorite from '../favorite/Favorite';\nimport NavBar from '../NavBar';\n\n\nconst{FETCH_VIDEO_LIKES} = Queries; \nconst {FETCH_VIDEO} = Queries;\n\n\nclass VideoDetail extends React.Component {\n\n  renderVideoDetail() {\n    const { _id, title, url, description, comments, favoriteBy } = this.props.data.video;\n    return (\n      <div key={_id}>\n        <div className=\"video-detail-main\">\n          <div className=\"detail-left-col\">\n            <object className=\"video-detail-player\">\n              <param name=\"movie\" value={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0`}></param>\n              <param name=\"allowFullScreen\" value=\"true\"></param>\n              <param name=\"allowscriptaccess\" value=\"always\"></param>\n              <embed src={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0`}\n                type=\"application/x-shockwave-flash\"\n                className=\"video-player\" allowscriptaccess=\"always\" allowFullScreen={true}></embed>\n            </object>\n            <div className=\"video-title-detail\">\n              <h3>{title}</h3>\n            </div>\n            <div className=\"video-info-detail\">\n              <div className=\"detail-comments-favs\">\n              <p>{comments.length} <i class=\"far fa-comments\"></i></p>\n              <p className=\"video-fav-detail\">{favoriteBy.length} <Favorite video={this.props.data.video} /></p>\n              </div>\n            <div className=\"rate-likes\">\n                <LikeVideo videoId={this.props.data.video._id} video={this.props.data.video} />\n            </div>\n            </div>\n            <div className=\"video-description-detail\">\n              <p className=\"video-description-body\">{description}</p>\n            </div>\n              <h1 className=\"video-comments\">Comments</h1>\n              <div className=\"commentCreate\">\n                <CommentCreate videoId={this.props.data.video._id} />\n              </div>\n              <div className=\"commentIndex\">\n                <CommentIndex videoId={this.props.data.video._id} />\n              </div> \n        </div>\n          <MiniIndex className=\"mini-index\"/>\n        </div>\n      </div>\n    );\n  }\n\n  updateCache(cache, { data: { newLike } }) {\n\n    let likes;\n    try {\n      likes = cache.readQuery({ query: FETCH_VIDEO_LIKES, variables: { id: this.props.data.video._id } });\n    } catch (err) {\n      return;\n    }\n    if (likes) {\n      let likesArray = likes.likes;\n      cache.writeQuery({\n        query: FETCH_VIDEO_LIKES,\n        data: { likes: likesArray.concat(newLike) }\n      });\n    }\n  }\n\n  render() {\n    if (this.props.data.loading || !this.props.data.video) {\n      return null;\n    }\n\n    return (\n      <div>\n        <NavBar />\n        <div className=\"container\">\n          <div className=\"flex-grid\">\n              <MiniSideBar />\n              <SideBar />\n           <section className=\"detail-main\">\n              <div className=\"row\">{this.renderVideoDetail()}</div> \n           </section> \n          </div>\n        </div>\n      </div>\n      \n    );\n  }\n}\n\n\nexport default graphql(FETCH_VIDEO, {\n  options: (props) => { return { variables: { id: props.match.params.id } } }\n})(VideoDetail);","import React, { Component } from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport Mutations from \"../../graphql/mutations\";\nimport { Link } from \"react-router-dom\";\n\nconst {REGISTER_USER} = Mutations;\n\nclass Register extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      password2: \"\",\n      image: \"/stylesheets/images/default_avatar_2.png\",\n      error: \"\"\n    };\n  }\n\n  update(field) {\n    return e => this.setState({ [field]: e.target.value });\n  }\n\n  updateCache(client, { data }) {\n    client.writeData({\n      data: { isLoggedIn: data.register.loggedIn }\n    });\n  }\n\n  updateImage = (e) => {\n    if (e.target.files.length === 0) {\n      return;\n    }\n    let file = e.target.files[0];\n    let reader = new FileReader();\n    reader.onloadend = (e) => {\n      this.setState({image: reader.result});\n    };\n    reader.readAsDataURL(file);\n  }\n\n  render() {\n\n    let src = localStorage.theme === \"dark\" ? window.darkTheme : window.lightTheme;\n\n    let error;\n    if (this.state.error === \"please fill in missing fields\") {\n      error = \"Please fill in missing fields\"\n    } else if (this.state.error === \"GraphQL error: Email is invalid\") {\n      error = \"Invalid email\"\n    } else if (this.state.error === \"GraphQL error: This user already exists\") {\n      error = \"User already exists\"\n    } else if (this.state.error === \"GraphQL error: This username already exists\") {\n      error = \"Username already exists\"\n    } else if (this.state.error === \"GraphQL error: Passwords do not match\") {\n      error = \"Passwords do not match\"\n    }\n\n    return (\n      <Mutation\n        onError={error => {  this.setState({ error: error.message }) }}\n        mutation={REGISTER_USER}\n        onCompleted={data => {\n          const { token, _id, username, image, email } = data.register;\n          localStorage.setItem(\"auth-token\", token);\n          localStorage.setItem(\"user\", JSON.stringify({ id: _id, username, image, email }));\n        }}\n        update={(client, data) => this.updateCache(client, data)}\n      >\n        {registerUser => (\n          <div className=\"sign-up-form-page\">\n              <form\n                className=\"sign-up-form\"\n                onSubmit={e => {\n                  e.preventDefault();\n                  if (this.state.password === \"\" || this.state.username === \"\" || this.state.email === \"\" || this.state.password2 === \"\") {\n                    this.setState({ error: \"please fill in missing fields\" })\n                    return\n                  } \n                  registerUser({\n                    variables: {\n                      username: this.state.username,\n                      email: this.state.email,\n                      password: this.state.password,\n                      password2: this.state.password2,\n                      image: this.state.image\n                    }\n                  });\n                }}\n              >\n                <Link to=\"/\"><img className=\"signup-logo\" src={src} alt=\"signup\"/></Link>\n                <p className=\"form-title\">Create your PalTube Account</p>\n                <div>{error}</div>\n                <input\n                  value={this.state.username}\n                  onChange={this.update(\"username\")}\n                  placeholder=\"Username\"\n                  className=\"signup-username\"\n                />\n                <input\n                  value={this.state.email}\n                  onChange={this.update(\"email\")}\n                  placeholder=\"Email\"\n                  className=\"signup-email\"\n                />\n                <input\n                  value={this.state.password}\n                  onChange={this.update(\"password\")}\n                  type=\"password\"\n                  placeholder=\"Password\"\n                  className=\"signup-password\"\n                />\n                <input\n                  value={this.state.password2}\n                  onChange={this.update(\"password2\")}\n                  type=\"password\"\n                  placeholder=\"Confirm\"\n                  className=\"signup-password2\"\n                />\n              <input type=\"file\" onChange={this.updateImage} className=\"signup-password2\"/>\n              \n                <div className=\"signup-direct\">\n                  <Link to=\"/login\" className=\"link-login\">Sign in instead</Link>\n                  <button type=\"submit\" className=\"signup-button\">Sign up</button>\n                </div> \n              </form>\n              <div className=\"signup-pic\">\n              <img src={this.state.image} className=\"signup-avatar\"/>\n                <img src=\"/stylesheets/images/signuppic.png\" alt=\"signup\" />\n                <p className=\"signup-pic-info\">Join. Watch. Laugh.</p>\n              </div>\n          </div>\n        )}\n      </Mutation>\n    );\n  }\n}\n\nexport default Register;\n\n","import React, { Component } from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport Mutations from \"../../graphql/mutations\";\nimport { Link } from \"react-router-dom\";\nconst { LOGIN_USER } = Mutations;\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      emailOrUsername: \"\",\n      password: \"\",\n      error: \"\"\n    };\n\n    this.handleDemoSubmit = this.handleDemoSubmit.bind(this);\n  }\n\n  update(field) {\n    return e => this.setState({ [field]: e.target.value });\n  }\n\n  demoEffect(demoUser, loginUser) {\n    const that = this;\n    let index = 0;\n    const demoIntervalId = setInterval(() => {\n      if (index < demoUser.emailOrUsername.length) {\n        that.setState({\n          emailOrUsername: this.state.emailOrUsername + demoUser.emailOrUsername[index]\n        })\n      }\n      if (index < demoUser.password.length) {\n        that.setState({\n          password: this.state.password + demoUser.password[index]\n        })\n      }\n      index++;\n      if (index > demoUser.password.length && index > demoUser.emailOrUsername.length) {\n        clearInterval(demoIntervalId);\n        loginUser({ variables: demoUser }).then(() => this.props.history.push(\"/\"));\n      }\n    }, 200)\n  }\n\n  handleDemoSubmit(e, loginUser) {\n    e.preventDefault();\n    const demoUser = { emailOrUsername: \"GuestUser\", password: \"password\" };\n    this.demoEffect(demoUser, loginUser)\n    \n  }\n\n  updateCache(client, { data }) {\n    client.writeData({\n      data: { isLoggedIn: data.login.loggedIn }\n    });\n  }\n\n  render() {\n\n    let src = localStorage.theme === \"dark\" ? window.darkTheme : window.lightTheme;\n\n    let error;\n    if (this.state.error === \"password and username is required\" ) {\n      error = \"password and username is required\" \n    } else if (this.state.error === \"password is required\") {\n      error = \"password is required\" \n    } else if (this.state.error === \"username is required\") {\n      error = \"username is required\"\n    } else if (this.state.error === \"GraphQL error: Incorrect log in combination\") {\n      error = \"Incorrect log in combination\"\n    }\n\n    return (\n      <Mutation\n        onError={error => { this.setState({ error: error.message }) }}\n        mutation={LOGIN_USER}\n        onCompleted={data => {\n          const { token, _id, username, image, email } = data.login;\n          localStorage.setItem(\"auth-token\", token);\n          localStorage.setItem(\"user\", JSON.stringify({id: _id, username, image, email}));\n          this.props.history.push(\"/\");\n        }}\n        update={(client, data) => this.updateCache(client, data)}\n      >\n        {loginUser => (\n          <div className=\"login-form-page\">\n            <div className=\"login-pic\">\n              <img src=\"/stylesheets/images/loginpic.png\" alt=\"login\"/>\n              <p className=\"login-pic-info\">Welcome back to PalTube!</p>\n            </div>\n            <form\n              className=\"login-form\"\n              onSubmit={e => {\n                e.preventDefault();\n                if (this.state.password === \"\" && this.state.emailOrUsername === \"\") {\n                  this.setState({ error: \"password and username is required\" })\n                  return\n                } else if (this.state.password === \"\") {\n                  this.setState({ error: \"password is required\" })\n                  return\n                } else if (this.state.emailOrUsername === \"\") { \n                  this.setState({ error: \"username is required\" })\n                  return\n                };\n                loginUser({\n                  variables: {\n                    emailOrUsername: this.state.emailOrUsername,\n                    password: this.state.password\n                  }\n                });\n              }}\n            >\n              <Link to=\"/\"><img className=\"login-logo\" src={src} alt=\"login\"/></Link>\n              <p className=\"form-title\">Sign into your account</p>\n              <div>{error}</div>\n              <input\n                value={this.state.emailOrUsername}\n                onChange={this.update(\"emailOrUsername\")}\n                placeholder=\"Email or Username\"\n                className=\"login-email\"\n              />  \n              <input\n                value={this.state.password}\n                onChange={this.update(\"password\")}\n                type=\"password\"\n                placeholder=\"Password\"\n                className=\"login-password\"\n              />\n              <div className=\"login-direct\">\n                <button type=\"submit\" className=\"login-button\">Sign In</button>\n                <button onClick={(e) => this.handleDemoSubmit(e, loginUser)} type=\"submit\" className=\"demo-button\">Guest User</button>\n              </div> \n                <Link to=\"/register\" className=\"link-signup\">Sign up instead</Link>\n            </form>\n          </div>\n        )}\n      </Mutation>\n    );\n  }\n}\n\nexport default Login;","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { Query } from \"react-apollo\";\nimport Queries from \"../graphql/queries\";\nconst { IS_LOGGED_IN } = Queries;\n\nconst AuthRoute = ({\n  component: Component,\n  path,\n  exact,\n  routeType,\n  ...rest\n}) => (\n    <Query query={IS_LOGGED_IN}>\n      {({ data }) => {\n        if (routeType === \"auth\") {\n          return (\n            <Route\n              path={path}\n              exact={exact}\n              render={props =>\n                !data.isLoggedIn ? <Component {...props} /> : <Redirect to=\"/\" />\n              }\n            />\n          );\n        } else {\n          // otherwise this will be a protected route which will only\n          // render the component if the user is logged in\n          return (\n            <Route\n              {...rest}\n              render={props =>\n                data.isLoggedIn ? (\n                  <Component {...props} />\n                ) : (\n                    <Redirect to=\"/login\" />\n                  )\n              }\n            />\n          );\n        }\n      }}\n    </Query>\n  );\n\nexport default AuthRoute;","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Queries from '../../graphql/queries'\nimport { ApolloConsumer } from 'react-apollo';\nimport SideBar from '../ui/SideBar'\nimport NavBar from '../NavBar';\nimport MiniSideBar from '../ui/MiniSideBar'\nimport { withRouter } from 'react-router';\nconst { FETCH_VIDEOS } = Queries;\n\nclass VideoSearch extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      data: { videos: [] }, pageNumber: 0, perPage: 16,\n      loading: false, firstLoad: true, documentsFullyLoaded: false,\n      videosLength: 0,\n      criteria: undefined\n    }\n\n    this.props.history.listen((location, action) => {\n      this.setState({\n        data: { videos: [] }, pageNumber: 0, perPage: 16,\n        loading: false, firstLoad: true, documentsFullyLoaded: false,\n        videosLength: 0})\n      this.setState({ criteria: window.location.hash.split('/')[2] }, ()=>{\n        document.getElementById(\"btnLoad\").click();\n      })\n    });\n  }\n\n  getCriteria = () => {\n    return window.location.hash.split('/')[2];\n  }\n  renderSearchResult() {\n    if (this.state.loading) {\n      return <div className=\"video-index-loading-div\">loading...</div>\n    }\n    if (Object.values(this.state.data).length === 0) {\n      return null\n    }\n    return this.state.data.videos.map((\n      { _id, title, url, description, comments, favoriteBy }) => {\n      return (\n        <div className=\"search-results-container\" key={_id}>\n          <div className=\"video-detail-container \">\n            <object className=\"video-player\">\n              <param name=\"movie\" value={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0`}></param>\n              <param name=\"allowFullScreen\" value=\"true\"></param>\n              <param name=\"allowscriptaccess\" value=\"always\"></param>\n              <embed src={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0`}\n                type=\"application/x-shockwave-flash\"\n                className=\"video-player\" allowscriptaccess=\"always\" allowFullScreen={true}></embed>\n            </object>\n          </div>\n          <div className=\"video-detail-info-container\">\n            <Link to={`/videos/${_id}`}>\n              <p className=\"clickable\">\n                {title}\n              </p>\n            </Link>\n            <p>{description}</p>\n            <p>{comments.length} <i className=\"far fa-comments\"></i></p>\n            <p>{favoriteBy.length} <i className=\"fas fa-heart\"></i></p>\n          </div>\n        </div>\n      );\n    });\n  }\n\n  onVideosFetched = data => {\n    if (data.videos.length === 0) {\n      this.setState({ documentsFullyLoaded: true, loading: false });\n      return\n    }\n    let newPageNumber = this.state.pageNumber += 1;\n    const videos = this.state.data.videos.concat(data.videos);\n    this.setState({ data: { videos: videos } });\n    this.setState({ pageNumber: newPageNumber });\n    this.setState({ loading: false, firstLoad: false });\n  }\n\n\n  componentDidMount() {\n    this.setState({ criteria: window.location.hash.split('/')[2] }, () => {\n      document.getElementById(\"btnLoad\").click();\n    })\n    // document.getElementById(\"btnLoad\").click();\n    window.addEventListener('scroll', this.handleScroll, { passive: true });\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('scroll', this.handleScroll)\n  }\n\n  handleScroll = (event) => {\n    if (this.state.firstLoad || this.state.loading) {\n      return;\n    }\n    if (this.state.documentsFullyLoaded) {\n      window.removeEventListener('scroll', this.handleScroll)\n    }\n    if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {\n      document.getElementById(\"btnLoad\").click();\n    }\n  }\n\n  render() {\n    return (\n      <ApolloConsumer>\n        {client => (\n          <div id=\"scrollDiv\">\n            <NavBar />\n            <div className=\"container\">\n              <div className=\"flex-grid\">\n                <MiniSideBar />\n\n                <SideBar />\n                <section className=\"main\">\n                  <h3>Searching for {this.state.criteria}</h3>\n                  <div className=\"row\">\n                    {this.state.data && this.renderSearchResult(this.state.data)}\n                  </div>\n                  <div style={{ width: '1px', height: '1px' }}>\n                    <button style={{ width: '1px', height: '1px' }} id=\"btnLoad\" style={{ width: '100%', backgroundColor: 'darkgrey' }}\n                      onClick={async (e) => {\n                        e.preventDefault();\n                        this.setState({ loading: true });\n                        const { data } = await client.query({\n                          query: FETCH_VIDEOS,\n                          variables: { criteria: this.state.criteria, perPage: this.state.perPage, pageNumber: this.state.pageNumber },\n                          fetchPolicy: \"network-only\"\n                        });\n                        this.onVideosFetched(data);\n                      }}\n                    >\n                    </button>\n                  </div>\n                </section>\n              </div>\n            </div>\n          </div>\n        )}\n      </ApolloConsumer>\n    );\n  }\n}\n\nexport default withRouter(VideoSearch);\n\n// export default graphql(FETCH_VIDEOS, {\n//   options: (props) => { return { variables: { criteria: undefined, perPage: 0, pageNumber: 0 } } }\n// })(VideoIndex);","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Queries from '../../graphql/queries'\nimport { Query } from 'react-apollo';\nimport SideBar from '../ui/SideBar';\nimport MiniSideBar from '../ui/MiniSideBar';\nimport { currentUser } from \"../../util/util\";\nimport NavBar from '../NavBar'\nconst { FETCH_USER_LIKED_VIDEOS } = Queries;\n\nclass LikedVideos extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { videosLength: 0 }\n  }\n\n  renderVideos = () => {\n    let userId = currentUser().id;\n    \n    return (\n      <Query query={FETCH_USER_LIKED_VIDEOS} variables={{ id: userId }}\n        onCompleted={(data) => this.setState({ videosLength: data.user.videos_liked.length })}\n      >\n        {({ loading, error, data }) => {\n          if (loading) return \"Loading...\";\n          if (error) return `Error! ${error.message}`;\n          return (\n            data.user.videos_liked.map(({ _id, title, url, description, comments, favoriteBy }) => {\n              return (\n                <div className=\"search-results-container\" key={_id}>\n                  <div className=\"video-detail-container \">\n                    <object className=\"video-player\">\n                      <param name=\"movie\" value={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0`}></param>\n                      <param name=\"allowFullScreen\" value=\"true\"></param>\n                      <param name=\"allowscriptaccess\" value=\"always\"></param>\n                      <embed src={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0`}\n                        type=\"application/x-shockwave-flash\"\n                        className=\"video-player\" allowscriptaccess=\"always\" allowFullScreen={true}></embed>\n                    </object\n                    >\n                  </div>\n                  <div className=\"video-detail-info-container\">\n                    <Link to={`/videos/${_id}`}>\n                      <p className=\"clickable\">\n                        {title}\n                      </p>\n                    </Link>\n                    <p>{description}</p>\n                    <p>{comments.length} <i class=\"far fa-comments\"></i></p>\n                    <p>{favoriteBy.length} <i class=\"fas fa-heart\"></i></p>\n                  </div>\n                </div>\n              )\n            })\n          )\n        }}\n      </Query>\n    );\n  }\n  render() {\n    if (!currentUser()){\n      this.props.history.push('/login')\n    }\n    return (\n      <div className=\"container\">\n        <NavBar/>\n        <div className=\"flex-grid\">\n          <MiniSideBar />\n          <SideBar />\n          <section className=\"main\">\n            <div>\n              <h5>you have liked {this.state.videosLength} videos...</h5>\n              {this.renderVideos()}\n            </div>\n          </section>\n        </div>\n      </div>\n    );\n  }\n}\n\n\nexport default LikedVideos;","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Queries from '../../graphql/queries'\nimport { Query } from 'react-apollo';\nimport SideBar from '../ui/SideBar';\nimport MiniSideBar from '../ui/MiniSideBar';\nimport NavBar from '../NavBar';\n\nimport { currentUser } from \"../../util/util\";\nconst { FETCH_USER_FAVORITE_VIDEOS } = Queries;\n\nclass FavoriteVideos extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { videosLength: 0 }\n  }\n\n  renderVideos = () => {\n    let userId = currentUser().id;\n    return (\n      <Query query={FETCH_USER_FAVORITE_VIDEOS} variables={{ id: userId }}\n        onCompleted={(data) => this.setState({ videosLength: data.user.favoriteVideos.length })}>\n        {({ loading, error, data }) => {\n          if (loading) return \"Loading...\";\n          if (error) return `Error! ${error.message}`;\n          return (\n            data.user.favoriteVideos.map(({ _id, title, url, description, comments, favoriteBy }) => {\n              return (\n                <div className=\"search-results-container\" key={_id}>\n                  <div className=\"video-detail-container \">\n                    <object className=\"video-player\">\n                      <param name=\"movie\" value={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0`}></param>\n                      <param name=\"allowFullScreen\" value=\"true\"></param>\n                      <param name=\"allowscriptaccess\" value=\"always\"></param>\n                      <embed src={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0`}\n                        type=\"application/x-shockwave-flash\"\n                        className=\"video-player\" allowscriptaccess=\"always\" allowFullScreen={true}></embed>\n                    </object\n                    >\n                  </div>\n                  <div className=\"video-detail-info-container\">\n                    <Link to={`/videos/${_id}`}>\n                      <p className=\"clickable\">\n                        {title}\n                      </p>\n                    </Link>\n                    <p>{description}</p>\n                    <p>{comments.length} <i class=\"far fa-comments\"></i></p>\n                    <p>{favoriteBy.length} <i class=\"fas fa-heart\"></i></p>\n                  </div>\n                </div>\n              )\n            })\n          )\n        }}\n      </Query>\n    );\n  }\n  render() {\n    if (!currentUser()) {\n      this.props.history.push('/login')\n    }\n\n    return (\n      <div className=\"container\">\n        <NavBar />\n        <div className=\"flex-grid\">\n          <MiniSideBar />\n          <SideBar />\n          <section className=\"main\">\n            <div>\n              <h5>you have {this.state.videosLength} favorite videos ... </h5>\n              {this.renderVideos()}\n            </div>\n          </section>\n        </div>\n      </div>\n    );\n  }\n}\n\n\nexport default FavoriteVideos;","import React from \"react\";\nimport Queries from '../../graphql/queries';\nimport SideBar from '../ui/SideBar';\nimport MiniSideBar from '../ui/MiniSideBar';\nimport NavBar from '../NavBar';\nimport { Query } from \"react-apollo\";\nimport {withRouter, Link} from \"react-router-dom\";\n\n\nconst {FETCH_USER} = Queries;\n\nclass UserProfile extends React.Component {\n  render () {\n    return <Query query={FETCH_USER} variables={{ id: this.props.match.params.userId}}>\n      {({ loading, error, data }) => {\n        if (loading) return <p>Loading...</p>;\n        if (error) return <p>Error</p>;\n\n        const username = data.user.username;\n        const image = data.user.image;\n        const email = data.user.email;\n        const date = new Date(+data.user.date);\n        const year = date.getFullYear();\n        const month = date.getMonth();\n        const day = date.getDate();\n        let videos = Object.values(data.user.videos_liked)\n        let displayVideo;\n    \n        if (videos.length > 0) {\n          const {_id, url, title} = videos[videos.length - 1]\n          displayVideo = \n          <div className=\"video-container-1\">Last liked video!\n            <div>\n              <object className=\"video-player-1\">\n                <param name=\"movie\" value={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0&rel=0&modest=1`}></param>\n                <param name=\"allowFullScreen\" value=\"true\"></param>\n                <param name=\"allowscriptaccess\" value=\"always\"></param>\n                <embed src={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0&rel=0&modest=1`}\n                  type=\"application/x-shockwave-flash\"\n                  className=\"video-player\" allowscriptaccess=\"always\" allowFullScreen={true}></embed>\n              </object>\n            </div>\n            <div className=\"video-info\">\n              <Link to={`/videos/${_id}`}>\n                <p className=\"video-title clickable\">\n                  {title}\n                </p>\n              </Link>\n            </div>\n          </div>\n        } else {\n          displayVideo = \n          <div>\n            <p>No liked videos yet!</p>\n            <div className=\"user-profile-novideo\"><i className=\"fas fa-exclamation-triangle\"></i></div>\n          </div>\n        }\n \n\n   return (\n          <div>\n            <NavBar />\n            <div className=\"container\">\n              <div className=\"flex-grid\">\n                <MiniSideBar />\n                <SideBar />\n                <div className=\"user-profile\">\n                  <img src={image} className=\"user-profile-image\" />\n                  <div className=\"user-profile-name\">{username}</div>\n                  <div className=\"user-profile-email\">{email}</div>\n                  <div className=\"user-profile-date\">Joined: {year + \"-\" + month + \"-\" + day}</div>\n                  {displayVideo}\n                </div>\n            \n              </div>\n             \n            </div>\n          </div>\n        )\n      }}\n    </Query> \n  }\n}\n\nexport default withRouter(UserProfile);","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport VideoIndex from './components/Videos/VideoIndex';\nimport VideoDetail from './components/Videos/VideoDetail';\nimport Register from \"./components/User/Register\";\nimport Login from \"./components/User/Login\";\nimport AuthRoute from \"./util/route_util\";\nimport VideoSearch from './components/Videos/VideoSearch';\nimport LikedVideos from './components/Videos/LikedVideos';\nimport FavoriteVideos from './components/Videos/FavoriteVideos';\nimport UserProfile from \"./components/User/Profile\";\n\nconst App = () => {\n return(\n  <div>\n    <Switch>\n      <AuthRoute path=\"/register\" component={Register} routeType=\"auth\" />\n       <Route exact path=\"/\" component={VideoIndex} />\n       <Route exact path=\"/videos/likes\" component={LikedVideos} />\n       <Route exact path=\"/videos/favorites\" component={FavoriteVideos} />\n       <AuthRoute path=\"/profile/:userId\" component={UserProfile} routeType=\"profile\"/>\n       <Route  path=\"/videos/:id\" component={VideoDetail} />\n       <Route path=\"/search/:criteria\" component={VideoSearch} />\n      <AuthRoute path=\"/login\" component={Login} routeType=\"auth\" />\n    </Switch>\n  </div>\n )}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport ApolloClient from 'apollo-client';\nimport { ApolloProvider } from 'react-apollo';\nimport {HashRouter } from 'react-router-dom';\nimport App from './App';\nimport { InMemoryCache } from 'apollo-cache-inmemory';\nimport { createHttpLink } from \"apollo-link-http\";\nimport { onError } from \"apollo-link-error\";\nimport { ApolloLink } from \"apollo-link\";\nimport Mutation from \"./graphql/mutations\";\nconst { VERIFY_USER } = Mutation;\nconst token = localStorage.getItem(\"auth-token\");\n\nconst cache = new InMemoryCache({ dataIdFromObject: object => object._id || null});\n\nconst httpLink = createHttpLink({\n  credentials: 'same-origin',\n  uri: \"http://localhost:5000/graphql\" \n});\n\n\nconst errorLink = onError(({ graphQLErrors }) => {\n  if (graphQLErrors) graphQLErrors.map(({ message }) => console.log(message));\n});\n\nconst client = new ApolloClient({\n  link: ApolloLink.from([errorLink, httpLink]),\n  cache,\n  headers: {\n    authorization: localStorage.getItem(\"auth-token\")\n  },\n  onError: ({ networkError, graphQLErrors }) => {\n    console.log(\"graphQLErrors\", graphQLErrors);\n    console.log(\"networkError\", networkError);\n  }\n});\n\ncache.writeData({\n  data: {\n    isLoggedIn: Boolean(token)\n  }\n});\n\nif (token) {\n  client\n    .mutate({ mutation: VERIFY_USER, variables: { token } })\n    .then(({ data }) => {\n      cache.writeData({\n        data: {\n          isLoggedIn: data.verifyUser.loggedIn\n        }\n      });\n    });\n}\n\nconst Root = () => {\n  return (\n    <ApolloProvider client={client}>\n      <HashRouter>\n        <App/>\n      </HashRouter>\n    </ApolloProvider>\n    )\n};\n\nReactDOM.render(\n  <Root />,\n  document.querySelector('#root')\n);\n"],"sourceRoot":""}