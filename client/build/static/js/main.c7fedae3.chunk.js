(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{54:function(e,t,a){e.exports=a(77)},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(43),l=a.n(i),s=a(27),o=a(11),c=a(4),m=a(24),u=a(17),d=a(30),p=a.n(d),v=a(5),h=a(6),E=a(8),f=a(7),g=a(9),b=a(12),y=a(13),k=a.n(y);function N(){var e=Object(b.a)(["\n    query FetchUserFavoriteVideos($id: ID!) {\n      user(_id: $id){\n        _id, username\n      favoriteVideos{\n        _id, title, url, description\n        comments{\n          _id\n        }\n        favoriteBy{\n          _id\n        }\n      }\n      }\n    }\n  "]);return N=function(){return e},e}function I(){var e=Object(b.a)(["\n    query FetchUserLikedVideos($id: ID!) {\n      user(_id: $id){\n        _id\n        videos_liked{\n          _id\n          title\n          url\n          description\n        comments{\n          _id\n        }\n        favoriteBy{\n          _id\n        }\n        }\n      }\n    }\n  "]);return I=function(){return e},e}function O(){var e=Object(b.a)(["\n    query FetchVideoLikes($id: ID!) {\n      video(_id: $id){ \n        likes {\n          _id\n          username\n        }\n      }\n    }\n  "]);return O=function(){return e},e}function w(){var e=Object(b.a)(["\n  query filterVideos($criteria: String, $perPage: Int!, $pageNumber: Int!){\n  videos(criteria: $criteria, perPage: $perPage, pageNumber: $pageNumber){\n      _id\n      title\n      description\n      category\n      url\n      keywords\n      comments{\n        _id\n      }\n      favoriteBy{\n        _id\n      }\n    }\n  }\n\n "]);return w=function(){return e},e}function S(){var e=Object(b.a)(["\n  query FetchComment($id: ID!){\n  comment (_id: $id) {\n    _id\n    text\n    date\n    gif\n    author {\n      username\n      image\n    }\n    date\n    replies {\n      _id\n      text\n      date\n      gif\n      replyTo\n      author {\n        username\n        image\n      }\n    }\n  }\n}\n"]);return S=function(){return e},e}function _(){var e=Object(b.a)(["\n  query queryVideo($id:ID!){\n  video(_id:$id){\n     _id\n    title\n    description\n    category\n    url\n    likes {\n      _id\n    }\n    dislikes {\n      _id\n    }\n    keywords\n    comments {\n      _id\n      text\n      date\n      gif\n      author {\n        _id\n        username\n        image\n      }\n      replies {\n        _id\n        text\n        date\n        gif\n        replyTo\n        author {\n          _id\n          username\n          image\n        }\n      }\n    }\n    favoriteBy{\n      _id\n    }\n     }\n    }\n  "]);return _=function(){return e},e}function C(){var e=Object(b.a)(["\n  query FetchUser($id: ID!) {\n    user(_id: $id) {\n      _id\n      username\n      image\n      date\n      email\n      favoriteVideos {\n        _id, title, url, description\n      }\n      videos_liked {\n        _id, title, url, description\n      }\n    }\n  }\n  "]);return C=function(){return e},e}function j(){var e=Object(b.a)(["\n    query IsUserLoggedIn {\n      isLoggedIn @client\n    }\n  "]);return j=function(){return e},e}var D={IS_LOGGED_IN:k()(j()),FETCH_USER:k()(C()),FETCH_VIDEO:k()(_()),FETCH_COMMENT:k()(S()),FETCH_VIDEOS:k()(w()),FETCH_VIDEO_LIKES:k()(O()),FETCH_USER_LIKED_VIDEOS:k()(I()),FETCH_USER_FAVORITE_VIDEOS:k()(N())},L=function(){return JSON.parse(localStorage.getItem("user"))};window.addEventListener("DOMContentLoaded",(function(e){var t="dark"===localStorage.getItem("theme")?window.darkTheme:window.lightTheme;document.getElementById("site-logo")&&(document.getElementById("site-logo").src=t)}));var T=function(){var e=localStorage.getItem("theme"),t=document.createElement("link");t.href="dark"!==e?"../stylesheets/components/light_theme.css":"../stylesheets/components/dark_theme.css",t.rel="stylesheet",t.type="text/css",document.body.appendChild(t),function(){var e="dark"===localStorage.getItem("theme")?window.darkTheme:window.lightTheme;document.getElementById("site-logo")&&(document.getElementById("site-logo").src=e)}()},x=function(){return localStorage.getItem("theme")},F=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(E.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).changeTheme=function(e){var t=e.target.checked?"dark":"light";localStorage.setItem("theme",t),T()},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){document.getElementById("chkTheme").checked="dark"===x()}},{key:"render",value:function(){var e;e=L()?r.a.createElement("li",{className:"clickable sidebar-section-header"},r.a.createElement(c.b,{to:"/profile/".concat(L().id)},r.a.createElement("i",{className:"far fa-user"},"\xa0"),r.a.createElement("span",{className:""},"Profile"))):null;var t=L()?L().image:"/stylesheets/images/default_avatar_2.png",a=L()?L().username:"guest";return r.a.createElement("aside",{className:"sidebar hide"},r.a.createElement("div",{className:"sidebar-user-info"},r.a.createElement("img",{src:t,className:"sidebar-avatar",alt:a}),r.a.createElement("p",{className:"sidebar-username"},a),r.a.createElement("label",{className:"switch"},r.a.createElement("input",{id:"chkTheme",type:"checkbox",onChange:this.changeTheme}),">",r.a.createElement("span",{className:"slider"}))),r.a.createElement("hr",null),r.a.createElement("ul",null,r.a.createElement("li",{className:"clickable sidebar-section-header"},r.a.createElement(c.b,{to:"/"},r.a.createElement("i",{className:"fas fa-home"},"\xa0"),r.a.createElement("span",{className:""},"Home"))),e,L()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"clickable sidebar-section-header"},r.a.createElement("i",{className:"far fa-thumbs-up"},"\xa0"),r.a.createElement(c.b,{to:"/videos/likes",className:""},"Liked Videos")),r.a.createElement("li",{className:"clickable sidebar-section-header"},r.a.createElement("i",{className:"fas fa-hand-holding-heart"},"\xa0"),r.a.createElement(c.b,{to:"/videos/favorites"},"Favorite Videos"))),r.a.createElement("li",{className:"sidebar-section-header"},r.a.createElement("i",{className:"fas fa-th-list"},"\xa0"),r.a.createElement("span",null,"Categories")),r.a.createElement("li",{className:"sidebar-item clickable"},r.a.createElement("i",{className:"fas fa-cat"},"\xa0"),r.a.createElement(c.b,{to:"/search/cats"},"Funny Cats")),r.a.createElement("li",{className:"sidebar-item clickable"},r.a.createElement("i",{className:"fas fa-dog"},"\xa0"),r.a.createElement(c.b,{to:"/search/dog"},"Funny Dogs")),r.a.createElement("li",{className:"sidebar-item clickable"},r.a.createElement("i",{className:"fas fa-child"},"\xa0"),r.a.createElement(c.b,{to:"/search/kids"},"Funny kids")),r.a.createElement("li",{className:"sidebar-item clickable"},r.a.createElement("i",{className:"fas fa-dove"},"\xa0"),r.a.createElement(c.b,{to:"/search/birds"},"Funny birds")),r.a.createElement("li",{className:"sidebar-item clickable"},r.a.createElement("i",{className:"fas fa-horse"},"\xa0"),r.a.createElement(c.b,{to:"/search/horse"},"Funny horses")),r.a.createElement("li",{className:"sidebar-item clickable"},r.a.createElement("i",{style:{"font-size":"16px"},className:"icofont-monkey"},"\xa0"),r.a.createElement(c.b,{to:"/search/monkey"},"Funny monkeys")),r.a.createElement("li",{className:"sidebar-item clickable"},r.a.createElement("i",{style:{"font-size":"16px"},className:"icofont-penguin"},"\xa0"),r.a.createElement(c.b,{to:"/search/penguin"},"Funny penguins"))))}}]),t}(n.Component),V=a(34),$=D.IS_LOGGED_IN,U=function(e){var t="/",a=L();return a&&(t="profile/".concat(a.id)),r.a.createElement(o.a,null,(function(e){return r.a.createElement(V.b,{query:$},(function(a){if(a.data.isLoggedIn){var n=L()?L().image:"/stylesheets/images/default_avatar_2.png",i=L()?L().email:"",l=L()?L().username:"";return r.a.createElement("div",{className:"navbar-logout",onClick:function(e){return function(e){e.preventDefault();var t=document.getElementById("navLogoutPopup");t&&t.classList.toggle("display")}(e)}},r.a.createElement("img",{alt:"PalTube",src:n,className:"navbar-pic"}),r.a.createElement("div",{className:"navPopup",id:"navLogoutPopup"},r.a.createElement("div",{className:"logout-info"},r.a.createElement("p",{className:"nav-popup-username"},l),r.a.createElement("p",{className:"nav-popup-email"},i)),r.a.createElement("div",{className:"logout-likes"},r.a.createElement(c.b,{to:t},r.a.createElement("i",{className:"fas fa-user sign-out-icon"}),"My Profile")),r.a.createElement("div",{className:"logout-likes"},r.a.createElement(c.b,{to:"/videos/likes"},r.a.createElement("i",{className:"fas fa-thumbs-up sign-out-icon"}),"My Likes")),r.a.createElement("button",{className:"logout-button",onClick:function(t){t.preventDefault(),localStorage.removeItem("auth-token"),localStorage.removeItem("user"),e.writeData({data:{isLoggedIn:!1}})}},r.a.createElement(c.b,{to:"/",className:"nav-log-out"},r.a.createElement("i",{className:"fas fa-sign-out-alt sign-out-icon"}),"Sign Out"))))}return r.a.createElement("div",{className:"nav-links"},r.a.createElement(c.b,{to:"/register",className:"nav-sign-up"},"SIGN UP"),r.a.createElement(c.b,{to:"/login",className:"nav-sign-in"},"SIGN IN"))}))}))},R=a(49),q=a.n(R),M=[{name:"cat",value:1},{name:"cats",value:2},{name:"funny cat",value:3},{name:"dog",value:4},{name:"dogs",value:5},{name:"funny dog",value:6},{name:"funny dogs",value:7},{name:"animals",value:8},{name:"baby",value:9},{name:"babies",value:10},{name:"puppies",value:11},{name:"kid",value:12},{name:"kids",value:13},{name:"kids and animals",value:14},{name:"trolling",value:15},{name:"birds",value:16},{name:"birds talk like human",value:17},{name:"horse",value:18},{name:"horses",value:19},{name:"funny horse",value:20},{name:"horses are much more funny than cats",value:21},{name:"cute and funny horse",value:22},{name:"funnies horse",value:23}],P=function(e){var t=e.trim().toLowerCase();return 0===t.length?[]:M.filter((function(e){return e.name.toLocaleLowerCase().includes(t)}))},B=function(e){return e.name},Q=function(e){return r.a.createElement("div",null,e.name)},H=function(e){function t(){var e;return Object(v.a)(this,t),(e=Object(E.a)(this,Object(f.a)(t).call(this))).handleKeydown=function(t){"react-autowhatever-txtSearchVideos"===t.target.getAttribute("aria-controls")&&("Enter"!==t.key&&13!==t.keyCode||(window.location.href="#/search/".concat(e.state.value)))},e.handleSearchClick=function(t){"searchBtn"===t.target.id&&(window.location.href="#/search/".concat(e.state.value))},e.onSuggestionsFetchRequested=function(t){var a=t.value;e.setState({suggestions:P(a)})},e.onSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e.onChange=function(t,a){var n=a.newValue;a.method;e.setState({value:n})},e.state={value:"",suggestions:[],referrer:null},e}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeydown)}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.suggestions,n={placeholder:"search...",value:t,onChange:this.onChange};return r.a.createElement("div",{id:"div",style:{display:"flex"}},r.a.createElement(q.a,{id:"txtSearchVideos",suggestions:a,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:B,renderSuggestion:Q,inputProps:n,highlightFirstSuggestion:!0}),r.a.createElement("button",{className:"clickable search-icon",onClick:this.handleSearchClick},r.a.createElement("i",{className:"fas fa-search",id:"searchBtn"})))}}]),t}(n.Component),A=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(E.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).toggleMenu=function(){var e=document.getElementsByClassName("sidebar")[0],t=document.getElementsByClassName("mini-sidebar")[0],a=e.classList.contains("show")?"hide":"show",n=t.classList.contains("show")?"hide":"show";t.classList.remove("show"),t.classList.remove("hide"),t.classList.add(n),e.classList.remove("show"),e.classList.remove("hide"),e.classList.add(a)},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){localStorage.getItem("theme")?T():(localStorage.setItem("theme","dark"),T());var e="dark"===localStorage.theme?window.darkTheme:window.lightTheme;return r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"logo-container"},r.a.createElement("span",{onClick:this.toggleMenu,className:"burger-menu-icon",id:"nav-toggle"},"\u2630"),r.a.createElement(c.b,{to:"/"},r.a.createElement("img",{id:"site-logo",className:"navbar-logo",src:e,alt:"Paltube"}))),r.a.createElement(H,null),r.a.createElement(U,null))}}]),t}(n.Component),G=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(E.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).changeTheme=function(e){var t=e.target.checked?"dark":"light";localStorage.setItem("theme",t),T()},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){document.getElementById("chkTheme").checked="dark"===x()}},{key:"render",value:function(){return r.a.createElement("aside",{className:"mini-sidebar show"},r.a.createElement("ul",null,r.a.createElement("li",{className:"clickable mini-sidebar-section-header"},r.a.createElement(c.b,{to:"/"},r.a.createElement("i",{className:"fas fa-home mini-icon"},"\xa0"),r.a.createElement("p",{className:"mini-description"},"Home"))),L()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"clickable mini-sidebar-section-header"},r.a.createElement(c.b,{to:"/videos/likes",className:""},r.a.createElement("i",{className:"far fa-thumbs-up mini-icon"},"\xa0"),r.a.createElement("p",{className:"mini-description"},"My Likes"))),r.a.createElement("li",{className:"clickable mini-sidebar-section-header"},r.a.createElement(c.b,{to:"/videos/favorites"},r.a.createElement("i",{className:"fas fa-hand-holding-heart mini-icon"},"\xa0"),r.a.createElement("p",{className:"mini-description"},"Favorites"))))))}}]),t}(n.Component),K=D.FETCH_VIDEOS,Y=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).onVideosFetched=function(e){if(0!==e.videos.length){var t=a.state.pageNumber+=1,n=a.state.data.videos.concat(e.videos);a.setState({data:{videos:n}}),a.setState({pageNumber:t}),a.setState({loading:!1,firstLoad:!1})}else a.setState({documentsFullyLoaded:!0,loading:!1})},a.handleScroll=function(e){a.state.firstLoad||a.state.loading||(a.state.documentsFullyLoaded&&window.removeEventListener("scroll",a.handleScroll),window.innerHeight+window.scrollY>=document.body.offsetHeight&&document.getElementById("btnLoad").click())},a.state={data:{videos:[]},pageNumber:0,perPage:16,loading:!1,firstLoad:!0,documentsFullyLoaded:!1},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"renderVideos",value:function(){return this.state.loading?r.a.createElement("div",{className:"video-index-loading-div"},"loading..."):0===Object.values(this.state.data).length?null:this.state.data.videos.map((function(e){var t=e._id,a=e.title,n=e.url;return r.a.createElement("div",{key:t,className:"video-container"},r.a.createElement("div",null,r.a.createElement("object",{className:"video-player"},r.a.createElement("param",{name:"movie",value:"".concat(n,"?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0&rel=0&modest=1")}),r.a.createElement("param",{name:"allowFullScreen",value:"true"}),r.a.createElement("param",{name:"allowscriptaccess",value:"always"}),r.a.createElement("embed",{src:"".concat(n,"?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0&rel=0&modest=1"),type:"application/x-shockwave-flash",className:"video-player",allowscriptaccess:"always",allowFullScreen:!0}))),r.a.createElement("div",{className:"video-info"},r.a.createElement(c.b,{to:"/videos/".concat(t)},r.a.createElement("p",{className:"video-title clickable"},a))))}))}},{key:"componentDidMount",value:function(){document.getElementById("btnLoad").click(),window.addEventListener("scroll",this.handleScroll,{passive:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this;return r.a.createElement(o.a,null,(function(t){var a;return r.a.createElement("div",{id:"scrollDiv"},r.a.createElement(A,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"flex-grid"},r.a.createElement(G,null),r.a.createElement(F,null),r.a.createElement("section",{className:"main"},r.a.createElement("h3",null,"Recommended Videos"),r.a.createElement("div",{className:"row"},e.state.data&&e.renderVideos(e.state.data)),r.a.createElement("div",{style:{width:"1px",height:"1px"}},r.a.createElement("button",(a={style:{width:"1px",height:"1px"},id:"btnLoad"},Object(u.a)(a,"style",{width:"100%",backgroundColor:"darkgrey"}),Object(u.a)(a,"onClick",(function(a){var n,r;return p.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return a.preventDefault(),e.setState({loading:!0}),i.next=4,p.a.awrap(t.query({query:K,variables:{criteria:void 0,perPage:e.state.perPage,pageNumber:e.state.pageNumber},fetchPolicy:"network-only"}));case 4:n=i.sent,r=n.data,e.onVideosFetched(r);case 7:case"end":return i.stop()}}))})),a)))))))}))}}]),t}(n.Component),z=a(79);function J(){var e=Object(b.a)(["\n    mutation RemoveFromFavorites($videoId: ID!, $userId: ID!) {\n      removeFavoriteVideo(videoId: $videoId, userId:$userId){\n      _id\n    }\n  }\n  "]);return J=function(){return e},e}function W(){var e=Object(b.a)(["\n    mutation AddToFavorites($videoId: ID!, $userId: ID!) {\n      addFavoriteVideo(videoId: $videoId, userId:$userId){\n      _id\n    }\n  }\n  "]);return W=function(){return e},e}function Z(){var e=Object(b.a)(["\n    mutation VideoRemoveDislike($videoId: ID!, $userId: ID!) {\n      removeVideoDislike(videoId: $videoId, userId: $userId) {\n        _id\n      }\n    }\n  "]);return Z=function(){return e},e}function X(){var e=Object(b.a)(["\n    mutation VideoDislike($videoId: ID!, $userId: ID!) {\n      addVideoDislike(videoId: $videoId, userId: $userId) {\n        _id\n      }\n    }\n  "]);return X=function(){return e},e}function ee(){var e=Object(b.a)(["\n    mutation VideoRemoveLike($videoId: ID!, $userId: ID!) {\n      removeVideoLike(videoId: $videoId, userId: $userId) {\n        _id\n      }\n    }\n  "]);return ee=function(){return e},e}function te(){var e=Object(b.a)(["\n    mutation VideoLike($videoId: ID!, $userId: ID!) {\n      addVideoLike(videoId: $videoId, userId: $userId) {\n        _id\n      }\n    }\n  "]);return te=function(){return e},e}function ae(){var e=Object(b.a)(["\n  mutation UpdateComment($id: ID!, $text: String) {\n    updateComment(id: $id, text: $text) {\n      _id\n      text\n      date\n      author {\n        _id\n        username\n        image\n      }\n      replies {\n        _id\n       }\n      replyTo\n    }\n  }\n"]);return ae=function(){return e},e}function ne(){var e=Object(b.a)(["\n    mutation DeleteComment($id: ID!) {\n      deleteComment(id: $id) {\n        _id\n      }\n    }\n  "]);return ne=function(){return e},e}function re(){var e=Object(b.a)(["\n    mutation ReplyComment($text: String!, $author: ID!, $parentCommentId: ID!, $gif: String!, $replyTo: String!) {\n      replyReplyComment(text: $text, author: $author, parentCommentId: $parentCommentId, gif: $gif, replyTo: $replyTo) {\n        _id\n        text\n        author {\n          _id\n          username\n          image\n        }\n        replies {\n          _id  \n        }\n        date\n        gif\n        replyTo\n      }\n    }\n  "]);return re=function(){return e},e}function ie(){var e=Object(b.a)(["\n    mutation ReplyComment($text: String!, $author: ID!, $parentCommentId: ID!, $gif: String!) {\n      addReplyComment(text: $text, author: $author, parentCommentId: $parentCommentId, gif: $gif) {\n        _id\n        text\n        author {\n          _id\n          username\n          image\n        }\n        replyTo\n        replies {\n          _id  \n        }\n        date\n        gif\n      }\n    }\n  "]);return ie=function(){return e},e}function le(){var e=Object(b.a)(["\n    mutation VideoComment($text: String!, $author: ID!, $videoId: ID!, $gif: String!) {\n      addVideoComment(text: $text, author: $author, videoId: $videoId, gif: $gif) {\n        _id\n        text\n        author {\n          _id\n          username\n          image\n        }\n        replies {\n          _id  \n        }\n        date\n        gif\n      }\n    }\n  "]);return le=function(){return e},e}function se(){var e=Object(b.a)(["\n  mutation VerifyUser($token: String!) {\n    verifyUser(token: $token) {\n      loggedIn\n    }\n  }\n"]);return se=function(){return e},e}function oe(){var e=Object(b.a)(["\n  mutation RegisterUser($username: String!, $email: String!, $password: String!, $password2: String!, $image:String!) {\n    register(username: $username, email: $email, password: $password, password2: $password2, image: $image) {\n      email\n      token\n      loggedIn\n      _id\n      username\n      image\n    }\n  }\n "]);return oe=function(){return e},e}function ce(){var e=Object(b.a)(["\n  mutation LoginUser($emailOrUsername: String!, $password: String!) {\n    login(emailOrUsername: $emailOrUsername, password: $password) {\n      token\n      loggedIn\n      _id\n      email\n      username\n      image\n    }\n  }\n  "]);return ce=function(){return e},e}var me={LOGIN_USER:k()(ce()),REGISTER_USER:k()(oe()),VERIFY_USER:k()(se()),VIDEO_COMMENT:k()(le()),REPLY_COMMENT:k()(ie()),REPLY_REPLY_COMMENT:k()(re()),DELETE_COMMENT:k()(ne()),UPDATE_COMMENT:k()(ae()),ADD_VIDEO_LIKE:k()(te()),REMOVE_VIDEO_LIKE:k()(ee()),ADD_VIDEO_DISLIKE:k()(X()),REMOVE_VIDEO_DISLIKE:k()(Z()),ADD_TO_FAVORITES:k()(W()),REMOVE_FROM_FAVORITES:k()(J())},ue=a(29),de=a.n(ue),pe=me.REPLY_REPLY_COMMENT,ve=D.FETCH_VIDEO,he=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).state={text:"",gif:"",error:""},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"handleToggle",value:function(e,t){e&&e.preventDefault();var a=document.getElementById(t);a&&a.classList.toggle("show")}},{key:"handleToggleSubmit",value:function(e){var t=document.getElementById(e);t&&t.classList.contains("show")&&t.classList.toggle("show")}},{key:"update",value:function(e){var t=this;return function(a){t.setState(Object(u.a)({},e,a.target.value))}}},{key:"handleSubmit",value:function(e,t){var a=this;if(e.preventDefault(),""!==this.state.text){var n=this.state.text,r=this.state.gif;t({variables:{text:this.props.user+" "+n,author:L().id,parentCommentId:this.props.parentId,gif:r,replyTo:this.props.replyTo}}).then((function(e){a.setState({text:"",gif:"",error:""})})).then((function(e){a.handleToggleSubmit(a.props.parentId.concat("replyoptions"))}))}else this.setState({error:"cannot be empty"})}},{key:"updateCache",value:function(e,t){var a,n=t.data.replyReplyComment;try{a=e.readQuery({query:ve,variables:{id:this.props.videoId}})}catch(l){return}if(a){for(var r=(a=Object.assign({},a.video)).comments,i=0;i<r.length;i++)this.props.parentId===r[i]._id&&r[i].replies.push(n);e.writeQuery({query:ve,variables:{id:this.props.videoId},data:{video:a}})}}},{key:"updategif",value:function(e){this.setState({gif:e.downsized.url})}},{key:"render",value:function(){var e,t=this,a=L(),n=this.props.parentId.concat("replyoptions");return a&&L().username!==this.props.user?("cannot be empty"===this.state.error&&(e="Comment must have text"),r.a.createElement(V.a,{onError:function(e){t.setState({error:e.message})},mutation:pe,update:function(e,a){return t.updateCache(e,a)}},(function(a,i){i.data;return r.a.createElement("div",null,r.a.createElement("form",{className:"reply-reply-create",onSubmit:function(e){return t.handleSubmit(e,a)}},r.a.createElement("input",{value:t.state.text,onChange:t.update("text"),placeholder:"@"+t.props.user,className:"comment-create-input"}),r.a.createElement("div",null,e),r.a.createElement("div",{className:"reply-buttons"},r.a.createElement("div",{className:"gif-popup-reply"},r.a.createElement("button",{className:"create-comment-button",onClick:function(e){return t.handleToggle(e,n)}},"Gif"),r.a.createElement("div",{className:"giftext-reply",id:n},r.a.createElement(de.a,{id:"giphy-picker",apiKey:"EeZhW081PZQ2Abce60Y4EQulHVTzcbRA",onSelected:t.updategif.bind(t)}))),r.a.createElement("button",{className:"reply-comment-button",type:"submit"},"Reply"))))}))):r.a.createElement("div",null)}}]),t}(r.a.Component),Ee=a(23),fe=D.FETCH_VIDEO,ge=me.DELETE_COMMENT,be=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).handleSubmitToggle=a.handleSubmitToggle.bind(Object(Ee.a)(a)),a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"handleSubmit",value:function(e,t){var a=this;e.preventDefault(),t({variables:{id:this.props.commentId}}).then((function(){return a.handleSubmitToggle("".concat(a.props.commentId))}))}},{key:"handleSubmitToggle",value:function(e){var t=document.getElementById(e);t&&t.classList.contains("show")&&t.classList.toggle("show")}},{key:"render",value:function(){var e=this;return L()&&this.props.user===L().username?r.a.createElement(V.a,{mutation:ge,refetchQueries:function(){return[{query:fe,variables:{id:e.props.videoId}}]}},(function(t,a){a.data;return r.a.createElement("div",null,r.a.createElement("form",{className:"delete-button",onSubmit:function(a){return e.handleSubmit(a,t)}},r.a.createElement("button",{type:"submit"},"Delete")))})):r.a.createElement("div",null)}}]),t}(r.a.Component),ye=D.FETCH_VIDEO,ke=me.UPDATE_COMMENT,Ne=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).state={text:a.props.comment.text},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"update",value:function(e){var t=this;return function(a){t.setState(Object(u.a)({},e,a.target.value))}}},{key:"handleSubmit",value:function(e,t){e.preventDefault(),t({variables:{id:this.props.comment._id,text:this.state.text}})}},{key:"render",value:function(){var e=this;return L()&&this.props.comment.author.username===L().username?r.a.createElement(V.a,{mutation:ke,refetchQueries:function(){return[{query:ye,variables:{id:e.props.videoId}}]}},(function(t,a){a.data;return r.a.createElement("div",null,r.a.createElement("form",{className:"edit-form",onSubmit:function(a){return e.handleSubmit(a,t)}},r.a.createElement("input",{className:"edit-text",value:e.state.text,onChange:e.update("text")}),r.a.createElement("button",{className:"edit-button",type:"submit"},"Edit")))})):r.a.createElement("div",null)}}]),t}(r.a.Component),Ie=function(e,t){var a=t.comment._id;return L()&&L().username===e?r.a.createElement("div",{className:"options-popup"},r.a.createElement("i",{onClick:function(e){return function(e,t){e.preventDefault();var a=document.getElementById(t);a&&a.classList.toggle("show")}(e,a)},className:"fas fa-ellipsis-h edit-button-font"}),r.a.createElement("div",{className:"optionstext",id:a},r.a.createElement(Ne,{videoId:t.videoId,comment:t.comment}),r.a.createElement(be,{commentId:t.comment._id,videoId:t.videoId,user:t.comment.author.username}))):r.a.createElement("div",null)},Oe=function(e){var t=new Date(+e.comment.date),a=t.getFullYear(),n=t.getMonth(),i=t.getDate(),l=e.comment.author.username,s=e.comment.replyTo?e.comment.text.split(" ")[0].length:0,o=e.comment.replyTo?"@"+e.comment.text.split(" ")[0]:"",m=e.comment.replyTo?r.a.createElement("div",{className:"comment-reply-link-item"},r.a.createElement(c.b,{to:"/profile/".concat(e.comment.replyTo)},r.a.createElement("div",{className:"comment-reply-link"},o))," ",r.a.createElement("div",{className:"comment-reply-link-text"},e.comment.text.slice(s))):r.a.createElement("div",null,e.comment.text),u=e.comment.author.image?e.comment.author.image:"/stylesheets/images/default_avatar_2.png",d=e.comment.gif?r.a.createElement("img",{alt:"comment",className:"reply-comment-gif",src:e.comment.gif}):null;return r.a.createElement("div",{className:"reply-comment-index"},r.a.createElement("div",{className:"reply-comment-top"},r.a.createElement("img",{src:u,className:"reply-comment-create-avatar"}),r.a.createElement("div",{className:"reply-comment-name"},e.comment.author.username),r.a.createElement("div",{className:"edit-comment"},r.a.createElement("div",{className:"reply-comment-year"},a+"-"+n+"-"+i),Ie(l,e))),r.a.createElement("div",{className:"reply-comment-text"},m),d,r.a.createElement("div",{className:"comment-reply-reply"},r.a.createElement(he,{videoId:e.videoId,parentId:e.parentId,replyTo:e.comment.author._id,user:e.comment.author.username})))},we=D.FETCH_VIDEO,Se=function(e){function t(){return Object(v.a)(this,t),Object(E.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(V.b,{query:we,variables:{id:this.props.videoId}},(function(t){var a=t.loading,n=t.error,i=t.data;if(a)return r.a.createElement("p",null,"Loading...");if(n)return r.a.createElement("p",null,"Error");for(var l,s=i.video.comments,o=0;o<s.length;o++)e.props.commentId===s[o]._id&&(l=s[o].replies);var c=l.map((function(t){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(Oe,{comment:t,videoId:e.props.videoId,parentId:e.props.commentId})," "))}));return r.a.createElement("div",null,c)}))}}]),t}(r.a.Component),_e=me.REPLY_COMMENT,Ce=D.FETCH_VIDEO,je=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).state={text:"",gif:"",error:""},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"handleToggle",value:function(e,t){e&&e.preventDefault();var a=document.getElementById(t);a&&a.classList.toggle("show")}},{key:"handleToggleSubmit",value:function(e){var t=document.getElementById(e);t&&t.classList.contains("show")&&t.classList.toggle("show")}},{key:"update",value:function(e){var t=this;return function(a){t.setState(Object(u.a)({},e,a.target.value))}}},{key:"handleSubmit",value:function(e,t){var a=this;e.preventDefault();var n=this.state.text,r=this.state.gif;""!==this.state.text?t({variables:{text:n,author:L().id,parentCommentId:this.props.parentId,gif:r}}).then((function(e){a.setState({text:"",gif:"",error:""})})).then((function(e){a.handleToggleSubmit(a.props.parentId.concat("options"))})):this.setState({error:"GraphQL error: Cannot return null for non-nullable field CommentType.text."})}},{key:"updateCache",value:function(e,t){var a,n=t.data.addReplyComment;try{a=e.readQuery({query:Ce,variables:{id:this.props.videoId}})}catch(l){return}if(a){for(var r=(a=Object.assign({},a.video)).comments,i=0;i<r.length;i++)this.props.parentId===r[i]._id&&r[i].replies.push(n);e.writeQuery({query:Ce,variables:{id:this.props.videoId},data:{video:a}})}}},{key:"updategif",value:function(e){this.setState({gif:e.downsized.url})}},{key:"render",value:function(){var e,t=this,a=L(),n=this.props.parentId.concat("options");return a?("GraphQL error: Cannot return null for non-nullable field CommentType.text."===this.state.error&&(e="Comment must have text"),r.a.createElement(V.a,{onError:function(e){t.setState({error:e.message})},mutation:_e,update:function(e,a){return t.updateCache(e,a)}},(function(a,i){i.data;return r.a.createElement("div",null,r.a.createElement("form",{className:"reply-comment",onSubmit:function(e){return t.handleSubmit(e,a)}},r.a.createElement("input",{value:t.state.text,onChange:t.update("text"),placeholder:"".concat(L().username," leave your reply, be nice :)"),className:"comment-create-input"}),r.a.createElement("div",null,e),r.a.createElement("div",{className:"reply-buttons"},r.a.createElement("div",{className:"gif-popup-reply"},r.a.createElement("button",{className:"create-comment-button",onClick:function(e){return t.handleToggle(e,n)}},"Gif"),r.a.createElement("div",{className:"giftext-reply",id:n},r.a.createElement(de.a,{id:"giphy-picker",apiKey:"EeZhW081PZQ2Abce60Y4EQulHVTzcbRA",onSelected:t.updategif.bind(t)}))),r.a.createElement("button",{className:"reply-comment-button",type:"submit"},"Reply"))))}))):r.a.createElement("div",null)}}]),t}(r.a.Component),De=D.FETCH_VIDEO,Le=me.UPDATE_COMMENT,Te=me.DELETE_COMMENT,xe=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).handleSubmitToggle=a.handleSubmitToggle.bind(Object(Ee.a)(a)),a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"handleSubmit",value:function(e,t){e.preventDefault(),t({variables:{id:this.props.commentId,text:"!(!DELETE!)!"}})}},{key:"handleSubmitToggle",value:function(e){var t=document.getElementById(e);t&&t.classList.contains("show")&&t.classList.toggle("show")}},{key:"handleSubmit2",value:function(e,t){var a=this;e.preventDefault(),t({variables:{id:this.props.commentId}}).then((function(){return a.handleSubmitToggle("".concat(a.props.commentId))}))}},{key:"render",value:function(){var e=this;return L()?this.props.user===L().username&&this.props.comment.replies.length>0?r.a.createElement(V.a,{mutation:Le,refetchQueries:function(){return[{query:De,variables:{id:e.props.videoId}}]}},(function(t,a){a.data;return r.a.createElement("div",null,r.a.createElement("form",{className:"delete-button",onSubmit:function(a){return e.handleSubmit(a,t)}},r.a.createElement("button",{type:"submit"},"Delete")))})):this.props.user===L().username?r.a.createElement(V.a,{mutation:Te,refetchQueries:function(){return[{query:De,variables:{id:e.props.videoId}}]}},(function(t,a){a.data;return r.a.createElement("div",null,r.a.createElement("form",{className:"delete-button",onSubmit:function(a){return e.handleSubmit2(a,t)}},r.a.createElement("button",{type:"submit"},"Delete")))})):r.a.createElement("div",null):r.a.createElement("div",null)}}]),t}(r.a.Component),Fe=function(e,t){var a=t.comment._id;return L()&&L().username===e?r.a.createElement("div",{className:"options-popup"},r.a.createElement("i",{onClick:function(e){return function(e,t){e.preventDefault();var a=document.getElementById(t);a&&a.classList.toggle("show")}(e,a)},className:"fas fa-ellipsis-h edit-button-font"}),r.a.createElement("div",{className:"optionstext",id:a},r.a.createElement(Ne,{videoId:t.videoId,comment:t.comment}),r.a.createElement(xe,{comment:t.comment,commentId:t.comment._id,videoId:t.videoId,user:t.comment.author.username}))):r.a.createElement("div",null)},Ve=function(e){var t=new Date(+e.comment.date),a=t.getFullYear(),n=t.getMonth(),i=t.getDate(),l=(e.comment._id,e.comment.author.image?e.comment.author.image:"/stylesheets/images/default_avatar_2.png"),s=e.comment.gif?r.a.createElement("img",{alt:e.comment.text,className:"main-comment-gif",src:e.comment.gif}):null,o=e.comment.author.username;return"!(!DELETE!)!"!==e.comment.text?r.a.createElement("div",{className:"main-comment-index"},r.a.createElement("div",{className:"main-comment-top"},r.a.createElement("img",{src:l,className:"comment-create-avatar"}),r.a.createElement("div",{className:"main-comment-name"},e.comment.author.username),r.a.createElement("div",{className:"edit-comment"},r.a.createElement("div",{className:"main-comment-year"},a+"-"+n+"-"+i),Fe(o,e))),r.a.createElement("div",{className:"main-comment-text"},e.comment.text),s,r.a.createElement("div",{className:"comment-index-reply"},r.a.createElement(je,{parentId:e.comment._id,videoId:e.videoId})),r.a.createElement("div",{className:"comment-reply-index"},r.a.createElement(Se,{commentId:e.comment._id,videoId:e.videoId}))):r.a.createElement("div",null,r.a.createElement("div",{className:"deleted-comment"},"Comment has been deleted"),r.a.createElement("div",{className:"comment-reply-index"},r.a.createElement(Se,{commentId:e.comment._id,videoId:e.videoId})))},$e=D.FETCH_VIDEO,Ue=function(e){function t(){return Object(v.a)(this,t),Object(E.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(V.b,{query:$e,variables:{id:this.props.videoId}},(function(t){var a=t.loading,n=t.error,i=t.data;if(a)return r.a.createElement("p",null,"Loading...");if(n)return r.a.createElement("p",null,"Error");var l=i.video.comments.map((function(t){return r.a.createElement("div",null,r.a.createElement(Ve,{comment:t,videoId:e.props.videoId}))}));return r.a.createElement("div",{className:"comment-index"},l)}))}}]),t}(r.a.Component),Re=D.FETCH_VIDEO,qe=me.ADD_VIDEO_LIKE,Me=me.REMOVE_VIDEO_LIKE,Pe=me.ADD_VIDEO_DISLIKE,Be=me.REMOVE_VIDEO_DISLIKE,Qe=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).state={currentUser:L(),hasLiked:!1},a.hasLiked=a.hasLiked.bind(Object(Ee.a)(a)),a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"handleLike",value:function(e,t){var a=this;e.preventDefault(),t({variables:{videoId:this.props.videoId,userId:this.state.currentUser.id}}).then((function(e){a.setState({hasLiked:!0})}))}},{key:"handleRemoveLike",value:function(e,t){var a=this;e.preventDefault(),t({variables:{videoId:this.props.videoId,userId:this.state.currentUser.id}}).then((function(e){a.setState({hasLiked:!1})}))}},{key:"handleDislike",value:function(e,t){var a=this;e.preventDefault(),t({variables:{videoId:this.props.videoId,userId:this.state.currentUser.id}}).then((function(e){a.setState({hasDisliked:!0})}))}},{key:"handleRemoveDislike",value:function(e,t){var a=this;e.preventDefault(),t({variables:{videoId:this.props.videoId,userId:this.state.currentUser.id}}).then((function(e){a.setState({hasDisliked:!1})}))}},{key:"updateCache",value:function(e,t){var a,n=t.data.addVideoLike,r=t.data.removeVideoLike,i=t.data.addVideoDislike,l=t.data.removeVideoDislike;try{a=e.readQuery({query:Re,variables:{id:this.props.videoId}})}catch(f){return}if(a&&n){for(var s=a.video.likes,o=a.video.dislikes,c=0;c<o.length;c++){o[c]._id===n._id&&o.splice(c,1)}a=Object.assign({},a.video,{likes:s.concat(n),dislikes:o}),e.writeQuery({query:Re,variables:{id:this.props.videoId},data:{video:a}})}else if(a&&r){for(var m=a.video.likes,u=0;u<m.length;u++){m[u]._id===r._id&&m.splice(u,1)}a=Object.assign({},a.video,{likes:m}),e.writeQuery({query:Re,variables:{id:this.props.videoId},data:{video:a}})}else if(a&&i){for(var d=a.video.dislikes,p=a.video.likes,v=0;v<p.length;v++){p[v]._id===i._id&&p.splice(v,1)}a=Object.assign({},a.video,{likes:p,dislikes:d.concat(i)}),e.writeQuery({query:Re,variables:{id:this.props.videoId},data:{video:a}})}else if(a&&l){for(var h=a.video.dislikes,E=0;E<h.length;E++){h[E]._id===l._id&&h.splice(E,1)}a=Object.assign({},a.video,{dislikes:h}),e.writeQuery({query:Re,variables:{id:this.props.videoId},data:{video:a}})}this.hasLiked()}},{key:"getLikeCount",value:function(){var e=this.props.likes.length;return 0===e?r.a.createElement("p",null,"No likes"):1===e?r.a.createElement("p",null,"1 like"):r.a.createElement("p",null,e," likes")}},{key:"getDislikeCount",value:function(){var e=this.props.dislikes.length;return 0===e?r.a.createElement("p",null,"No dislikes"):1===e?r.a.createElement("p",null,"1 dislike"):r.a.createElement("p",null,e," dislikes")}},{key:"handleToggle",value:function(e){e.preventDefault();var t=document.getElementById("myPopup");t&&t.classList.toggle("show")}},{key:"hasLiked",value:function(){var e,t,a=this,n=this.props.dislikes,i=this.props.likes;if(!L())return r.a.createElement("div",{className:"like-bar"},r.a.createElement("div",{className:"popup like-display",onClick:function(e){return a.handleToggle(e)}},r.a.createElement("i",{className:"far fa-thumbs-up unliked-thumb"}),this.getLikeCount(),r.a.createElement("div",{className:"dislike-display"},r.a.createElement("i",{className:"far fa-thumbs-down unliked-thumb"}),this.getDislikeCount()),r.a.createElement("div",{class:"popuptext",id:"myPopup"},r.a.createElement(c.b,{className:"like-sign-in",to:"/login"},"Sign in!"))));for(var l=0;l<i.length;l++){if(i[l]._id===this.state.currentUser.id){e=!0;break}e=!1}for(var s=0;s<n.length;s++){if(n[s]._id===this.state.currentUser.id){t=!0;break}t=!1}return e||t?e&&!t?r.a.createElement("div",{className:"like-bar"},r.a.createElement(V.a,{mutation:Me,update:function(e,t){return a.updateCache(e,t)}},(function(e,t){t.data;return r.a.createElement("div",null,r.a.createElement("form",{className:"like-display",onSubmit:function(t){return a.handleRemoveLike(t,e)}},r.a.createElement("button",{type:"submit"},r.a.createElement("i",{className:"far fa-thumbs-up liked-thumb"})),a.getLikeCount()))})),r.a.createElement(V.a,{mutation:Pe,update:function(e,t){return a.updateCache(e,t)}},(function(e,t){t.data;return r.a.createElement("div",null,r.a.createElement("form",{className:"dislike-display",onSubmit:function(t){return a.handleDislike(t,e)}},r.a.createElement("button",{type:"submit"},r.a.createElement("i",{class:"far fa-thumbs-down unliked-thumb"})),a.getDislikeCount()))}))):!e&&t?r.a.createElement("div",{className:"like-bar"},r.a.createElement(V.a,{mutation:qe,update:function(e,t){return a.updateCache(e,t)}},(function(e,t){t.data;return r.a.createElement("div",null,r.a.createElement("form",{className:"like-display",onSubmit:function(t){return a.handleLike(t,e)}},r.a.createElement("button",{type:"submit"},r.a.createElement("i",{class:"far fa-thumbs-up unliked-thumb"})),a.getLikeCount()))})),r.a.createElement(V.a,{mutation:Be,update:function(e,t){return a.updateCache(e,t)}},(function(e,t){t.data;return r.a.createElement("div",null,r.a.createElement("form",{className:"dislike-display",onSubmit:function(t){return a.handleRemoveDislike(t,e)}},r.a.createElement("button",{type:"submit"},r.a.createElement("i",{className:"far fa-thumbs-down liked-thumb"})),a.getDislikeCount()))}))):void 0:r.a.createElement("div",{className:"like-bar"},r.a.createElement(V.a,{mutation:qe,update:function(e,t){return a.updateCache(e,t)}},(function(e,t){t.data;return r.a.createElement("div",null,r.a.createElement("form",{className:"like-display",onSubmit:function(t){return a.handleLike(t,e)}},r.a.createElement("button",{type:"submit"},r.a.createElement("i",{class:"far fa-thumbs-up unliked-thumb"})),a.getLikeCount()))})),r.a.createElement(V.a,{mutation:Pe,update:function(e,t){return a.updateCache(e,t)}},(function(e,t){t.data;return r.a.createElement("div",null,r.a.createElement("form",{className:"dislike-display",onSubmit:function(t){return a.handleDislike(t,e)}},r.a.createElement("button",{type:"submit"},r.a.createElement("i",{class:"far fa-thumbs-down unliked-thumb"})),a.getDislikeCount()))})))}},{key:"render",value:function(){return r.a.createElement("div",null,this.hasLiked())}}]),t}(r.a.Component),He=Object(z.a)(Re)(Qe),Ae=D.FETCH_VIDEO,Ge=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).state={currentUser:L(),hasLiked:!1},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(V.b,{query:Ae,variables:{id:this.props.videoId}},(function(t){var a=t.loading,n=t.error,i=t.data;if(a)return r.a.createElement("p",null,"Loading...");if(n)return r.a.createElement("p",null,"Error");var l=i.video.likes,s=i.video.dislikes;return r.a.createElement("div",{className:"like-bar"},r.a.createElement(He,{likes:l,dislikes:s,videoId:e.props.videoId}))}))}}]),t}(r.a.Component),Ke=D.FETCH_VIDEOS,Ye=function(e){function t(){return Object(v.a)(this,t),Object(E.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"renderVideos",value:function(){return this.props.data.videos.slice(this.props.data.videos.length-5).map((function(e){var t=e._id,a=e.title,n=e.url;return r.a.createElement("div",{key:t,className:"mini-video-container"},r.a.createElement("div",{className:"mini-vid-player"},r.a.createElement("object",{className:"mini-video-player"},r.a.createElement("param",{name:"movie",value:"".concat(n,"?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0")}),r.a.createElement("param",{name:"allowFullScreen",value:"true"}),r.a.createElement("param",{name:"allowscriptaccess",value:"always"}),r.a.createElement("embed",{src:"".concat(n,"?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0"),type:"application/x-shockwave-flash",className:"video-player",allowscriptaccess:"always",allowFullScreen:!0}))),r.a.createElement("div",{className:"mini-video-info"},r.a.createElement(c.b,{to:"/videos/".concat(t)},r.a.createElement("p",{className:"mini-video-title clickable"},a))))}))}},{key:"render",value:function(){return this.props.data.loading||!this.props.data.videos?null:r.a.createElement("div",null,r.a.createElement("div",{className:"mini-container"},r.a.createElement("div",{className:"flex-grid"},r.a.createElement("section",{className:"main"},r.a.createElement("p",{className:"mini-index-title"},"Videos For You"),r.a.createElement("div",{className:"col"},this.renderVideos())))))}}]),t}(n.Component),ze=Object(z.a)(Ke,{options:function(e){return{variables:{criteria:void 0,perPage:0,pageNumber:0}}}})(Ye),Je=D.FETCH_VIDEO,We=me.VIDEO_COMMENT,Ze=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).state={text:"",gif:"",error:""},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"handleToggle",value:function(e){e&&e.preventDefault();var t=document.getElementById("myGiphy");t&&t.classList.toggle("show")}},{key:"handleSubmitToggle",value:function(){var e=document.getElementById("myGiphy");e&&e.classList.contains("show")&&e.classList.toggle("show")}},{key:"update",value:function(e){var t=this;return function(a){t.setState(Object(u.a)({},e,a.target.value))}}},{key:"handleSubmit",value:function(e,t){var a=this;e.preventDefault();var n=this.state.text,r=this.state.gif;""!==this.state.text?t({variables:{text:n,author:L().id,videoId:this.props.videoId,gif:r}}).then((function(e){a.setState({text:"",gif:"",error:""})})).then((function(e){r&&a.handleSubmitToggle()})):this.setState({error:"GraphQL error: Cannot return null for non-nullable field CommentType.text."})}},{key:"updateCache",value:function(e,t){var a,n=t.data.addVideoComment;try{a=e.readQuery({query:Je,variables:{id:this.props.videoId}})}catch(i){return}if(a){var r=a.video.comments;a=Object.assign({},a.video,{comments:r.concat(n)}),e.writeQuery({query:Je,variables:{id:this.props.videoId},data:{video:a}})}}},{key:"updategif",value:function(e){this.setState({gif:e.downsized.url})}},{key:"render",value:function(){var e,t=this,a=L(),n=a&&a.image?a.image:"/stylesheets/images/default_avatar_2.png";return a?("GraphQL error: Cannot return null for non-nullable field CommentType.text."===this.state.error&&(e="Comment must have text"),r.a.createElement(V.a,{onError:function(e){t.setState({error:e.message})},mutation:We,update:function(e,a){return t.updateCache(e,a)}},(function(a,i){i.data;return r.a.createElement("div",{className:"create-form"},r.a.createElement("div",{className:"comment-create-position"},r.a.createElement("img",{src:n,className:"comment-create-avatar"}),r.a.createElement("form",{className:"comment-submit-form",onSubmit:function(e){return t.handleSubmit(e,a)}},r.a.createElement("input",{type:"text-area",className:"comment-create-input",value:t.state.text,onChange:t.update("text"),placeholder:"Commenting publicly as ".concat(L().username)}),r.a.createElement("div",null,e),r.a.createElement("div",{className:"comment-create-buttons"},r.a.createElement("div",{className:"comment-create-btns"},r.a.createElement("div",{className:"gif-popup"},r.a.createElement("button",{className:"create-comment-button",onClick:function(e){return t.handleToggle(e)}},"Gif"),r.a.createElement("div",{className:"giftext",id:"myGiphy"},r.a.createElement(de.a,{id:"giphy-picker",apiKey:"EeZhW081PZQ2Abce60Y4EQulHVTzcbRA",onSelected:t.updategif.bind(t)}))),r.a.createElement("button",{className:"create-comment-button",type:"submit"},"Comment"))))))}))):r.a.createElement("div",{className:"create-form-1"},r.a.createElement("img",{src:n,className:"comment-create-avatar"}),r.a.createElement("input",{className:"comment-create-input",value:this.state.text,placeholder:"Must Be Signed In to Comment"}))}}]),t}(r.a.Component),Xe=Object(m.g)(Ze),et=me.ADD_TO_FAVORITES,tt=me.REMOVE_FROM_FAVORITES,at=D.FETCH_VIDEO,nt=D.FETCH_USER_FAVORITE_VIDEOS,rt=function(e){function t(){return Object(v.a)(this,t),Object(E.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"handleAddRemoveFavorite",value:function(e,t){e.preventDefault(),t({variables:{videoId:this.props.video._id,userId:L().id}})}},{key:"handleToggle",value:function(e){e.preventDefault();var t=document.getElementById("myPopup2");t&&t.classList.toggle("show")}},{key:"renderFavorite",value:function(){var e=this;return L()&&L().id?r.a.createElement(V.a,{mutation:et,refetchQueries:function(){return[{query:at,variables:{id:e.props.video._id}},{query:nt,variables:{id:L().id}}]}},(function(t,a){var n=a.loading,i=a.error;a.data;return n?r.a.createElement("i",{class:"fas fa-spinner"}):i?r.a.createElement("p",null,"Error :( Please try again"):r.a.createElement("i",{className:"far fa-heart",style:{cursor:"pointer"},onClick:function(a){return e.handleAddRemoveFavorite(a,t)}})})):r.a.createElement("div",{className:"popup2",onClick:function(t){return e.handleToggle(t)}},r.a.createElement("i",{className:"fas far fa-heart"}),r.a.createElement("div",{className:"popuptext2",id:"myPopup2"},r.a.createElement(c.b,{className:"like-sign-in",to:"/login"},"Sign in!")))}},{key:"renderUnFavorite",value:function(){var e=this;return r.a.createElement(V.a,{mutation:tt,refetchQueries:function(){return[{query:at,variables:{id:e.props.video._id}}]}},(function(t,a){var n=a.loading,i=a.error;a.data;return n?r.a.createElement("i",{class:"fas fa-spinner"}):i?r.a.createElement("p",null,"Error :( Please try again"):r.a.createElement("i",{className:"fas fa-heart fav-heart",style:{cursor:"pointer"},onClick:function(a){return e.handleAddRemoveFavorite(a,t)}})}))}},{key:"render",value:function(){var e=[];if(L()&&L().id){var t=L().id;e=this.props.video.favoriteBy.filter((function(e){return e._id.toString()===t}))}return r.a.createElement(r.a.Fragment,null,0===e.length?this.renderFavorite():this.renderUnFavorite())}}]),t}(n.Component),it=D.FETCH_VIDEO_LIKES,lt=D.FETCH_VIDEO,st=function(e){function t(){return Object(v.a)(this,t),Object(E.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"renderVideoDetail",value:function(){var e=this.props.data.video,t=e._id,a=e.title,n=e.url,i=e.description,l=e.comments,s=e.favoriteBy;return r.a.createElement("div",{key:t},r.a.createElement("div",{className:"video-detail-main"},r.a.createElement("div",{className:"detail-left-col"},r.a.createElement("object",{className:"video-detail-player"},r.a.createElement("param",{name:"movie",value:"".concat(n,"?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0")}),r.a.createElement("param",{name:"allowFullScreen",value:"true"}),r.a.createElement("param",{name:"allowscriptaccess",value:"always"}),r.a.createElement("embed",{src:"".concat(n,"?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0"),type:"application/x-shockwave-flash",className:"video-player",allowscriptaccess:"always",allowFullScreen:!0})),r.a.createElement("div",{className:"video-title-detail"},r.a.createElement("h3",null,a)),r.a.createElement("div",{className:"video-info-detail"},r.a.createElement("div",{className:"detail-comments-favs"},r.a.createElement("p",null,l.length," ",r.a.createElement("i",{class:"far fa-comments"})),r.a.createElement("p",{className:"video-fav-detail"},s.length," ",r.a.createElement(rt,{video:this.props.data.video}))),r.a.createElement("div",{className:"rate-likes"},r.a.createElement(Ge,{videoId:this.props.data.video._id,video:this.props.data.video}))),r.a.createElement("div",{className:"video-description-detail"},r.a.createElement("p",{className:"video-description-body"},i)),r.a.createElement("h1",{className:"video-comments"},"Comments"),r.a.createElement("div",{className:"commentCreate"},r.a.createElement(Xe,{videoId:this.props.data.video._id})),r.a.createElement("div",{className:"commentIndex"},r.a.createElement(Ue,{videoId:this.props.data.video._id}))),r.a.createElement(ze,{className:"mini-index"})))}},{key:"updateCache",value:function(e,t){var a,n=t.data.newLike;try{a=e.readQuery({query:it,variables:{id:this.props.data.video._id}})}catch(i){return}if(a){var r=a.likes;e.writeQuery({query:it,data:{likes:r.concat(n)}})}}},{key:"render",value:function(){return this.props.data.loading||!this.props.data.video?null:r.a.createElement("div",null,r.a.createElement(A,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"flex-grid"},r.a.createElement(G,null),r.a.createElement(F,null),r.a.createElement("section",{className:"detail-main"},r.a.createElement("div",{className:"row"},this.renderVideoDetail())))))}}]),t}(r.a.Component),ot=Object(z.a)(lt,{options:function(e){return{variables:{id:e.match.params.id}}}})(st),ct=me.REGISTER_USER,mt=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).updateImage=function(e){if(0!==e.target.files.length){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){a.setState({image:n.result})},n.readAsDataURL(t)}},a.state={username:"",email:"",password:"",password2:"",image:"/stylesheets/images/default_avatar_2.png",error:""},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"update",value:function(e){var t=this;return function(a){return t.setState(Object(u.a)({},e,a.target.value))}}},{key:"updateCache",value:function(e,t){var a=t.data;e.writeData({data:{isLoggedIn:a.register.loggedIn}})}},{key:"render",value:function(){var e,t=this,a="dark"===localStorage.theme?window.darkTheme:window.lightTheme;return"please fill in missing fields"===this.state.error?e="Please fill in missing fields":"GraphQL error: Email is invalid"===this.state.error?e="Invalid email":"GraphQL error: This user already exists"===this.state.error?e="User already exists":"GraphQL error: This username already exists"===this.state.error?e="Username already exists":"GraphQL error: Passwords do not match"===this.state.error&&(e="Passwords do not match"),r.a.createElement(V.a,{onError:function(e){t.setState({error:e.message})},mutation:ct,onCompleted:function(e){var t=e.register,a=t.token,n=t._id,r=t.username,i=t.image,l=t.email;localStorage.setItem("auth-token",a),localStorage.setItem("user",JSON.stringify({id:n,username:r,image:i,email:l}))},update:function(e,a){return t.updateCache(e,a)}},(function(n){return r.a.createElement("div",{className:"sign-up-form-page"},r.a.createElement("form",{className:"sign-up-form",onSubmit:function(e){e.preventDefault(),""!==t.state.password&&""!==t.state.username&&""!==t.state.email&&""!==t.state.password2?n({variables:{username:t.state.username,email:t.state.email,password:t.state.password,password2:t.state.password2,image:t.state.image}}):t.setState({error:"please fill in missing fields"})}},r.a.createElement(c.b,{to:"/"},r.a.createElement("img",{className:"signup-logo",src:a,alt:"signup"})),r.a.createElement("p",{className:"form-title"},"Create your PalTube Account"),r.a.createElement("div",null,e),r.a.createElement("input",{value:t.state.username,onChange:t.update("username"),placeholder:"Username",className:"signup-username"}),r.a.createElement("input",{value:t.state.email,onChange:t.update("email"),placeholder:"Email",className:"signup-email"}),r.a.createElement("input",{value:t.state.password,onChange:t.update("password"),type:"password",placeholder:"Password",className:"signup-password"}),r.a.createElement("input",{value:t.state.password2,onChange:t.update("password2"),type:"password",placeholder:"Confirm",className:"signup-password2"}),r.a.createElement("input",{type:"file",onChange:t.updateImage,className:"signup-password2"}),r.a.createElement("div",{className:"signup-direct"},r.a.createElement(c.b,{to:"/login",className:"link-login"},"Sign in instead"),r.a.createElement("button",{type:"submit",className:"signup-button"},"Sign up"))),r.a.createElement("div",{className:"signup-pic"},r.a.createElement("img",{src:t.state.image,className:"signup-avatar"}),r.a.createElement("img",{src:"/stylesheets/images/signuppic.png",alt:"signup"}),r.a.createElement("p",{className:"signup-pic-info"},"Join. Watch. Laugh.")))}))}}]),t}(n.Component),ut=me.LOGIN_USER,dt=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).state={emailOrUsername:"",password:"",error:""},a.handleDemoSubmit=a.handleDemoSubmit.bind(Object(Ee.a)(a)),a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"update",value:function(e){var t=this;return function(a){return t.setState(Object(u.a)({},e,a.target.value))}}},{key:"demoEffect",value:function(e,t){var a=this,n=this,r=0,i=setInterval((function(){r<e.emailOrUsername.length&&n.setState({emailOrUsername:a.state.emailOrUsername+e.emailOrUsername[r]}),r<e.password.length&&n.setState({password:a.state.password+e.password[r]}),++r>e.password.length&&r>e.emailOrUsername.length&&(clearInterval(i),t({variables:e}).then((function(){return a.props.history.push("/")})))}),200)}},{key:"handleDemoSubmit",value:function(e,t){e.preventDefault();this.demoEffect({emailOrUsername:"GuestUser",password:"password"},t)}},{key:"updateCache",value:function(e,t){var a=t.data;e.writeData({data:{isLoggedIn:a.login.loggedIn}})}},{key:"render",value:function(){var e,t=this,a="dark"===localStorage.theme?window.darkTheme:window.lightTheme;return"password and username is required"===this.state.error?e="password and username is required":"password is required"===this.state.error?e="password is required":"username is required"===this.state.error?e="username is required":"GraphQL error: Incorrect log in combination"===this.state.error&&(e="Incorrect log in combination"),r.a.createElement(V.a,{onError:function(e){t.setState({error:e.message})},mutation:ut,onCompleted:function(e){var a=e.login,n=a.token,r=a._id,i=a.username,l=a.image,s=a.email;localStorage.setItem("auth-token",n),localStorage.setItem("user",JSON.stringify({id:r,username:i,image:l,email:s})),t.props.history.push("/")},update:function(e,a){return t.updateCache(e,a)}},(function(n){return r.a.createElement("div",{className:"login-form-page"},r.a.createElement("div",{className:"login-pic"},r.a.createElement("img",{src:"/stylesheets/images/loginpic.png",alt:"login"}),r.a.createElement("p",{className:"login-pic-info"},"Welcome back to PalTube!")),r.a.createElement("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),""!==t.state.password||""!==t.state.emailOrUsername?""!==t.state.password?""!==t.state.emailOrUsername?n({variables:{emailOrUsername:t.state.emailOrUsername,password:t.state.password}}):t.setState({error:"username is required"}):t.setState({error:"password is required"}):t.setState({error:"password and username is required"})}},r.a.createElement(c.b,{to:"/"},r.a.createElement("img",{className:"login-logo",src:a,alt:"login"})),r.a.createElement("p",{className:"form-title"},"Sign into your account"),r.a.createElement("div",null,e),r.a.createElement("input",{value:t.state.emailOrUsername,onChange:t.update("emailOrUsername"),placeholder:"Email or Username",className:"login-email"}),r.a.createElement("input",{value:t.state.password,onChange:t.update("password"),type:"password",placeholder:"Password",className:"login-password"}),r.a.createElement("div",{className:"login-direct"},r.a.createElement("button",{type:"submit",className:"login-button"},"Sign In"),r.a.createElement("button",{onClick:function(e){return t.handleDemoSubmit(e,n)},type:"submit",className:"demo-button"},"Guest User")),r.a.createElement(c.b,{to:"/register",className:"link-signup"},"Sign up instead")))}))}}]),t}(n.Component),pt=a(50),vt=D.IS_LOGGED_IN,ht=function(e){var t=e.component,a=e.path,n=e.exact,i=e.routeType,l=Object(pt.a)(e,["component","path","exact","routeType"]);return r.a.createElement(V.b,{query:vt},(function(e){var s=e.data;return"auth"===i?r.a.createElement(m.b,{path:a,exact:n,render:function(e){return s.isLoggedIn?r.a.createElement(m.a,{to:"/"}):r.a.createElement(t,e)}}):r.a.createElement(m.b,Object.assign({},l,{render:function(e){return s.isLoggedIn?r.a.createElement(t,e):r.a.createElement(m.a,{to:"/login"})}}))}))},Et=D.FETCH_VIDEOS,ft=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).getCriteria=function(){return window.location.hash.split("/")[2]},a.onVideosFetched=function(e){if(0!==e.videos.length){var t=a.state.pageNumber+=1,n=a.state.data.videos.concat(e.videos);a.setState({data:{videos:n}}),a.setState({pageNumber:t}),a.setState({loading:!1,firstLoad:!1})}else a.setState({documentsFullyLoaded:!0,loading:!1})},a.handleScroll=function(e){a.state.firstLoad||a.state.loading||(a.state.documentsFullyLoaded&&window.removeEventListener("scroll",a.handleScroll),window.innerHeight+window.scrollY>=document.body.offsetHeight&&document.getElementById("btnLoad").click())},a.state={data:{videos:[]},pageNumber:0,perPage:16,loading:!1,firstLoad:!0,documentsFullyLoaded:!1,videosLength:0,criteria:void 0},a.props.history.listen((function(e,t){a.setState({data:{videos:[]},pageNumber:0,perPage:16,loading:!1,firstLoad:!0,documentsFullyLoaded:!1,videosLength:0}),a.setState({criteria:window.location.hash.split("/")[2]},(function(){document.getElementById("btnLoad").click()}))})),a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"renderSearchResult",value:function(){return this.state.loading?r.a.createElement("div",{className:"video-index-loading-div"},"loading..."):0===Object.values(this.state.data).length?null:this.state.data.videos.map((function(e){var t=e._id,a=e.title,n=e.url,i=e.description,l=e.comments,s=e.favoriteBy;return r.a.createElement("div",{className:"search-results-container",key:t},r.a.createElement("div",{className:"video-detail-container "},r.a.createElement("object",{className:"video-player"},r.a.createElement("param",{name:"movie",value:"".concat(n,"?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0")}),r.a.createElement("param",{name:"allowFullScreen",value:"true"}),r.a.createElement("param",{name:"allowscriptaccess",value:"always"}),r.a.createElement("embed",{src:"".concat(n,"?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0"),type:"application/x-shockwave-flash",className:"video-player",allowscriptaccess:"always",allowFullScreen:!0}))),r.a.createElement("div",{className:"video-detail-info-container"},r.a.createElement(c.b,{to:"/videos/".concat(t)},r.a.createElement("p",{className:"clickable"},a)),r.a.createElement("p",null,i),r.a.createElement("p",null,l.length," ",r.a.createElement("i",{className:"far fa-comments"})),r.a.createElement("p",null,s.length," ",r.a.createElement("i",{className:"fas fa-heart"}))))}))}},{key:"componentDidMount",value:function(){this.setState({criteria:window.location.hash.split("/")[2]},(function(){document.getElementById("btnLoad").click()})),window.addEventListener("scroll",this.handleScroll,{passive:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this;return r.a.createElement(o.a,null,(function(t){var a;return r.a.createElement("div",{id:"scrollDiv"},r.a.createElement(A,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"flex-grid"},r.a.createElement(G,null),r.a.createElement(F,null),r.a.createElement("section",{className:"main"},r.a.createElement("h3",null,"Searching for ",e.state.criteria),r.a.createElement("div",{className:"row"},e.state.data&&e.renderSearchResult(e.state.data)),r.a.createElement("div",{style:{width:"1px",height:"1px"}},r.a.createElement("button",(a={style:{width:"1px",height:"1px"},id:"btnLoad"},Object(u.a)(a,"style",{width:"100%",backgroundColor:"darkgrey"}),Object(u.a)(a,"onClick",(function(a){var n,r;return p.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return a.preventDefault(),e.setState({loading:!0}),i.next=4,p.a.awrap(t.query({query:Et,variables:{criteria:e.state.criteria,perPage:e.state.perPage,pageNumber:e.state.pageNumber},fetchPolicy:"network-only"}));case 4:n=i.sent,r=n.data,e.onVideosFetched(r);case 7:case"end":return i.stop()}}))})),a)))))))}))}}]),t}(n.Component),gt=Object(m.g)(ft),bt=D.FETCH_USER_LIKED_VIDEOS,yt=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).renderVideos=function(){var e=L().id;return r.a.createElement(V.b,{query:bt,variables:{id:e},onCompleted:function(e){return a.setState({videosLength:e.user.videos_liked.length})}},(function(e){var t=e.loading,a=e.error,n=e.data;return t?"Loading...":a?"Error! ".concat(a.message):n.user.videos_liked.map((function(e){var t=e._id,a=e.title,n=e.url,i=e.description,l=e.comments,s=e.favoriteBy;return r.a.createElement("div",{className:"search-results-container",key:t},r.a.createElement("div",{className:"video-detail-container "},r.a.createElement("object",{className:"video-player"},r.a.createElement("param",{name:"movie",value:"".concat(n,"?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0")}),r.a.createElement("param",{name:"allowFullScreen",value:"true"}),r.a.createElement("param",{name:"allowscriptaccess",value:"always"}),r.a.createElement("embed",{src:"".concat(n,"?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0"),type:"application/x-shockwave-flash",className:"video-player",allowscriptaccess:"always",allowFullScreen:!0}))),r.a.createElement("div",{className:"video-detail-info-container"},r.a.createElement(c.b,{to:"/videos/".concat(t)},r.a.createElement("p",{className:"clickable"},a)),r.a.createElement("p",null,i),r.a.createElement("p",null,l.length," ",r.a.createElement("i",{class:"far fa-comments"})),r.a.createElement("p",null,s.length," ",r.a.createElement("i",{class:"fas fa-heart"}))))}))}))},a.state={videosLength:0},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return L()||this.props.history.push("/login"),r.a.createElement("div",{className:"container"},r.a.createElement(A,null),r.a.createElement("div",{className:"flex-grid"},r.a.createElement(G,null),r.a.createElement(F,null),r.a.createElement("section",{className:"main"},r.a.createElement("div",null,r.a.createElement("h5",null,"you have liked ",this.state.videosLength," videos..."),this.renderVideos()))))}}]),t}(n.Component),kt=D.FETCH_USER_FAVORITE_VIDEOS,Nt=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).renderVideos=function(){var e=L().id;return r.a.createElement(V.b,{query:kt,variables:{id:e},onCompleted:function(e){return a.setState({videosLength:e.user.favoriteVideos.length})}},(function(e){var t=e.loading,a=e.error,n=e.data;return t?"Loading...":a?"Error! ".concat(a.message):n.user.favoriteVideos.map((function(e){var t=e._id,a=e.title,n=e.url,i=e.description,l=e.comments,s=e.favoriteBy;return r.a.createElement("div",{className:"search-results-container",key:t},r.a.createElement("div",{className:"video-detail-container "},r.a.createElement("object",{className:"video-player"},r.a.createElement("param",{name:"movie",value:"".concat(n,"?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0")}),r.a.createElement("param",{name:"allowFullScreen",value:"true"}),r.a.createElement("param",{name:"allowscriptaccess",value:"always"}),r.a.createElement("embed",{src:"".concat(n,"?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0"),type:"application/x-shockwave-flash",className:"video-player",allowscriptaccess:"always",allowFullScreen:!0}))),r.a.createElement("div",{className:"video-detail-info-container"},r.a.createElement(c.b,{to:"/videos/".concat(t)},r.a.createElement("p",{className:"clickable"},a)),r.a.createElement("p",null,i),r.a.createElement("p",null,l.length," ",r.a.createElement("i",{class:"far fa-comments"})),r.a.createElement("p",null,s.length," ",r.a.createElement("i",{class:"fas fa-heart"}))))}))}))},a.state={videosLength:0},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return L()||this.props.history.push("/login"),r.a.createElement("div",{className:"container"},r.a.createElement(A,null),r.a.createElement("div",{className:"flex-grid"},r.a.createElement(G,null),r.a.createElement(F,null),r.a.createElement("section",{className:"main"},r.a.createElement("div",null,r.a.createElement("h5",null,"you have ",this.state.videosLength," favorite videos ... "),this.renderVideos()))))}}]),t}(n.Component),It=D.FETCH_USER,Ot=function(e){function t(){return Object(v.a)(this,t),Object(E.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(V.b,{query:It,variables:{id:this.props.match.params.userId}},(function(e){var t=e.loading,a=e.error,n=e.data;if(t)return r.a.createElement("p",null,"Loading...");if(a)return r.a.createElement("p",null,"Error");var i,l=n.user.username,s=n.user.image,o=n.user.email,m=new Date(+n.user.date),u=m.getFullYear(),d=m.getMonth(),p=m.getDate(),v=Object.values(n.user.videos_liked);if(v.length>0){var h=v[v.length-1],E=h._id,f=h.url,g=h.title;i=r.a.createElement("div",{className:"video-container-1"},"Last liked video!",r.a.createElement("div",null,r.a.createElement("object",{className:"video-player-1"},r.a.createElement("param",{name:"movie",value:"".concat(f,"?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0&rel=0&modest=1")}),r.a.createElement("param",{name:"allowFullScreen",value:"true"}),r.a.createElement("param",{name:"allowscriptaccess",value:"always"}),r.a.createElement("embed",{src:"".concat(f,"?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0&rel=0&modest=1"),type:"application/x-shockwave-flash",className:"video-player",allowscriptaccess:"always",allowFullScreen:!0}))),r.a.createElement("div",{className:"video-info"},r.a.createElement(c.b,{to:"/videos/".concat(E)},r.a.createElement("p",{className:"video-title clickable"},g))))}else i=r.a.createElement("div",null,r.a.createElement("p",null,"No liked videos yet!"),r.a.createElement("div",{className:"user-profile-novideo"},r.a.createElement("i",{className:"fas fa-exclamation-triangle"})));return r.a.createElement("div",null,r.a.createElement(A,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"flex-grid"},r.a.createElement(G,null),r.a.createElement(F,null),r.a.createElement("div",{className:"user-profile"},r.a.createElement("img",{src:s,className:"user-profile-image"}),r.a.createElement("div",{className:"user-profile-name"},l),r.a.createElement("div",{className:"user-profile-email"},o),r.a.createElement("div",{className:"user-profile-date"},"Joined: ",u+"-"+d+"-"+p),i))))}))}}]),t}(r.a.Component),wt=Object(m.g)(Ot),St=function(){return r.a.createElement("div",null,r.a.createElement(m.d,null,r.a.createElement(ht,{path:"/register",component:mt,routeType:"auth"}),r.a.createElement(m.b,{exact:!0,path:"/",component:Y}),r.a.createElement(m.b,{exact:!0,path:"/videos/likes",component:yt}),r.a.createElement(m.b,{exact:!0,path:"/videos/favorites",component:Nt}),r.a.createElement(ht,{path:"/profile/:userId",component:wt,routeType:"profile"}),r.a.createElement(m.b,{path:"/videos/:id",component:ot}),r.a.createElement(m.b,{path:"/search/:criteria",component:gt}),r.a.createElement(ht,{path:"/login",component:dt,routeType:"auth"})))},_t=a(52),Ct=a(53),jt=a(51),Dt=a(19),Lt=me.VERIFY_USER,Tt=localStorage.getItem("auth-token"),xt=new _t.a({dataIdFromObject:function(e){return e._id||null}}),Ft=Object(Ct.a)({credentials:"same-origin",uri:"http://localhost:5000/graphql"}),Vt=Object(jt.a)((function(e){var t=e.graphQLErrors;t&&t.map((function(e){var t=e.message;return console.log(t)}))})),$t=new s.c({link:Dt.a.from([Vt,Ft]),cache:xt,headers:{authorization:localStorage.getItem("auth-token")},onError:function(e){var t=e.networkError,a=e.graphQLErrors;console.log("graphQLErrors",a),console.log("networkError",t)}});xt.writeData({data:{isLoggedIn:Boolean(Tt)}}),Tt&&$t.mutate({mutation:Lt,variables:{token:Tt}}).then((function(e){var t=e.data;xt.writeData({data:{isLoggedIn:t.verifyUser.loggedIn}})}));l.a.render(r.a.createElement((function(){return r.a.createElement(o.b,{client:$t},r.a.createElement(c.a,null,r.a.createElement(St,null)))}),null),document.querySelector("#root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.c7fedae3.chunk.js.map