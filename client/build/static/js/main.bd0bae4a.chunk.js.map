{"version":3,"sources":["graphql/queries.js","util/util.js","components/ui/SideBar.js","components/ui/MiniSideBar.js","components/Nav.js","json_files/search_suggestions.js","components/ui/SearchBar.js","components/NavBar.js","components/Videos/VideoIndex.js","graphql/mutations.js","components/Comments/ReplyCommentCreate.js","components/Comments/CommentDelete.js","components/Comments/EditComment.js","components/Comments/CommentReplyItem.js","components/Comments/CommentReplyIndex.js","components/Comments/CommentReplyCreate.js","components/Comments/CommentRootDelete.js","components/Comments/CommentIndexItem.js","components/Comments/CommentIndex.js","components/Like/LikeDislike.js","components/Like/LikeVideo.js","components/Videos/MiniIndex.js","components/Comments/CommentCreate.js","components/favorite/Favorite.js","components/Videos/VideoDetail.js","components/User/Register.js","components/User/Login.js","util/route_util.js","components/Videos/VideoSearch.js","components/Videos/LikedVideos.js","components/Videos/FavoriteVideos.js","App.js","index.js"],"names":["IS_LOGGED_IN","gql","FETCH_VIDEO","FETCH_COMMENT","FETCH_VIDEOS","FETCH_VIDEO_LIKES","FETCH_USER_LIKED_VIDEOS","FETCH_USER_FAVORITE_VIDEOS","currentUser","JSON","parse","localStorage","getItem","window","addEventListener","event","src","darkTheme","lightTheme","document","getElementById","changeTheme","currentTheme","link","createElement","href","rel","type","body","appendChild","changeThemeLogo","getCurrentTheme","SideBar","props","theme","target","checked","setItem","profileSrc","image","username","className","alt","id","onChange","this","to","Component","MiniSideBar","Queries","Nav","client","query","data","isLoggedIn","profileEmail","email","profileUsername","onClick","e","preventDefault","navLogoutPopup","classList","toggle","handleToggle","removeItem","writeData","gendersJson","name","value","getSuggestions","inputValue","trim","toLowerCase","length","searchSuggestions","filter","item","toLocaleLowerCase","includes","getSuggestionValue","suggestion","renderSuggestion","SearchBar","handleKeydown","getAttribute","key","keyCode","location","state","handleSearchClick","onSuggestionsFetchRequested","setState","suggestions","onSuggestionsClearRequested","newValue","method","referrer","inputProps","placeholder","style","display","highlightFirstSuggestion","NavBar","toggleMenu","sideBar","getElementsByClassName","miniSideBar","toggleClassSide","contains","toggleClassMini","remove","add","VideoIndex","videos","map","_id","title","url","allowscriptaccess","allowFullScreen","loading","renderVideos","graphql","LOGIN_USER","REGISTER_USER","VERIFY_USER","VIDEO_COMMENT","REPLY_COMMENT","DELETE_COMMENT","UPDATE_COMMENT","ADD_VIDEO_LIKE","REMOVE_VIDEO_LIKE","ADD_VIDEO_DISLIKE","REMOVE_VIDEO_DISLIKE","ADD_TO_FAVORITES","REMOVE_FROM_FAVORITES","Mutations","ReplyCommentCreate","text","user","gif","error","field","addReplyComment","variables","author","parentCommentId","parentId","then","cache","video","readQuery","videoId","err","commentsArray","Object","assign","comments","i","replies","push","writeQuery","downsized","onError","message","mutation","update","updateCache","onSubmit","handleSubmit","apiKey","onSelected","updategif","bind","React","CommentDelete","deleteComment","commentId","refetchQueries","EditComment","comment","updateComment","CommentReplyItem","date","Date","year","getFullYear","month","getMonth","day","getDate","CommentReplyIndex","reply","CommentReplyCreate","CommentRootDelete","handleSubmit2","CommentIndexItem","LikeDislike","hasLiked","VideoLike","userId","VideoRemoveLike","VideoDislike","hasDisliked","VideoRemoveDislike","addVideoLike","removeVideoLike","addVideoDislike","removeVideoDislike","likeArray","likes","dislikeArray","dislikes","splice","concat","countLike","countDislike","popup","liked","disliked","getLikeCount","class","handleRemoveLike","handleDislike","getDislikeCount","handleLike","handleRemoveDislike","LikeVideo","MiniIndex","slice","CommentCreate","addVideoComment","commentArray","withRouter","Query","Favorite","func","AddToFavorites","cursor","handleAddRemoveFavorite","RemoveFromFavorites","inUserFavorites","favoriteBy","toString","renderFavorite","renderUnFavorite","VideoDetail","description","newLike","likesArray","renderVideoDetail","options","match","params","Register","updateImage","files","file","reader","FileReader","onloadend","result","readAsDataURL","password","password2","register","loggedIn","onCompleted","token","stringify","registerUser","Login","emailOrUsername","handleDemoSubmit","demoUser","loginUser","that","index","demoIntervalId","setInterval","clearInterval","history","demoEffect","login","AuthRoute","component","path","exact","routeType","rest","render","VideoSearch","renderSearchResult","criteria","videosLength","LikedVideos","videos_liked","FavoriteVideos","favoriteVideos","App","Mutation","InMemoryCache","dataIdFromObject","object","httpLink","createHttpLink","credentials","errorLink","graphQLErrors","console","log","ApolloClient","ApolloLink","from","headers","authorization","networkError","Boolean","mutate","verifyUser","ReactDOM","querySelector"],"mappings":"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","file":"static/js/main.bd0bae4a.chunk.js","sourcesContent":["import gql from \"graphql-tag\";\n\nexport default {\n  IS_LOGGED_IN: gql`\n    query IsUserLoggedIn {\n      isLoggedIn @client\n    }\n  `,\n  FETCH_VIDEO: gql`\n  query queryVideo($id:ID!){\n  video(_id:$id){\n     _id\n    title\n    description\n    category\n    url\n    likes {\n      _id\n    }\n    dislikes {\n      _id\n    }\n    keywords\n    comments {\n      _id\n      text\n      date\n      gif\n      author {\n        username\n        image\n      }\n      replies {\n        _id\n        text\n        date\n        gif\n        author {\n          username\n          image\n        }\n      }\n    }\n    favoriteBy{\n      _id\n    }\n     }\n    }\n  `,\n  FETCH_COMMENT: gql`\n  query FetchComment($id: ID!){\n  comment (_id: $id) {\n    _id\n    text\n    date\n    gif\n    author {\n      username\n      image\n    }\n    date\n    replies {\n      _id\n      text\n      date\n      gif\n      author {\n        username\n        image\n      }\n    }\n  }\n}\n`,\n  FETCH_VIDEOS: gql`\n  query filterVideos($criteria: String){\n  videos(criteria: $criteria){\n      _id\n      title\n      description\n      category\n      url\n      keywords\n      comments{\n        _id\n      }\n      favoriteBy{\n        _id\n      }\n    }\n  }\n\n `,\n  FETCH_VIDEO_LIKES: gql`\n    query FetchVideoLikes($id: ID!) {\n      video(_id: $id){ \n        likes {\n          _id\n          username\n        }\n      }\n    }\n  `,\n  FETCH_USER_LIKED_VIDEOS: gql`\n    query FetchUserLikedVideos($id: ID!) {\n      user(_id: $id){\n        _id\n        videos_liked{\n          _id\n          title\n          url\n          description\n        comments{\n          _id\n        }\n        favoriteBy{\n          _id\n        }\n        }\n      }\n    }\n  `,\n  FETCH_USER_FAVORITE_VIDEOS: gql`\n    query FetchUserFavoriteVideos($id: ID!) {\n      user(_id: $id){\n        _id, username\n      favoriteVideos{\n        _id, title, url, description\n        comments{\n          _id\n        }\n        favoriteBy{\n          _id\n        }\n      }\n      }\n    }\n  `\n};\n","export const currentUser = () => {\n  return JSON.parse(localStorage.getItem(\"user\"));\n}\n\nwindow.addEventListener('DOMContentLoaded', (event) => {\n  let currentTheme = localStorage.getItem(\"theme\");\n  let src = currentTheme === \"dark\" ? window.darkTheme : window.lightTheme;\n  if (document.getElementById(\"site-logo\")) {\n    document.getElementById(\"site-logo\").src = src; \n  }\n});\n\nexport const changeThemeLogo = () => {\n  let currentTheme = localStorage.getItem(\"theme\");\n  let src = currentTheme === \"dark\" ? window.darkTheme : window.lightTheme;\n  if (document.getElementById(\"site-logo\")) {\n  document.getElementById(\"site-logo\").src = src; \n  }\n}\n\nexport const changeTheme = () => {\n  let currentTheme = localStorage.getItem(\"theme\");\n  var link = document.createElement(\"link\");\n  link.href = currentTheme !== \"dark\" ? \"../stylesheets/components/light_theme.css\" : \"../stylesheets/components/dark_theme.css\";\n  link.rel = \"stylesheet\";\n  link.type = \"text/css\";\n  document.body.appendChild(link);\n  changeThemeLogo();\n}\n\nexport const initializeTheme = () => {\n  let isThemeExist = localStorage.getItem(\"theme\");\n  if (isThemeExist) {\n    changeTheme();\n  } else {\n    localStorage.setItem(\"theme\", \"dark\");\n    changeTheme();\n  }\n}\n\nexport const getCurrentTheme = () => {\n  return localStorage.getItem(\"theme\");\n}","import React, { Component } from 'react';\nimport { currentUser } from '../../util/util'\nimport { Link } from 'react-router-dom'\nimport { changeTheme, getCurrentTheme } from '../../util/util'\n\nclass SideBar extends Component {\n\n  constructor(props) {\n    super(props)\n  }\n  componentDidMount() {\n    document.getElementById(\"chkTheme\").checked = getCurrentTheme() === 'dark';\n  }\n\n  changeTheme = (event) => {\n    let theme = event.target.checked ? 'dark' : 'light';\n    localStorage.setItem('theme', theme);\n    changeTheme();\n  }\n\n  render() {\n    let profileSrc = currentUser() ? currentUser().image : \"/stylesheets/images/default_avatar_2.png\";\n    let username = currentUser() ? currentUser().username : \"guest\";\n    return (\n      <aside className=\"sidebar hide\">\n        <div className=\"sidebar-user-info\">\n          <img src={profileSrc} className=\"sidebar-avatar\" alt={username} />\n          <p className=\"sidebar-username\">{username}</p>\n          <label className=\"switch\">\n            <input id=\"chkTheme\" type=\"checkbox\" onChange={this.changeTheme} />>\n            <span className=\"slider\"></span>\n          </label>\n        </div>\n\n        <hr />\n        <ul>\n          <li className=\"clickable sidebar-section-header\">\n            <Link to=\"/\">\n              <i className=\"fas fa-home\">&nbsp;</i>\n              <span className=\"\">Home</span>\n            </Link>\n          </li>\n          {currentUser() &&\n            <>\n              <li className=\"clickable sidebar-section-header\">\n                <i className=\"far fa-thumbs-up\">&nbsp;</i>\n                <Link to=\"/videos/likes\" className=\"\">Liked Videos</Link>\n              </li>\n              <li className=\"clickable sidebar-section-header\">\n                <i className=\"fas fa-hand-holding-heart\">&nbsp;</i>\n                <Link to=\"/videos/favorites\">Favorite Videos</Link>\n              </li>\n            </>\n          }\n          <li className=\"sidebar-section-header\">\n            <i className=\"fas fa-th-list\">&nbsp;</i>\n            <span >Categories</span></li>\n          <li className=\"sidebar-item clickable\">\n            <i className=\"fas fa-cat\">&nbsp;</i>\n            <Link to=\"/search/cats\">Funny Cats</Link>\n          </li>\n          <li className=\"sidebar-item clickable\">\n            <i className=\"fas fa-dog\">&nbsp;</i>\n            <Link to=\"/search/dog\">Funny Dogs</Link>\n          </li>\n          <li className=\"sidebar-item clickable\">\n            <i className=\"fas fa-child\">&nbsp;</i>\n            <Link to=\"/search/kids\">kids</Link>\n          </li>\n          <li className=\"sidebar-item clickable\">\n            <i className=\"fas fa-dove\">&nbsp;</i>\n            <Link to=\"/search/birds\">birds</Link>\n          </li>\n          <li className=\"sidebar-item clickable\">\n            <i className=\"fas fa-horse\">&nbsp;</i>\n            <Link to=\"/search/horse\">horses</Link>\n          </li>\n        </ul>\n      </aside>\n    );\n  }\n}\n\nexport default SideBar;","import React, { Component } from 'react';\nimport { currentUser } from '../../util/util'\nimport { Link } from 'react-router-dom'\nimport { changeTheme, getCurrentTheme } from '../../util/util'\n\nclass MiniSideBar extends Component {\n\n  constructor(props) {\n    super(props)\n  }\n  componentDidMount() {\n    document.getElementById(\"chkTheme\").checked = getCurrentTheme() === 'dark';\n  }\n\n  changeTheme = (event) => {\n    let theme = event.target.checked ? 'dark' : 'light';\n    localStorage.setItem('theme', theme);\n    changeTheme();\n  }\n\n  render() {\n\n    return (\n      <aside className=\"mini-sidebar show\">\n        <ul>\n          <li className=\"clickable mini-sidebar-section-header\">\n            <Link to=\"/\"><i className=\"fas fa-home mini-icon\">&nbsp;</i><p className=\"mini-description\">Home</p></Link>\n          </li>\n          {currentUser() &&\n            <>\n            <li className=\"clickable mini-sidebar-section-header\">\n              <Link to=\"/videos/likes\" className=\"\"><i className=\"far fa-thumbs-up mini-icon\">&nbsp;</i><p className=\"mini-description\">My Likes</p></Link>\n            </li>\n              <li className=\"clickable mini-sidebar-section-header\">\n              <Link to=\"/videos/favorites\"><i className=\"fas fa-hand-holding-heart mini-icon\">&nbsp;</i><p className=\"mini-description\">Favorites</p></Link>\n              </li>\n            </>\n          }\n         \n        </ul>\n      </aside>\n    );\n  }\n}\n\nexport default MiniSideBar;","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { currentUser } from '../util/util'\nimport { Query, ApolloConsumer } from \"react-apollo\";\nimport Queries from \"../graphql/queries\";\nconst { IS_LOGGED_IN } = Queries;\n\nconst handleToggle = (e) => {\n  e.preventDefault();\n  let navLogoutPopup = document.getElementById(\"navLogoutPopup\");\n\n  if (navLogoutPopup) {\n    navLogoutPopup.classList.toggle(\"display\");\n  }\n}\n\nconst Nav = props => {\n  return (\n    <ApolloConsumer>\n      {client => (\n        <Query query={IS_LOGGED_IN}>\n          {({ data }) => {\n            if (data.isLoggedIn) {\n              let profileSrc = currentUser() ? currentUser().image : \"/stylesheets/images/default_avatar_2.png\";\n              let profileEmail = currentUser() ? currentUser().email : \"\";\n              let profileUsername = currentUser() ? currentUser().username : \"\";\n             \n              return (\n                <div className=\"navbar-logout\" onClick={(e) => handleToggle(e)}><img alt=\"PalTube\" src={profileSrc} className=\"navbar-pic\" />\n                  <div className=\"navPopup\" id=\"navLogoutPopup\">\n                    <div className=\"logout-info\">\n                      <p className=\"nav-popup-username\">{profileUsername}</p>\n                      <p className=\"nav-popup-email\">{profileEmail}</p>\n                    </div>\n                    <div className=\"logout-likes\">\n                      <Link to=\"/videos/likes\"><i className=\"fas fa-thumbs-up sign-out-icon\"></i>My Likes</Link> \n                    </div>\n                    <button\n                      className=\"logout-button\"\n                      onClick={e => {\n                        e.preventDefault();\n                        localStorage.removeItem(\"auth-token\");\n                        localStorage.removeItem(\"user\");\n                        client.writeData({ data: { isLoggedIn: false } });\n\n                      }}\n                    >\n                      <Link to=\"/\" className=\"nav-log-out\"><i className=\"fas fa-sign-out-alt sign-out-icon\"></i>Sign Out</Link>\n                    </button> \n                      \n                    </div>\n                </div>\n              )\n            } else {\n              return (\n                <div className=\"nav-links\">\n                  <Link to=\"/register\" className=\"nav-sign-up\">SIGN UP</Link>\n                  <Link to=\"/login\" className=\"nav-sign-in\">SIGN IN</Link>\n                </div>\n              );\n            }\n          }}\n        </Query>\n      )}\n    </ApolloConsumer>\n  );\n\n};\n\nexport default Nav; \n","const gendersJson = [\n  { name: \"cat\", value: 1 },\n  { name: \"cats\", value: 2 },\n  { name: \"funny cat\", value: 3 },\n  { name: \"dog\", value: 4 },\n  { name: \"dogs\", value: 5 },\n  { name: \"funny dog\", value: 6 },\n  { name: \"funny dogs\", value: 7 },\n  { name: \"animals\", value: 8 },\n  { name: \"baby\", value: 9 },\n  { name: \"babies\", value: 10 },\n  { name: \"puppies\", value: 11 },\n  { name: \"kid\", value: 12 },\n  { name: \"kids\", value: 13 },\n  { name: \"kids and animals\", value: 14 },\n  { name: \"trolling\", value: 15 },\n  { name: \"birds\", value: 16 },\n  { name: \"birds talk like human\", value: 17 },\n  { name: \"horse\", value: 18 },\n  { name: \"horses\", value: 19 },\n  { name: \"funny horse\", value: 20 },\n  { name: \"horses are much more funny than cats\", value: 21 },\n  { name: \"cute and funny horse\", value: 22 },\n  { name: \"funnies horse\", value: 23 },\n]\n\nexport default gendersJson","import React, { Component } from 'react';\nimport Autosuggest from 'react-autosuggest';\nimport searchSuggestions from '../../json_files/search_suggestions';\n\nconst getSuggestions = value => {\n  const inputValue = value.trim().toLowerCase();\n  const inputLength = inputValue.length;\n  return inputLength === 0 ? [] : searchSuggestions.filter(item =>\n    item.name.toLocaleLowerCase().includes(inputValue)\n  );\n};\nconst getSuggestionValue = suggestion => suggestion.name;\nconst renderSuggestion = suggestion => (\n  <div>\n    {suggestion.name}\n  </div>\n);\n\nclass SearchBar extends Component {\n  constructor() {\n    super();\n    this.state = { value: '', suggestions: [], referrer: null }\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"keydown\", this.handleKeydown);\n  }\n\n  handleKeydown = (event) => {\n    if (event.target.getAttribute(\"aria-controls\") === \"react-autowhatever-txtSearchVideos\") {\n      if (event.key === 'Enter' || event.keyCode === 13) {\n        window.location.href = `#/search/${this.state.value}`\n      }\n    }\n  }\n\n  handleSearchClick = (event) => {\n    if (event.target.id === \"searchBtn\") {\n        window.location.href = `#/search/${this.state.value}`\n    }\n  }\n\n  onSuggestionsFetchRequested = ({ value }) => {\n    this.setState({\n      suggestions: getSuggestions(value)\n    });\n  };\n\n  onSuggestionsClearRequested = () => {\n    this.setState({ suggestions: [] });\n  };\n\n  onChange = (event, { newValue, method }) => {\n    this.setState({ value: newValue })\n  }\n\n  render() {\n    const { value, suggestions } = this.state;\n    const inputProps = {\n      placeholder: 'search...',\n      value,\n      onChange: this.onChange,\n    };\n\n    return (\n      <div id=\"div\" style={{ display: 'flex' }}>\n        <Autosuggest\n          id=\"txtSearchVideos\"\n          suggestions={suggestions}\n          onSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\n          onSuggestionsClearRequested={this.onSuggestionsClearRequested}\n          getSuggestionValue={getSuggestionValue}\n          renderSuggestion={renderSuggestion}\n          inputProps={inputProps}\n          highlightFirstSuggestion={true}\n        />\n        <button className=\"clickable search-icon\" onClick={this.handleSearchClick}>\n          <i className=\"fas fa-search\" id=\"searchBtn\"></i>\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default SearchBar;","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Nav from \"./Nav\";\nimport SearchBar from './ui/SearchBar';\nimport { initializeTheme, getCurrentTheme } from '../util/util';\n\n\nclass NavBar extends Component {\n\n\n  toggleMenu = ()=>{\n    let sideBar = document.getElementsByClassName(\"sidebar\")[0];\n    let miniSideBar = document.getElementsByClassName(\"mini-sidebar\")[0];\n    let toggleClassSide = sideBar.classList.contains('show') ? \"hide\": \"show\";\n    let toggleClassMini = miniSideBar.classList.contains('show') ? \"hide\" : \"show\";\n    miniSideBar.classList.remove('show');\n    miniSideBar.classList.remove('hide');\n    miniSideBar.classList.add(toggleClassMini);\n    sideBar.classList.remove('show');\n    sideBar.classList.remove('hide');\n    sideBar.classList.add(toggleClassSide);\n  }\n\n  render(){\n    initializeTheme();\n    let src = localStorage.theme === \"dark\" ? window.darkTheme : window.lightTheme;\n    return (\n      <div className=\"navbar\">\n        <div className=\"logo-container\">\n          <span onClick={this.toggleMenu} className=\"burger-menu-icon\" id=\"nav-toggle\">&#9776;</span>\n          <Link to=\"/\"><img id=\"site-logo\" className=\"navbar-logo\" src={src} alt=\"Paltube\" /></Link>\n        </div>\n        <SearchBar />\n        <Nav />\n      </div>\n    );\n  }\n  \n};\n\nexport default NavBar; ","import React, { Component } from 'react';\nimport Queries from '../../graphql/queries';\nimport { graphql } from 'react-apollo';\nimport {Link} from 'react-router-dom';\nimport SideBar from '../ui/SideBar';\nimport MiniSideBar from '../ui/MiniSideBar';\nimport NavBar from '../NavBar';\nconst {FETCH_VIDEOS} = Queries;\n\nclass VideoIndex extends Component {\n  renderVideos() {\n    return this.props.data.videos.map((\n      { _id, title, url }) => {\n      return (\n        <div key={_id} className=\"video-container\">\n          <div>\n            <object className=\"video-player\">\n              <param name=\"movie\" value={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0`}></param>\n              <param name=\"allowFullScreen\" value=\"true\"></param>\n              <param name=\"allowscriptaccess\" value=\"always\"></param>\n              <embed src={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0`}\n                type=\"application/x-shockwave-flash\"\n                className=\"video-player\" allowscriptaccess=\"always\" allowFullScreen={true}></embed>\n            </object>          \n          </div>\n          <div className=\"video-info\">\n            <Link to={`/videos/${_id}`}>\n              <p className=\"video-title clickable\">\n              {title}\n              </p>\n              </Link>\n          </div>\n        </div>\n      );\n    });\n  }\n\n  render() {\n    if (this.props.data.loading || !this.props.data.videos) {\n      return null;\n    }\n    return (\n      <div>\n        <NavBar />\n        <div className=\"container\">\n          <div className=\"flex-grid\">\n              <MiniSideBar />\n              <SideBar/>\n            <section className=\"main\">\n              <h3>Recommended Videos</h3>\n              <div className=\"row\">\n                {this.renderVideos()}\n              </div>\n            </section>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default graphql(FETCH_VIDEOS)(VideoIndex);","import gql from \"graphql-tag\";\n\nexport default {\n  LOGIN_USER: gql`\n  mutation LoginUser($emailOrUsername: String!, $password: String!) {\n    login(emailOrUsername: $emailOrUsername, password: $password) {\n      token\n      loggedIn\n      _id\n      email\n      username\n      image\n    }\n  }\n  `,\n  REGISTER_USER: gql`\n  mutation RegisterUser($username: String!, $email: String!, $password: String!, $password2: String!, $image:String!) {\n    register(username: $username, email: $email, password: $password, password2: $password2, image: $image) {\n      email\n      token\n      loggedIn\n      _id\n      username\n      image\n    }\n  }\n `,\n  VERIFY_USER: gql`\n  mutation VerifyUser($token: String!) {\n    verifyUser(token: $token) {\n      loggedIn\n    }\n  }\n`,\n  VIDEO_COMMENT: gql`\n    mutation VideoComment($text: String!, $author: ID!, $videoId: ID!, $gif: String!) {\n      addVideoComment(text: $text, author: $author, videoId: $videoId, gif: $gif) {\n        _id\n        text\n        author {\n          username\n          image\n        }\n        replies {\n          _id  \n        }\n        date\n        gif\n      }\n    }\n  `,\n  REPLY_COMMENT: gql`\n    mutation ReplyComment($text: String!, $author: ID!, $parentCommentId: ID!, $gif: String!) {\n      addReplyComment(text: $text, author: $author, parentCommentId: $parentCommentId, gif: $gif) {\n        _id\n        text\n        author {\n          username\n          image\n        }\n        replies {\n          _id  \n        }\n        date\n        gif\n      }\n    }\n  `,\n  DELETE_COMMENT: gql`\n    mutation DeleteComment($id: ID!) {\n      deleteComment(id: $id) {\n        _id\n      }\n    }\n  `,\n  UPDATE_COMMENT: gql`\n  mutation UpdateComment($id: ID!, $text: String) {\n    updateComment(id: $id, text: $text) {\n      _id\n      text\n      date\n      author {\n        username\n        image\n      }\n      replies {\n        _id\n       }\n    }\n  }\n`,\n  ADD_VIDEO_LIKE: gql`\n    mutation VideoLike($videoId: ID!, $userId: ID!) {\n      addVideoLike(videoId: $videoId, userId: $userId) {\n        _id\n      }\n    }\n  `,\n  REMOVE_VIDEO_LIKE: gql`\n    mutation VideoRemoveLike($videoId: ID!, $userId: ID!) {\n      removeVideoLike(videoId: $videoId, userId: $userId) {\n        _id\n      }\n    }\n  `,\n  ADD_VIDEO_DISLIKE: gql`\n    mutation VideoDislike($videoId: ID!, $userId: ID!) {\n      addVideoDislike(videoId: $videoId, userId: $userId) {\n        _id\n      }\n    }\n  `,\n  REMOVE_VIDEO_DISLIKE: gql`\n    mutation VideoRemoveDislike($videoId: ID!, $userId: ID!) {\n      removeVideoDislike(videoId: $videoId, userId: $userId) {\n        _id\n      }\n    }\n  `,\n  ADD_TO_FAVORITES: gql`\n    mutation AddToFavorites($videoId: ID!, $userId: ID!) {\n      addFavoriteVideo(videoId: $videoId, userId:$userId){\n      _id\n    }\n  }\n  `,\n  REMOVE_FROM_FAVORITES: gql`\n    mutation RemoveFromFavorites($videoId: ID!, $userId: ID!) {\n      removeFavoriteVideo(videoId: $videoId, userId:$userId){\n      _id\n    }\n  }\n  `\n}","import React from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport Mutations from \"../../graphql/mutations\";\nimport Queries from '../../graphql/queries';\nimport { currentUser } from \"../../util/util\";\nimport Picker from 'react-giphy-component';\n\nconst { REPLY_COMMENT } = Mutations;\nconst { FETCH_VIDEO } = Queries;\n\nclass ReplyCommentCreate extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      text: \"@\" + this.props.user,\n      gif: \"\",\n      error: \"\"\n    }\n  }\n\n  update(field) {\n    return e => {\n      this.setState({ [field]: e.target.value })\n    }\n  }\n\n  handleSubmit(e, addReplyComment) {\n    e.preventDefault();\n    let text = this.state.text;\n    let gif = this.state.gif\n\n    if (this.state.text === \"@\" + this.props.user) {\n      this.setState({ error: \"cannot be empty\"})\n      return\n    }\n\n    addReplyComment({\n      variables: {\n        text: text,\n        author: currentUser().id,\n        parentCommentId: this.props.parentId,\n        gif: gif\n      }\n    })\n      .then(data => {\n        this.setState({\n          text: \"@\" + this.props.user,\n          gif: \"\",\n          error: \"\"\n        })\n      })\n  };\n\n  updateCache(cache, { data: { addReplyComment } }) {\n    let video;\n    try {\n      video = cache.readQuery({ query: FETCH_VIDEO, variables: { id: this.props.videoId } });\n    } catch (err) {\n      return;\n    }\n\n    if (video) {\n      video = Object.assign({}, video.video)\n      let commentsArray = video.comments;\n      for (let i = 0; i < commentsArray.length; i++) {\n        if (this.props.parentId === commentsArray[i]._id) {\n          commentsArray[i].replies.push(addReplyComment)\n        }\n\n      }\n      cache.writeQuery({\n        query: FETCH_VIDEO,\n        variables: { id: this.props.videoId },\n        data: { video: video }\n      });\n    }\n  }\n\n  updategif(gif) {\n    this.setState({ gif: gif.downsized.url })\n  }\n\n  render() {\n    const user = currentUser();\n    if (!user) {\n      return <textarea\n        value={this.state.text}\n        onChange={this.update(\"text\")}\n        placeholder=\"Must Be Signed In to Comment\"\n      />\n    } \n    else {\n    if (currentUser().username !== this.props.user) {\n      let error;\n      if (this.state.error === \"cannot be empty\") {\n        error = \"Comment must have text\"\n      }\n    return (\n      <Mutation\n        onError={error => { this.setState({ error: error.message }) }}\n        mutation={REPLY_COMMENT}\n        update={(cache, data) => this.updateCache(cache, data)}\n      >\n        {(addReplyComment, { data }) => (\n          <div>\n            <form onSubmit={e => this.handleSubmit(e, addReplyComment)}>\n              <textarea\n                value={this.state.text}\n                onChange={this.update(\"text\")}\n                placeholder={`Commenting publicly as ${currentUser().username}`}\n              />\n              <div>{error}</div>\n              <button type=\"submit\">Reply</button>\n            </form>\n            <div className=\"giphy-reply\"> <Picker apiKey=\"EeZhW081PZQ2Abce60Y4EQulHVTzcbRA\" onSelected={this.updategif.bind(this)} /></div>\n          </div>\n        )}\n      </Mutation>\n    )\n     } else {\n       return (\n         <div></div>\n       )\n     }\n  }}\n}\n\nexport default ReplyCommentCreate;","import React from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport Mutations from \"../../graphql/mutations\";\nimport Queries from '../../graphql/queries';\nimport { currentUser } from \"../../util/util\";\n\nconst { FETCH_VIDEO } = Queries;\nconst { DELETE_COMMENT } = Mutations;\n\nclass CommentDelete extends React.Component {\n  \n  handleSubmit(e, deleteComment) {\n    e.preventDefault();\n\n    deleteComment({\n      variables: {\n      id: this.props.commentId\n      }\n    })\n  }\n\n \n  render() {\n    const user = currentUser();\n\n    if (!user) {\n      return <div></div>\n    } else if (this.props.user === currentUser().username) {\n    return (\n      <Mutation\n        mutation={DELETE_COMMENT}\n        refetchQueries={() => {\n          return [\n            {\n              query: FETCH_VIDEO, variables: { id: this.props.videoId }\n            }\n          ];\n        }}\n      >\n        {(deleteComment, { data }) => (\n          <div>\n            <form onSubmit={e => this.handleSubmit(e, deleteComment)}>\n              <button type=\"submit\">Delete</button>\n            </form>\n          </div>\n        )}\n      </Mutation>\n    )\n  } else {\n    return <div></div>\n  }\n  }\n}\n\nexport default CommentDelete;\n","import React from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport Mutations from \"../../graphql/mutations\";\nimport Queries from '../../graphql/queries';\nimport { currentUser } from \"../../util/util\";\n\nconst { FETCH_VIDEO } = Queries;\nconst { UPDATE_COMMENT } = Mutations;\n\nclass EditComment extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      text: this.props.comment.text\n    }\n  }\n\n  update(field) {\n    return e => {\n      this.setState({ [field]: e.target.value })\n    }\n  }\n\n  handleSubmit(e, updateComment) {\n    e.preventDefault();\n    updateComment({\n      variables: {\n        id: this.props.comment._id,\n        text: this.state.text\n      }\n    })\n  }\n\n\n  render() {\n    const user = currentUser();\n\n    if (!user) {\n      return <div></div>\n    } else if (this.props.comment.author.username === currentUser().username) {\n      return (\n        <Mutation\n          mutation={UPDATE_COMMENT}\n          refetchQueries={() => {\n            return [\n              {\n                query: FETCH_VIDEO, variables: { id: this.props.videoId }\n              }\n            ];\n          }}\n        >\n          {(updateComment, { data }) => (\n            <div>\n              <form onSubmit={e => this.handleSubmit(e, updateComment)}>\n                <textarea\n                  value={this.state.text}\n                  onChange={this.update(\"text\")}\n                />\n                <button className=\"edit-button\"type=\"submit\">Edit</button>\n              </form>\n            </div>\n          )}\n        </Mutation>\n      )\n    } else  {\n      return <div></div>\n    }\n  }\n}\n\nexport default EditComment;\n","import React from 'react';\nimport ReplyCommentCreate from \"./ReplyCommentCreate\";\nimport CommentDelete from \"./CommentDelete\";\nimport EditComment from \"./EditComment\";\n\n\n\nconst CommentReplyItem = props => {\n    const date = new Date(+props.comment.date);\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const day = date.getDate()\n\n\n    \n    const profileSrc = props.comment.author.image ? props.comment.author.image : \"/stylesheets/images/default_avatar_2.png\";\n    const gif = props.comment.gif ? <img alt=\"comment\" className=\"main-comment-gif\" src={props.comment.gif} /> : null\n\n    \n    return (\n  \n          <div className=\"reply-comment-index\">\n            <div className=\"main-comment-top\">\n              <img src={profileSrc} className=\"comment-create-avatar\" />\n              <div className=\"main-comment-name\">{props.comment.author.username}</div>\n              <div className=\"main-comment-year\">{year + \"-\" + month + \"-\" + day}</div>\n            </div>\n              <div className=\"main-comment-text\">{props.comment.text}</div>\n              {gif}\n            <div className=\"comment-reply-reply\"><ReplyCommentCreate videoId={props.videoId} parentId={props.parentId} user={props.comment.author.username}/></div>\n            <br></br>\n            <div className=\"comment-index-item-delete\"><CommentDelete commentId={props.comment._id} videoId={props.videoId} user={props.comment.author.username}/></div>\n            <div className=\"comment-index-item-edit\"><EditComment videoId={props.videoId} comment={props.comment} /></div>\n           \n          </div>\n        )\n}\n\nexport default CommentReplyItem;","import React from 'react';\nimport CommentReplyItem from \"./CommentReplyItem\";\nimport { Query } from \"react-apollo\";\nimport Queries from '../../graphql/queries';\n\nconst { FETCH_VIDEO} = Queries;\n\nclass CommentReplyIndex extends React.Component {\n  \n  render() {\n    return <Query query={FETCH_VIDEO} variables={{ id: this.props.videoId }}>\n      {({ loading, error, data }) => {\n        if (loading) return <p>Loading...</p>;\n        if (error) return <p>Error</p>;\n      \n       const comments = data.video.comments;\n\n       let comment;\n       for (let i = 0; i < comments.length; i++) {\n         if (this.props.commentId === comments[i]._id) {\n            comment = comments[i].replies;\n         }\n       }\n     \n         const replies = comment.map(reply => {\n            return <div>\n             <div><CommentReplyItem comment={reply} videoId={this.props.videoId} parentId={this.props.commentId}/> </div>\n            </div>\n        })\n       \n     return (\n       <div>\n       {replies}\n       </div>\n     )\n      }}\n    </Query>\n  }\n}\n\nexport default CommentReplyIndex;\n","import React from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport Mutations from \"../../graphql/mutations\";\nimport Queries from '../../graphql/queries';\nimport { currentUser } from \"../../util/util\";\nimport Picker from 'react-giphy-component';\n\nconst { REPLY_COMMENT} = Mutations;\nconst { FETCH_VIDEO } = Queries;\n\nclass CommentReplyCreate extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      text: \"\",\n      gif: \"\",\n      error: \"\"\n    }\n  }\n\n  update(field) {\n    return e => {\n      this.setState({ [field]: e.target.value })\n    }\n  }\n\n  handleSubmit(e, addReplyComment) {\n    e.preventDefault();\n    let text = this.state.text;\n    let gif = this.state.gif\n\n    if (this.state.text === \"\") {\n      this.setState({ error: \"GraphQL error: Cannot return null for non-nullable field CommentType.text.\" })\n      return\n    }\n\n    addReplyComment({\n      variables: {\n        text: text,\n        author: currentUser().id,\n        parentCommentId: this.props.parentId,\n        gif: gif\n      }\n    })\n      .then(data => {\n        this.setState({\n          text: \"\",\n          gif: \"\",\n          error: \"\"\n        })\n      })\n  };\n\n  updateCache(cache, { data: { addReplyComment } }) {\n    let video;\n    try {\n      video = cache.readQuery({ query: FETCH_VIDEO, variables: { id: this.props.videoId } });\n    } catch (err) {\n      return;\n    }\n\n    if (video) {\n      video = Object.assign({}, video.video)\n      let commentsArray = video.comments;\n      for (let i = 0; i < commentsArray.length; i++) {\n        if (this.props.parentId === commentsArray[i]._id) {\n          commentsArray[i].replies.push(addReplyComment) \n        }\n      \n      }\n      cache.writeQuery({\n        query: FETCH_VIDEO,\n        variables: { id: this.props.videoId },\n        data: { video: video }\n      });\n    }\n  }\n\n  updategif(gif) {\n    this.setState({ gif: gif.downsized.url })\n  }\n\n  render() {\n    const user = currentUser();\n\n    if (!user) {\n      return <textarea\n        value={this.state.text}\n        onChange={this.update(\"text\")}\n        placeholder=\"Must Be Signed In to Comment\"\n      />}\n      else {\n      let error;\n      if (this.state.error === \"GraphQL error: Cannot return null for non-nullable field CommentType.text.\") {\n        error = \"Comment must have text\"\n      }\n    return (\n      <Mutation\n        onError={error => { this.setState({ error: error.message }) }}\n        mutation={REPLY_COMMENT}\n        update={(cache, data) => this.updateCache(cache, data)}\n      >\n        {(addReplyComment, { data }) => (\n          <div>\n            <form onSubmit={e => this.handleSubmit(e, addReplyComment)}>\n              <textarea\n                value={this.state.text}\n                onChange={this.update(\"text\")}\n                placeholder={`Commenting publicly as ${currentUser().username}`}\n              />\n              <div>{error}</div>\n              <button type=\"submit\">Reply</button>\n            </form>\n            <div className=\"giphy-comment\"> <Picker apiKey=\"EeZhW081PZQ2Abce60Y4EQulHVTzcbRA\" onSelected={this.updategif.bind(this)} /></div>\n          </div>\n        )}\n      </Mutation>\n      )};\n  }\n}\n\nexport default CommentReplyCreate;","import React from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport Mutations from \"../../graphql/mutations\";\nimport Queries from '../../graphql/queries';\nimport { currentUser } from \"../../util/util\";\n  \nconst { FETCH_VIDEO } = Queries;\nconst { UPDATE_COMMENT, DELETE_COMMENT } = Mutations;\n\nclass CommentRootDelete extends React.Component {\n \n  handleSubmit(e, updateComment) {\n    e.preventDefault();\n\n    updateComment({\n      variables: {\n        id: this.props.commentId,\n        text: \"!(!DELETE!)!\"\n      }\n    }) \n  }\n\n  handleSubmit2(e, deleteComment) {\n    e.preventDefault();\n\n    deleteComment({\n      variables: {\n        id: this.props.commentId\n      }\n    })\n  }\n\n\n\n  render() {\n    const user = currentUser();\n\n    if (!user) {\n      return <div></div>\n    } else if (this.props.user === currentUser().username && this.props.comment.replies.length > 0) {\n      return (\n        <Mutation\n          mutation={UPDATE_COMMENT}\n          refetchQueries={() => {\n            return [\n              {\n                query: FETCH_VIDEO, variables: { id: this.props.videoId }\n              }\n            ];\n          }}\n        >\n          {(updateComment, { data }) => (\n            <div>\n              <form onSubmit={e => this.handleSubmit(e, updateComment)}>\n                <button type=\"submit\">Delete</button>\n              </form>\n            </div>\n          )}\n        </Mutation>\n      )\n    } else if (this.props.user === currentUser().username) {\n      return (\n        <Mutation\n          mutation={DELETE_COMMENT}\n          refetchQueries={() => {\n            return [\n              {\n                query: FETCH_VIDEO, variables: { id: this.props.videoId }\n              }\n            ];\n          }}\n        >\n          {(deleteComment, { data }) => (\n            <div>\n              <form onSubmit={e => this.handleSubmit2(e, deleteComment)}>\n                <button type=\"submit\">Delete</button>\n              </form>\n            </div>\n          )}\n        </Mutation>\n      )\n    } else {\n      return <div></div>\n    }\n  }\n}\n\nexport default CommentRootDelete;\n","import React from 'react';\nimport CommentReplyIndex from \"./CommentReplyIndex\";\nimport CommentReplyCreate from \"./CommentReplyCreate\";\nimport CommentRootDelete from \"./CommentRootDelete\";\nimport EditComment from \"./EditComment\";\n\n\nconst CommentIndexItem = props => {\n    const date = new Date(+props.comment.date);\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const day = date.getDate()\n\n\n\n  const profileSrc = props.comment.author.image ? props.comment.author.image: \"/stylesheets/images/default_avatar_2.png\";\n  const gif = props.comment.gif ? <img alt={props.comment.text} className=\"main-comment-gif\" src={props.comment.gif} />: null\n\n\n  if (props.comment.text !== \"!(!DELETE!)!\" ) {\n    return (\n          <div className=\"main-comment-index\">\n           <div className=\"main-comment-top\">\n              <img src={profileSrc} className=\"comment-create-avatar\" />\n              <div className=\"main-comment-name\">{props.comment.author.username}</div>\n              <div className=\"main-comment-year\">{year + \"-\" + month + \"-\" + day }</div>\n           </div>\n            <div className=\"main-comment-text\">{props.comment.text}</div>\n            {gif}\n            <div className=\"comment-index-reply\"><CommentReplyCreate parentId={props.comment._id} videoId={props.videoId}/></div>\n            <div className=\"comment-index-item-delete\"><CommentRootDelete comment={props.comment} commentId={props.comment._id} videoId={props.videoId} user={props.comment.author.username} /></div>\n            <div className=\"comment-index-item-edit\"><EditComment videoId={props.videoId} comment={props.comment} /></div>\n            <div className=\"comment-reply-index\"><CommentReplyIndex commentId={props.comment._id} videoId={props.videoId}/></div>\n          </div>\n  )\n    } else {\n      return (\n        <div>\n          <div className=\"deleted-comment\">Comment has been deleted</div>\n          <div className=\"comment-reply-index\"><CommentReplyIndex commentId={props.comment._id} videoId={props.videoId} /></div>\n        </div>\n      )\n    }\n}\n\nexport default CommentIndexItem;","import React from 'react';\nimport CommentIndexItem from \"./CommentIndexItem\";\nimport {Query} from \"react-apollo\";\nimport Queries from '../../graphql/queries';\n\nconst { FETCH_VIDEO } = Queries;\n\nclass CommentIndex extends React.Component {\n\n  render () {\n  \n   return <Query query={FETCH_VIDEO} variables={{ id: this.props.videoId }}>\n      {({ loading, error, data }) => {\n        if (loading) return <p>Loading...</p>;\n        if (error) return <p>Error</p>;\n      \n       const comments = data.video.comments.map(comment => {\n         return <div>\n           <div><CommentIndexItem comment={comment} videoId={this.props.videoId}/> </div>\n         </div>\n       })\n    return <div className=\"comment-index\">\n            {comments}\n           </div>\n\n  }}\n  </Query>\n  }\n}\n\nexport default CommentIndex;\n\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Queries from '../../graphql/queries';\nimport { graphql } from 'react-apollo';\nimport Mutations from \"../../graphql/mutations\";\nimport { Mutation } from \"react-apollo\";\nimport { currentUser } from \"../../util/util\";\nconst { FETCH_VIDEO } = Queries;\nconst { ADD_VIDEO_LIKE } = Mutations;\nconst { REMOVE_VIDEO_LIKE } = Mutations;\nconst { ADD_VIDEO_DISLIKE } = Mutations;\nconst { REMOVE_VIDEO_DISLIKE } = Mutations;\n\nclass LikeDislike extends React.Component {\n  constructor(props) {\n\n    super(props);\n\n    this.state = {\n      currentUser: currentUser(),\n      hasLiked: false\n    }\n    this.hasLiked = this.hasLiked.bind(this);\n  }\n\n  handleLike(e, VideoLike) {\n\n    e.preventDefault();\n\n    VideoLike({\n      variables: {\n        videoId: this.props.videoId,\n        userId: this.state.currentUser.id\n      }\n    })\n      .then(data => {\n        this.setState({ hasLiked: true })\n      })\n  };\n\n  handleRemoveLike(e, VideoRemoveLike) {\n\n    e.preventDefault();\n\n    VideoRemoveLike({\n      variables: {\n        videoId: this.props.videoId,\n        userId: this.state.currentUser.id\n      }\n    })\n      .then(data => {\n        this.setState({ hasLiked: false })\n      })\n  };\n\n  handleDislike(e, VideoDislike) {\n\n    e.preventDefault();\n\n    VideoDislike({\n      variables: {\n        videoId: this.props.videoId,\n        userId: this.state.currentUser.id\n      }\n    })\n      .then(data => {\n        this.setState({ hasDisliked: true })\n      })\n  };\n\n  handleRemoveDislike(e, VideoRemoveDislike) {\n\n    e.preventDefault();\n\n    VideoRemoveDislike({\n      variables: {\n        videoId: this.props.videoId,\n        userId: this.state.currentUser.id\n      }\n    })\n      .then(data => {\n        this.setState({ hasDisliked: false })\n      })\n  };\n\n  updateCache(cache, data) {\n\n    const addVideoLike = data.data.addVideoLike;\n    const removeVideoLike = data.data.removeVideoLike;\n    const addVideoDislike = data.data.addVideoDislike;\n    const removeVideoDislike = data.data.removeVideoDislike;\n    let video;\n    try {\n      video = cache.readQuery({ query: FETCH_VIDEO, variables: { id: this.props.videoId } });\n    } catch (err) {\n      return;\n    }\n\n    if (video && addVideoLike) {\n\n      let likeArray = video.video.likes;\n      let dislikeArray = video.video.dislikes;\n      for (let i = 0; i < dislikeArray.length; i++) {\n        const el = dislikeArray[i];\n        if (el._id === addVideoLike._id) {\n          dislikeArray.splice(i, 1);\n        }\n      }\n      video = Object.assign({}, video.video, { likes: likeArray.concat(addVideoLike), dislikes: dislikeArray })\n      cache.writeQuery({\n        query: FETCH_VIDEO,\n        variables: { id: this.props.videoId },\n        data: { video: video }\n      });\n    } else if (video && removeVideoLike) {\n      let likeArray = video.video.likes;\n      for (let i = 0; i < likeArray.length; i++) {\n        const el = likeArray[i];\n        if (el._id === removeVideoLike._id) {\n          likeArray.splice(i, 1);\n        }\n      } \n\n      video = Object.assign({}, video.video, { likes: likeArray })\n\n      cache.writeQuery({\n        query: FETCH_VIDEO,\n        variables: { id: this.props.videoId },\n        data: { video: video }\n      });\n    } else if (video && addVideoDislike) {\n\n      let dislikeArray = video.video.dislikes;\n      let likeArray = video.video.likes;\n      for (let i = 0; i < likeArray.length; i++) {\n        const el = likeArray[i];\n        if (el._id === addVideoDislike._id) {\n          likeArray.splice(i, 1);\n        }\n      }\n      video = Object.assign({}, video.video, { likes: likeArray, dislikes: dislikeArray.concat(addVideoDislike) })\n      cache.writeQuery({\n        query: FETCH_VIDEO,\n        variables: { id: this.props.videoId },\n        data: { video: video }\n      });\n    } else if (video && removeVideoDislike) {\n      let dislikeArray = video.video.dislikes;\n      for (let i = 0; i < dislikeArray.length; i++) {\n        const el = dislikeArray[i];\n        if (el._id === removeVideoDislike._id) {\n          dislikeArray.splice(i, 1);\n        }\n      }\n\n      video = Object.assign({}, video.video, { dislikes: dislikeArray })\n\n      cache.writeQuery({\n        query: FETCH_VIDEO,\n        variables: { id: this.props.videoId },\n        data: { video: video }\n      });\n    }\n    this.hasLiked();\n  }\n\n  getLikeCount() {\n    let countLike = this.props.likes.length;\n\n    if (countLike === 0) {\n      return <p>No likes</p>\n    } else if (countLike === 1) {\n      return <p>1 like</p>\n    } else {\n      return <p>{countLike} likes</p>\n    }\n  }\n\n  getDislikeCount() {\n    let countDislike = this.props.dislikes.length;\n\n    if (countDislike === 0) {\n      return <p>No dislikes</p>\n    } else if (countDislike === 1) {\n      return <p>1 dislike</p>\n    } else {\n      return <p>{countDislike} dislikes</p>\n    }\n  }\n\n\n  handleToggle(e) {\n    e.preventDefault();\n    var popup = document.getElementById(\"myPopup\");\n\n    if (popup) {\n      popup.classList.toggle(\"show\");\n    }\n  }\n\n  hasLiked() {\n    const dislikes = this.props.dislikes;\n    const likes = this.props.likes;\n    const user = currentUser();\n    if (!user) {\n      return (\n        <div className=\"popup\" onClick={(e) => this.handleToggle(e)}><i className=\"far fa-thumbs-up unliked-thumb\"></i>{this.getLikeCount()}\n          <i className=\"far fa-thumbs-down unliked-thumb\"></i>{this.getLikeCount()}\n          <div class=\"popuptext\" id=\"myPopup\"><Link className=\"like-sign-in\" to=\"/login\">Sign in!</Link></div>\n        </div>\n      )\n    }\n\n\n    let liked;\n    for (let i = 0; i < likes.length; i++) {\n      const el = likes[i];\n      if (likes[i]._id === this.state.currentUser.id) {\n        liked = true;\n        break;\n      } else {\n        liked = false;\n      }\n\n    }\n    let disliked;\n    for (let i = 0; i < dislikes.length; i++) {\n      const el = dislikes[i];\n      if (dislikes[i]._id === this.state.currentUser.id) {\n        disliked = true;\n        break;\n      } else {\n        disliked = false;\n      }\n    }\n\n    if (!liked && !disliked) {\n      return (\n      <div className=\"like-bar\">\n        <Mutation\n          mutation={ADD_VIDEO_LIKE}\n          update={(cache, data) => this.updateCache(cache, data)}\n        >\n          {(VideoLike, { data }) => {\n            return (\n              <div>\n                <form className=\"like-display\" onSubmit={(e) => this.handleLike(e, VideoLike)}>\n                  <button type=\"submit\"><i class=\"far fa-thumbs-up unliked-thumb\"></i></button>\n                  {this.getLikeCount()}\n                </form>\n              </div>\n            )\n          }}\n        </Mutation>\n        <Mutation\n            mutation={ADD_VIDEO_DISLIKE}\n            update={(cache, data) => this.updateCache(cache, data)}\n          >\n            {(VideoDislike, { data }) => {\n              return (\n                <div>\n                  <form className=\"dislike-display\" onSubmit={(e) => this.handleDislike(e, VideoDislike)}>\n                    <button type=\"submit\"><i class=\"far fa-thumbs-down unliked-thumb\"></i></button>\n                    {this.getDislikeCount()}\n                  </form>\n                </div>\n              )\n            }}\n          </Mutation>\n        </div>)\n    } else if (liked && !disliked) {\n      return (<div className=\"like-bar\">\n        <Mutation\n          mutation={REMOVE_VIDEO_LIKE}\n          update={(cache, data) => this.updateCache(cache, data)}\n        >\n          {(VideoRemoveLike, { data }) => {\n            return (\n              <div>\n                <form className=\"like-display\" onSubmit={(e) => this.handleRemoveLike(e, VideoRemoveLike)}>\n                  <button type=\"submit\"><i className=\"far fa-thumbs-up liked-thumb\"></i></button>\n                  {this.getLikeCount()}\n                </form>\n              </div>\n            )\n          }}\n        </Mutation>\n        <Mutation\n          mutation={ADD_VIDEO_DISLIKE}\n          update={(cache, data) => this.updateCache(cache, data)}\n        >\n          {(VideoDislike, { data }) => {\n            return (\n              <div>\n                <form className=\"dislike-display\" onSubmit={(e) => this.handleDislike(e, VideoDislike)}>\n                  <button type=\"submit\"><i class=\"far fa-thumbs-down unliked-thumb\"></i></button>\n                  {this.getDislikeCount()}\n                </form>\n              </div>\n            )\n          }}\n        </Mutation>\n      </div>)\n    } else if (!liked && disliked) {\n      return (<div className=\"like-bar\">\n        <Mutation\n          mutation={ADD_VIDEO_LIKE}\n          update={(cache, data) => this.updateCache(cache, data)}\n        >\n          {(VideoLike, { data }) => {\n            return (\n              <div>\n                <form className=\"like-display\" onSubmit={(e) => this.handleLike(e, VideoLike)}>\n                  <button type=\"submit\"><i class=\"far fa-thumbs-up unliked-thumb\"></i></button>\n                  {this.getLikeCount()}\n                </form>\n              </div>\n            )\n          }}\n        </Mutation>\n        <Mutation\n          mutation={REMOVE_VIDEO_DISLIKE}\n          update={(cache, data) => this.updateCache(cache, data)}\n        >\n          {(VideoRemoveDislike, { data }) => {\n            return (\n              <div>\n                <form className=\"dislike-display\" onSubmit={(e) => this.handleRemoveDislike(e, VideoRemoveDislike)}>\n                  <button type=\"submit\"><i className=\"far fa-thumbs-down liked-thumb\"></i></button>\n                  {this.getDislikeCount()}\n                </form>\n              </div>\n            )\n          }}\n        </Mutation>\n      </div>)\n    }\n\n  }\n\n  render() {\n    return (\n      <div>\n        {this.hasLiked()}\n      </div>\n    )\n  }\n}\n\nexport default graphql(FETCH_VIDEO)(LikeDislike); ","import React from 'react';\nimport LikeDislike from \"./LikeDislike\";\nimport { Query } from \"react-apollo\";\nimport Queries from '../../graphql/queries';\nimport { currentUser } from \"../../util/util\";\nconst { FETCH_VIDEO } = Queries;\n\nclass LikeVideo extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      currentUser: currentUser(),\n      hasLiked: false\n    }\n\n  }\n\n  \n  render() {\n\n    return <Query query={FETCH_VIDEO} variables={{ id: this.props.videoId }}>\n      {({ loading, error, data }) => {\n        if (loading) return <p>Loading...</p>;\n        if (error) return <p>Error</p>;\n        const likes = data.video.likes; \n        const dislikes = data.video.dislikes; \n        return (\n        <div className=\"like-bar\">\n          <LikeDislike likes={likes} dislikes={dislikes} videoId={this.props.videoId} /> \n        </div>\n        )     \n      }}\n    </Query>\n  }\n}\n\nexport default LikeVideo;","import React, { Component } from 'react';\nimport Queries from '../../graphql/queries';\nimport { graphql } from 'react-apollo';\nimport { Link } from 'react-router-dom';\nconst { FETCH_VIDEOS } = Queries;\n\nclass MiniIndex extends Component {\n  renderVideos() { \n    let miniIndex = this.props.data.videos.slice((this.props.data.videos.length) - 5); \n    \n    return miniIndex.map((\n      { _id, title, url }) => {\n      return (\n        <div key={_id} className=\"mini-video-container\">\n          <div className=\"mini-vid-player\">\n            <object className=\"mini-video-player\">\n              <param name=\"movie\" value={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0`}></param>\n              <param name=\"allowFullScreen\" value=\"true\"></param>\n              <param name=\"allowscriptaccess\" value=\"always\"></param>\n              <embed src={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0`}\n                type=\"application/x-shockwave-flash\"\n                className=\"video-player\" allowscriptaccess=\"always\" allowFullScreen={true}></embed>\n            </object>\n          </div>\n          <div className=\"mini-video-info\">\n            <Link to={`/videos/${_id}`}>\n              <p className=\"mini-video-title clickable\">\n                {title}\n              </p>\n            </Link>\n          </div>\n        </div>\n      );\n    });\n  }\n\n  render() {\n    if (this.props.data.loading || !this.props.data.videos) {\n      return null;\n    }\n    return (\n      <div>\n        <div className=\"mini-container\">\n          <div className=\"flex-grid\">\n            <section className=\"main\">\n              <p className=\"mini-index-title\">Videos For You</p>\n              <div className=\"col\">\n                {this.renderVideos()}\n              </div>\n            </section>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default graphql(FETCH_VIDEOS)(MiniIndex);","import React from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport Mutations from \"../../graphql/mutations\";\nimport Queries from '../../graphql/queries';\nimport {currentUser} from \"../../util/util\";\nimport {withRouter} from \"react-router-dom\";\nimport Picker from 'react-giphy-component';\n\n\nconst { FETCH_VIDEO } = Queries;\nconst {VIDEO_COMMENT} = Mutations;\n\nclass CommentCreate extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      text: \"\",\n      gif: \"\",\n      error: \"\"\n    }\n\n  }\n\n  update(field) {\n    return e => {\n      this.setState({ [field]: e.target.value })\n    }\n  }\n\n  handleSubmit(e, addVideoComment) {\n    e.preventDefault();\n    let text = this.state.text;\n    let gif = this.state.gif;\n\n    if (this.state.text === \"\") {\n      this.setState({ error: \"GraphQL error: Cannot return null for non-nullable field CommentType.text.\" })\n      return\n    }\n\n    addVideoComment({\n      variables: {\n        text: text,\n        author: currentUser().id,\n        videoId: this.props.videoId,\n        gif: gif\n      }\n    })\n      .then(data => {\n        this.setState({\n          text: \"\",\n          gif: \"\",\n          error: \"\"\n        })\n        \n      })\n  };\n\n  updateCache(cache, { data: { addVideoComment } }) {\n    let video;\n    try {\n      video = cache.readQuery({ query: FETCH_VIDEO, variables: {id: this.props.videoId} });\n    } catch (err) {\n      return;\n    }\n    \n    if (video) {\n     \n      let commentArray = video.video.comments;\n      video = Object.assign({}, video.video, {comments: commentArray.concat(addVideoComment)})\n\n      cache.writeQuery({\n        query: FETCH_VIDEO,\n        variables: {id: this.props.videoId},\n        data: { video: video }\n      });\n    }\n  }\n\n  updategif (gif) {\n    this.setState({ gif: gif.downsized.url})\n  }\n\n  render() {\n    const user = currentUser();\n    const profileSrc = user && user.image ? user.image : \"/stylesheets/images/default_avatar_2.png\";\n   \n    if (!user) {\n      return <div className=\"create-form-1\"> \n      <img src={profileSrc} className=\"comment-create-avatar\" />\n      <input\n        className=\"comment-create-input-nuser\"\n        value={this.state.text}\n        placeholder=\"Must Be Signed In to Comment\"\n      />\n      </div>\n    } else {\n      let error;\n      if (this.state.error === \"GraphQL error: Cannot return null for non-nullable field CommentType.text.\") {\n        error = \"Comment must have text\"\n      }\n      return (\n      <Mutation\n        onError={error => { this.setState({error: error.message})}}\n        mutation={VIDEO_COMMENT}\n        update={(cache, data) => this.updateCache(cache, data)}\n      >\n        {(addVideoComment, { data }) => (\n          <div className=\"create-form\">\n            <div className=\"comment-create-position\">\n              <img src={profileSrc} className=\"comment-create-avatar\" />\n               <form onSubmit={e => this.handleSubmit(e, addVideoComment)}>\n               <input \n                  className=\"comment-create-input\"\n                  value={this.state.text}\n                  onChange={this.update(\"text\")}\n                  placeholder={`Commenting publicly as ${currentUser().username}`}\n               />\n               <div>{error}</div>\n               <button className=\"create-comment-button\" type=\"submit\">COMMENT</button>\n               </form>\n            </div>\n            <div className=\"giphy\"> <Picker apiKey=\"EeZhW081PZQ2Abce60Y4EQulHVTzcbRA\" onSelected={this.updategif.bind(this)}/></div>\n          </div>\n        )}\n      </Mutation>\n    )};\n  }\n}\n\nexport default withRouter(CommentCreate);","import React, { Component } from 'react';\nimport { currentUser } from \"../../util/util\";\nimport Mutations from \"../../graphql/mutations\";\nimport Query from \"../../graphql/queries\";\nimport { Mutation } from \"react-apollo\";\nimport { Link } from 'react-router-dom';\nconst { ADD_TO_FAVORITES, REMOVE_FROM_FAVORITES } = Mutations;\nconst { FETCH_VIDEO, FETCH_USER_FAVORITE_VIDEOS } = Query;\nclass Favorite extends Component {\n\n  handleAddRemoveFavorite(e, func) {\n    e.preventDefault();\n    func({\n      variables: {\n        videoId: this.props.video._id,\n        userId: currentUser().id\n      }\n    });\n  };\n\n  handleToggle(e) {\n    e.preventDefault();\n    var popup = document.getElementById(\"myPopup\");\n    if (popup) {\n      popup.classList.toggle(\"show\");\n    }\n  }\n\n  renderFavorite() {\n    if (!currentUser() || !currentUser().id) {\n      return (\n        <div className=\"popup\" onClick={(e) => this.handleToggle(e)}><i className=\"fas far fa-heart\"></i>\n          <div className=\"popuptext\" id=\"myPopup\"><Link className=\"like-sign-in\" to=\"/login\">Sign in!</Link></div>\n        </div>\n      )\n    }\n    return (\n      (<Mutation mutation={ADD_TO_FAVORITES} refetchQueries={() => {\n        return [{ query: FETCH_VIDEO, variables: { id: this.props.video._id } }, { query: FETCH_USER_FAVORITE_VIDEOS, variables: { id: currentUser().id } }];\n      }}>\n        {(AddToFavorites, { loading, error, data  }) => {\n          if (loading) return <i class=\"fas fa-spinner\"></i>\n          if(error)return <p>Error :( Please try again</p>\n          return (\n            <i className=\"far fa-heart\" style={{cursor: 'pointer'}}\n            onClick={(e) => this.handleAddRemoveFavorite(e, AddToFavorites)}></i>)\n        }}\n      </Mutation>\n      )\n    )\n  }\n\n  renderUnFavorite() {\n    return (\n      (<Mutation mutation={REMOVE_FROM_FAVORITES} refetchQueries={() => {\n          return [{ query: FETCH_VIDEO, variables: { id: this.props.video._id } }];\n        }}>\n        {(RemoveFromFavorites, { loading, error, data  }) => {\n          if (loading) return <i class=\"fas fa-spinner\"></i>\n          if (error) return <p>Error :( Please try again</p>\n          return (  \n            <i className=\"fas fa-heart fav-heart\" style={{cursor:'pointer'}}\n              onClick={(e) => this.handleAddRemoveFavorite(e, RemoveFromFavorites)}></i>\n          )\n        }}\n      </Mutation>\n      )\n    )\n  }\n\n  render() {\n    let inUserFavorites = [];\n    if (currentUser() && currentUser().id) {\n      let userId = currentUser().id;\n      inUserFavorites = this.props.video.favoriteBy.filter(user => user._id.toString() === userId);\n    }\n    return (\n      <>\n        {inUserFavorites.length === 0 ?\n          (this.renderFavorite()\n          ) : (\n            this.renderUnFavorite()\n          )}\n      </>\n    );\n  }\n}\n\nexport default Favorite;","import React from 'react';\nimport Queries from '../../graphql/queries';\nimport { graphql } from 'react-apollo';\nimport CommentIndex from \"../Comments/CommentIndex\";\nimport LikeVideo from \"../Like/LikeVideo\";\nimport MiniIndex from './MiniIndex';\nimport CommentCreate from \"../Comments/CommentCreate\";\nimport SideBar from '../ui/SideBar';\nimport MiniSideBar from '../ui/MiniSideBar';\nimport Favorite from '../favorite/Favorite';\nimport NavBar from '../NavBar';\n\n\n\nconst{FETCH_VIDEO_LIKES} = Queries; \nconst {FETCH_VIDEO} = Queries;\n\n\nclass VideoDetail extends React.Component {\n\n  renderVideoDetail() {\n    const { _id, title, url, description, comments, favoriteBy } = this.props.data.video;\n    return (\n      <div key={_id}>\n        <div className=\"video-detail-main\">\n          <div className=\"detail-left-col\">\n            <object className=\"video-detail-player\">\n              <param name=\"movie\" value={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0`}></param>\n              <param name=\"allowFullScreen\" value=\"true\"></param>\n              <param name=\"allowscriptaccess\" value=\"always\"></param>\n              <embed src={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0`}\n                type=\"application/x-shockwave-flash\"\n                className=\"video-player\" allowscriptaccess=\"always\" allowFullScreen={true}></embed>\n            </object>\n            <div className=\"video-title-detail\">\n              <h3>{title}</h3>\n            </div>\n            <div className=\"video-info-detail\">\n              <div className=\"detail-comments-favs\">\n              <p>{comments.length} <i class=\"far fa-comments\"></i></p>\n              <p className=\"video-fav-detail\">{favoriteBy.length} <Favorite video={this.props.data.video} /></p>\n              </div>\n            <div className=\"rate-likes\">\n                <LikeVideo videoId={this.props.data.video._id} video={this.props.data.video} />\n            </div>\n            </div>\n            <div className=\"video-description-detail\">\n              <p className=\"video-description-body\">{description}</p>\n            </div>\n        </div>\n          <MiniIndex className=\"mini-index\"/>\n        </div>\n      </div>\n    );\n  }\n\n  updateCache(cache, { data: { newLike } }) {\n\n    let likes;\n    try {\n      likes = cache.readQuery({ query: FETCH_VIDEO_LIKES, variables: { id: this.props.data.video._id } });\n    } catch (err) {\n      return;\n    }\n    if (likes) {\n      let likesArray = likes.likes;\n      cache.writeQuery({\n        query: FETCH_VIDEO_LIKES,\n        data: { likes: likesArray.concat(newLike) }\n      });\n    }\n  }\n\n  render() {\n    if (this.props.data.loading || !this.props.data.video) {\n      return null;\n    }\n\n    return (\n      <div>\n        <NavBar />\n        <div className=\"container\">\n          <div className=\"flex-grid\">\n              <MiniSideBar />\n              <SideBar />\n           <section className=\"detail-main\">\n              <div className=\"row\">{this.renderVideoDetail()}</div> \n              {/* <h1 className=\"video-comments\">Comments</h1>\n              <div className=\"commentCreate\"><CommentCreate videoId={this.props.data.video._id} /></div>\n              <div className=\"commentIndex\"><CommentIndex videoId={this.props.data.video._id} /></div> */}\n            </section> \n          </div>\n        </div>\n      </div>\n      \n    );\n  }\n}\n\n\nexport default graphql(FETCH_VIDEO, {\n  options: (props) => { return { variables: { id: props.match.params.id } } }\n})(VideoDetail);","import React, { Component } from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport Mutations from \"../../graphql/mutations\";\nimport { Link } from \"react-router-dom\";\n\nconst {REGISTER_USER} = Mutations;\n\nclass Register extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      password2: \"\",\n      image: \"/stylesheets/images/default_avatar_2.png\",\n      error: \"\"\n    };\n  }\n\n  update(field) {\n    return e => this.setState({ [field]: e.target.value });\n  }\n\n  updateCache(client, { data }) {\n    client.writeData({\n      data: { isLoggedIn: data.register.loggedIn }\n    });\n  }\n\n  updateImage = (e) => {\n    if (e.target.files.length === 0) {\n      return;\n    }\n    let file = e.target.files[0];\n    let reader = new FileReader();\n    reader.onloadend = (e) => {\n      this.setState({image: reader.result});\n    };\n    reader.readAsDataURL(file);\n  }\n\n  render() {\n\n    let src = localStorage.theme === \"dark\" ? window.darkTheme : window.lightTheme;\n\n    let error;\n    if (this.state.error === \"please fill in missing fields\") {\n      error = \"Please fill in missing fields\"\n    } else if (this.state.error === \"GraphQL error: Email is invalid\") {\n      error = \"Invalid email\"\n    } else if (this.state.error === \"GraphQL error: This user already exists\") {\n      error = \"User already exists\"\n    } else if (this.state.error === \"GraphQL error: This username already exists\") {\n      error = \"Username already exists\"\n    } else if (this.state.error === \"GraphQL error: Passwords do not match\") {\n      error = \"Passwords do not match\"\n    }\n\n    return (\n      <Mutation\n        onError={error => {  this.setState({ error: error.message }) }}\n        mutation={REGISTER_USER}\n        onCompleted={data => {\n          const { token, _id, username, image, email } = data.register;\n          localStorage.setItem(\"auth-token\", token);\n          localStorage.setItem(\"user\", JSON.stringify({ id: _id, username, image, email }));\n        }}\n        update={(client, data) => this.updateCache(client, data)}\n      >\n        {registerUser => (\n          <div className=\"sign-up-form-page\">\n              <form\n                className=\"sign-up-form\"\n                onSubmit={e => {\n                  e.preventDefault();\n                  if (this.state.password === \"\" || this.state.username === \"\" || this.state.email === \"\" || this.state.password2 === \"\") {\n                    this.setState({ error: \"please fill in missing fields\" })\n                    return\n                  } \n                  registerUser({\n                    variables: {\n                      username: this.state.username,\n                      email: this.state.email,\n                      password: this.state.password,\n                      password2: this.state.password2,\n                      image: this.state.image\n                    }\n                  });\n                }}\n              >\n                <Link to=\"/\"><img className=\"signup-logo\" src={src} alt=\"signup\"/></Link>\n                <p className=\"form-title\">Create your PalTube Account</p>\n                <div>{error}</div>\n                <input\n                  value={this.state.username}\n                  onChange={this.update(\"username\")}\n                  placeholder=\"Username\"\n                  className=\"signup-username\"\n                />\n                <input\n                  value={this.state.email}\n                  onChange={this.update(\"email\")}\n                  placeholder=\"Email\"\n                  className=\"signup-email\"\n                />\n                <input\n                  value={this.state.password}\n                  onChange={this.update(\"password\")}\n                  type=\"password\"\n                  placeholder=\"Password\"\n                  className=\"signup-password\"\n                />\n                <input\n                  value={this.state.password2}\n                  onChange={this.update(\"password2\")}\n                  type=\"password\"\n                  placeholder=\"Confirm\"\n                  className=\"signup-password2\"\n                />\n              <input type=\"file\" onChange={this.updateImage} className=\"signup-password2\"/>\n              \n                <div className=\"signup-direct\">\n                  <Link to=\"/login\" className=\"link-login\">Sign in instead</Link>\n                  <button type=\"submit\" className=\"signup-button\">Sign up</button>\n                </div> \n              </form>\n              <div className=\"signup-pic\">\n              <img src={this.state.image} className=\"signup-avatar\"/>\n                <img src=\"/stylesheets/images/signuppic.png\" alt=\"signup\" />\n                <p className=\"signup-pic-info\">Join. Watch. Laugh.</p>\n              </div>\n          </div>\n        )}\n      </Mutation>\n    );\n  }\n}\n\nexport default Register;\n\n","import React, { Component } from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport Mutations from \"../../graphql/mutations\";\nimport { Link } from \"react-router-dom\";\nconst { LOGIN_USER } = Mutations;\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      emailOrUsername: \"\",\n      password: \"\",\n      error: \"\"\n    };\n\n    this.handleDemoSubmit = this.handleDemoSubmit.bind(this);\n  }\n\n  update(field) {\n    return e => this.setState({ [field]: e.target.value });\n  }\n\n  demoEffect(demoUser, loginUser) {\n    const that = this;\n    let index = 0;\n    const demoIntervalId = setInterval(() => {\n      if (index < demoUser.emailOrUsername.length) {\n        that.setState({\n          emailOrUsername: this.state.emailOrUsername + demoUser.emailOrUsername[index]\n        })\n      }\n      if (index < demoUser.password.length) {\n        that.setState({\n          password: this.state.password + demoUser.password[index]\n        })\n      }\n      index++;\n      if (index > demoUser.password.length && index > demoUser.emailOrUsername.length) {\n        clearInterval(demoIntervalId);\n        loginUser({ variables: demoUser }).then(() => this.props.history.push(\"/\"));\n      }\n    }, 200)\n  }\n\n  handleDemoSubmit(e, loginUser) {\n    e.preventDefault();\n    const demoUser = { emailOrUsername: \"GuestUser\", password: \"password\" };\n    this.demoEffect(demoUser, loginUser)\n    \n  }\n\n  updateCache(client, { data }) {\n    client.writeData({\n      data: { isLoggedIn: data.login.loggedIn }\n    });\n  }\n\n  render() {\n\n    let src = localStorage.theme === \"dark\" ? window.darkTheme : window.lightTheme;\n\n    let error;\n    if (this.state.error === \"password and username is required\" ) {\n      error = \"password and username is required\" \n    } else if (this.state.error === \"password is required\") {\n      error = \"password is required\" \n    } else if (this.state.error === \"username is required\") {\n      error = \"username is required\"\n    } else if (this.state.error === \"GraphQL error: Incorrect log in combination\") {\n      error = \"Incorrect log in combination\"\n    }\n\n    return (\n      <Mutation\n        onError={error => { this.setState({ error: error.message }) }}\n        mutation={LOGIN_USER}\n        onCompleted={data => {\n          const { token, _id, username, image, email } = data.login;\n          localStorage.setItem(\"auth-token\", token);\n          localStorage.setItem(\"user\", JSON.stringify({id: _id, username, image, email}));\n          this.props.history.push(\"/\");\n        }}\n        update={(client, data) => this.updateCache(client, data)}\n      >\n        {loginUser => (\n          <div className=\"login-form-page\">\n            <div className=\"login-pic\">\n              <img src=\"/stylesheets/images/loginpic.png\" alt=\"login\"/>\n              <p className=\"login-pic-info\">Welcome back to PalTube!</p>\n            </div>\n            <form\n              className=\"login-form\"\n              onSubmit={e => {\n                e.preventDefault();\n                if (this.state.password === \"\" && this.state.emailOrUsername === \"\") {\n                  this.setState({ error: \"password and username is required\" })\n                  return\n                } else if (this.state.password === \"\") {\n                  this.setState({ error: \"password is required\" })\n                  return\n                } else if (this.state.emailOrUsername === \"\") { \n                  this.setState({ error: \"username is required\" })\n                  return\n                };\n                loginUser({\n                  variables: {\n                    emailOrUsername: this.state.emailOrUsername,\n                    password: this.state.password\n                  }\n                });\n              }}\n            >\n              <Link to=\"/\"><img className=\"login-logo\" src={src} alt=\"login\"/></Link>\n              <p className=\"form-title\">Sign into your account</p>\n              <div>{error}</div>\n              <input\n                value={this.state.emailOrUsername}\n                onChange={this.update(\"emailOrUsername\")}\n                placeholder=\"Email or Username\"\n                className=\"login-email\"\n              />  \n              <input\n                value={this.state.password}\n                onChange={this.update(\"password\")}\n                type=\"password\"\n                placeholder=\"Password\"\n                className=\"login-password\"\n              />\n              <div className=\"login-direct\">\n                <button type=\"submit\" className=\"login-button\">Sign In</button>\n                <button onClick={(e) => this.handleDemoSubmit(e, loginUser)} type=\"submit\" className=\"demo-button\">Guest User</button>\n              </div> \n                <Link to=\"/register\" className=\"link-signup\">Sign up instead</Link>\n            </form>\n          </div>\n        )}\n      </Mutation>\n    );\n  }\n}\n\nexport default Login;","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { Query } from \"react-apollo\";\nimport Queries from \"../graphql/queries\";\nconst { IS_LOGGED_IN } = Queries;\n\nconst AuthRoute = ({\n  component: Component,\n  path,\n  exact,\n  routeType,\n  ...rest\n}) => (\n    <Query query={IS_LOGGED_IN}>\n      {({ data }) => {\n        if (routeType === \"auth\") {\n          return (\n            <Route\n              path={path}\n              exact={exact}\n              render={props =>\n                !data.isLoggedIn ? <Component {...props} /> : <Redirect to=\"/\" />\n              }\n            />\n          );\n        } else {\n          // otherwise this will be a protected route which will only\n          // render the component if the user is logged in\n          return (\n            <Route\n              {...rest}\n              render={props =>\n                data.isLoggedIn ? (\n                  <Component {...props} />\n                ) : (\n                    <Redirect to=\"/login\" />\n                  )\n              }\n            />\n          );\n        }\n      }}\n    </Query>\n  );\n\nexport default AuthRoute;","import React, { Component } from 'react';\nimport {Link} from 'react-router-dom';\nimport Queries from '../../graphql/queries'\nimport { Query } from 'react-apollo';\nimport SideBar from '../ui/SideBar'\nimport NavBar from '../NavBar';\nconst { FETCH_VIDEOS } = Queries;\n\nclass VideoSearch extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { videosLength: 0 }\n  }\n\n  renderSearchResult = () => {\n    const criteria = this.props.match.params.criteria;\n    return (\n\n      <Query query={FETCH_VIDEOS} variables={{ criteria: criteria }}\n        onCompleted={(data) => this.setState({ videosLength: data.videos.length })}\n      >\n        {({ loading, error, data }) => {\n          if (loading) return \"Loading...\";\n          if (error) return `Error! ${error.message}`;\n          return (\n            data.videos.map(({ _id, title, url, description, comments, favoriteBy }) => {\n              return (\n                <div className=\"search-results-container\" key={_id}>\n                  <div className=\"video-detail-container \">\n                    <object className=\"video-player\">\n                      <param name=\"movie\" value={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0`}></param>\n                      <param name=\"allowFullScreen\" value=\"true\"></param>\n                      <param name=\"allowscriptaccess\" value=\"always\"></param>\n                      <embed src={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0`}\n                        type=\"application/x-shockwave-flash\"\n                        className=\"video-player\" allowscriptaccess=\"always\" allowFullScreen={true}></embed>\n                    </object>\n                  </div>\n                  <div className=\"video-detail-info-container\">\n                    {/* <p>{title}</p> */}\n                    <Link to={`/videos/${_id}`}>\n                      <p className=\"clickable\">\n                        {title}\n                      </p>\n                    </Link>\n                    <p>{description}</p>\n                    <p>{comments.length} <i class=\"far fa-comments\"></i></p>\n                    <p>{favoriteBy.length} <i class=\"fas fa-heart\"></i></p>\n                  </div>\n                </div>\n              )\n            })\n          )\n        }}\n      </Query>\n    );\n  }\n  render() {\n    return (\n      <div className=\"container\">\n        <NavBar/>\n        <div className=\"flex-grid\">\n          <SideBar/>\n          <section className=\"main\">\n            <div>\n              <h5>we found {this.state.videosLength} videos matches your search...</h5>\n              {this.renderSearchResult()}\n            </div>\n          </section>\n        </div>\n      </div>\n    );\n  }\n}\n\n\nexport default VideoSearch;","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Queries from '../../graphql/queries'\nimport { Query } from 'react-apollo';\nimport SideBar from '../ui/SideBar';\nimport MiniSideBar from '../ui/MiniSideBar';\nimport { currentUser } from \"../../util/util\";\nimport NavBar from '../NavBar'\nconst { FETCH_USER_LIKED_VIDEOS } = Queries;\n\nclass LikedVideos extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { videosLength: 0 }\n  }\n\n  renderVideos = () => {\n    let userId = currentUser().id;\n    \n    return (\n      <Query query={FETCH_USER_LIKED_VIDEOS} variables={{ id: userId }}\n        onCompleted={(data) => this.setState({ videosLength: data.user.videos_liked.length })}\n      >\n        {({ loading, error, data }) => {\n          if (loading) return \"Loading...\";\n          if (error) return `Error! ${error.message}`;\n          return (\n            data.user.videos_liked.map(({ _id, title, url, description, comments, favoriteBy }) => {\n              return (\n                <div className=\"search-results-container\" key={_id}>\n                  <div className=\"video-detail-container \">\n                    <object className=\"video-player\">\n                      <param name=\"movie\" value={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0`}></param>\n                      <param name=\"allowFullScreen\" value=\"true\"></param>\n                      <param name=\"allowscriptaccess\" value=\"always\"></param>\n                      <embed src={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0`}\n                        type=\"application/x-shockwave-flash\"\n                        className=\"video-player\" allowscriptaccess=\"always\" allowFullScreen={true}></embed>\n                    </object\n                    >\n                  </div>\n                  <div className=\"video-detail-info-container\">\n                    <Link to={`/videos/${_id}`}>\n                      <p className=\"clickable\">\n                        {title}\n                      </p>\n                    </Link>\n                    <p>{description}</p>\n                    <p>{comments.length} <i class=\"far fa-comments\"></i></p>\n                    <p>{favoriteBy.length} <i class=\"fas fa-heart\"></i></p>\n                  </div>\n                </div>\n              )\n            })\n          )\n        }}\n      </Query>\n    );\n  }\n  render() {\n    if (!currentUser()){\n      this.props.history.push('/login')\n    }\n    return (\n      <div className=\"container\">\n        <NavBar/>\n        <div className=\"flex-grid\">\n          <MiniSideBar />\n          <SideBar />\n          <section className=\"main\">\n            <div>\n              <h5>you have liked {this.state.videosLength} videos...</h5>\n              {this.renderVideos()}\n            </div>\n          </section>\n        </div>\n      </div>\n    );\n  }\n}\n\n\nexport default LikedVideos;","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Queries from '../../graphql/queries'\nimport { Query } from 'react-apollo';\nimport SideBar from '../ui/SideBar';\nimport MiniSideBar from '../ui/MiniSideBar';\nimport NavBar from '../NavBar';\n\nimport { currentUser } from \"../../util/util\";\nconst { FETCH_USER_FAVORITE_VIDEOS } = Queries;\n\nclass FavoriteVideos extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { videosLength: 0 }\n  }\n\n  renderVideos = () => {\n    let userId = currentUser().id;\n    return (\n      <Query query={FETCH_USER_FAVORITE_VIDEOS} variables={{ id: userId }}\n        onCompleted={(data) => this.setState({ videosLength: data.user.favoriteVideos.length })}>\n        {({ loading, error, data }) => {\n          if (loading) return \"Loading...\";\n          if (error) return `Error! ${error.message}`;\n          return (\n            data.user.favoriteVideos.map(({ _id, title, url, description, comments, favoriteBy }) => {\n              return (\n                <div className=\"search-results-container\" key={_id}>\n                  <div className=\"video-detail-container \">\n                    <object className=\"video-player\">\n                      <param name=\"movie\" value={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US;showinfo=0`}></param>\n                      <param name=\"allowFullScreen\" value=\"true\"></param>\n                      <param name=\"allowscriptaccess\" value=\"always\"></param>\n                      <embed src={`${url}?modestbranding=1&amp;version=3&amp;hl=en_US&amp;showinfo=0`}\n                        type=\"application/x-shockwave-flash\"\n                        className=\"video-player\" allowscriptaccess=\"always\" allowFullScreen={true}></embed>\n                    </object\n                    >\n                  </div>\n                  <div className=\"video-detail-info-container\">\n                    <Link to={`/videos/${_id}`}>\n                      <p className=\"clickable\">\n                        {title}\n                      </p>\n                    </Link>\n                    <p>{description}</p>\n                    <p>{comments.length} <i class=\"far fa-comments\"></i></p>\n                    <p>{favoriteBy.length} <i class=\"fas fa-heart\"></i></p>\n                  </div>\n                </div>\n              )\n            })\n          )\n        }}\n      </Query>\n    );\n  }\n  render() {\n    if (!currentUser()) {\n      this.props.history.push('/login')\n    }\n\n    return (\n      <div className=\"container\">\n        <NavBar />\n        <div className=\"flex-grid\">\n          <MiniSideBar />\n          <SideBar />\n          <section className=\"main\">\n            <div>\n              <h5>you have {this.state.videosLength} favorite videos ... </h5>\n              {this.renderVideos()}\n            </div>\n          </section>\n        </div>\n      </div>\n    );\n  }\n}\n\n\nexport default FavoriteVideos;","import React from 'react'\nimport { Route, Switch } from 'react-router-dom';\nimport VideoIndex from './components/Videos/VideoIndex';\nimport VideoDetail from './components/Videos/VideoDetail';\nimport Register from \"./components/User/Register\";\nimport Login from \"./components/User/Login\";\nimport AuthRoute from \"./util/route_util\";\nimport VideoSearch from './components/Videos/VideoSearch';\nimport LikedVideos from './components/Videos/LikedVideos'\nimport FavoriteVideos from './components/Videos/FavoriteVideos';\nconst App = () => {\n return(\n  <div>\n    <Switch>\n      <AuthRoute path=\"/register\" component={Register} routeType=\"auth\" />\n      <Route exact path=\"/\" component={VideoIndex} />\n       <Route exact path=\"/videos/likes\" component={LikedVideos} />\n       <Route exact path=\"/videos/favorites\" component={FavoriteVideos} />\n      <Route  path=\"/videos/:id\" component={VideoDetail} />\n       <Route path=\"/search/:criteria\" component={VideoSearch} />\n      <AuthRoute path=\"/login\" component={Login} routeType=\"auth\" />\n    </Switch>\n  </div>\n )}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport ApolloClient from 'apollo-client';\nimport { ApolloProvider } from 'react-apollo';\nimport {HashRouter } from 'react-router-dom';\nimport App from './App';\nimport { InMemoryCache } from 'apollo-cache-inmemory';\nimport { createHttpLink } from \"apollo-link-http\";\nimport { onError } from \"apollo-link-error\";\nimport { ApolloLink } from \"apollo-link\";\nimport Mutation from \"./graphql/mutations\";\nconst { VERIFY_USER } = Mutation;\nconst token = localStorage.getItem(\"auth-token\");\n\nconst cache = new InMemoryCache({ dataIdFromObject: object => object._id || null});\n\nconst httpLink = createHttpLink({\n  credentials: 'same-origin' \n});\n\n// uri: \"http://localhost:5000/graphql\"\n\n\nconst errorLink = onError(({ graphQLErrors }) => {\n  if (graphQLErrors) graphQLErrors.map(({ message }) => console.log(message));\n});\n\nconst client = new ApolloClient({\n  link: ApolloLink.from([errorLink, httpLink]),\n  cache,\n  headers: {\n    authorization: localStorage.getItem(\"auth-token\")\n  },\n  onError: ({ networkError, graphQLErrors }) => {\n    console.log(\"graphQLErrors\", graphQLErrors);\n    console.log(\"networkError\", networkError);\n  }\n});\n\ncache.writeData({\n  data: {\n    isLoggedIn: Boolean(token)\n  }\n});\n\nif (token) {\n  client\n    .mutate({ mutation: VERIFY_USER, variables: { token } })\n    .then(({ data }) => {\n      cache.writeData({\n        data: {\n          isLoggedIn: data.verifyUser.loggedIn\n        }\n      });\n    });\n}\n\nconst Root = () => {\n  return (\n    <ApolloProvider client={client}>\n      <HashRouter>\n        <App/>\n      </HashRouter>\n    </ApolloProvider>\n    )\n};\n\nReactDOM.render(\n  <Root />,\n  document.querySelector('#root')\n);\n"],"sourceRoot":""}